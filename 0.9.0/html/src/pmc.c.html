<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
    "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
    <HEAD>
        <TITLE>The base vtable calling functions</TITLE>
        <LINK REL="stylesheet" TYPE="text/css"
            HREF="../../resources/perl.css"
            TITLE="Default CSS2" media="screen">
    </HEAD>
    <BODY>
        <A NAME="_top"></A>
        <TABLE CELLSPACING="0" WIDTH="730">
            <TR>
                <TD WIDTH="100%" COLSPAN="2" CLASS="BANNER">parrotcode: <SPAN CLASS="title">The base vtable calling functions</SPAN></TD>
            </TR>
            <TR>
                <TD WIDTH="100%" COLSPAN="2"  ID="NAV" STYLE="border-bottom: 1px solid #191970;">
                    <a href="../../html/index.html">Contents</a> | <a href="../../html/c.html">C</a>
                </TD>
            </TR>
        </TABLE>
        <DIV CLASS="pod">

<h1><a name="NAME"
>NAME <a href='#_top'><img alt='^' border=0 src='../../resources/up.gif'></a></a></h1>

<p>src/pmc.c &#45; The base vtable calling functions</p>

<h1><a name="DESCRIPTION"
>DESCRIPTION <a href='#_top'><img alt='^' border=0 src='../../resources/up.gif'></a></a></h1>

<h2><a name="Functions"
>Functions <a href='#_top'><img alt='^' border=0 src='../../resources/up.gif'></a></a></h2>

<dl>
<dt><a name="INTVAL_PMC_is_null"
><b><code>INTVAL PMC_is_null</b></code></a></dt>
Tests if the given pmc is null.
<dt><a name="PMC_*_pmc_new"
><b><code>PMC *pmc_new</b></code></a></dt>
Creates a new PMC of type <code>base_type</code> (which is an index into the list of PMC types declared in <code>vtables</code> in <em>include/parrot/pmc.h</em>).
Once the PMC has been successfully created and its vtable pointer initialized,
we call its <code>init</code> method to perform any other necessary initialization.
<dt><a name="PMC_*_pmc_reuse"
><b><code>PMC *pmc_reuse</b></code></a></dt>
Reuse an existing PMC,
turning it into an empty PMC of the new type.
Any required internal structure will be put in place (such as the extension area) and the PMC will be ready to go.
This will throw an exception if the PMC is constant or of a singleton type (such as the environment PMC) or is being turned into a PMC of a singleton type.
<dt><a name="static_PMC_*_get_new_pmc_header"
><b><code>static PMC *get_new_pmc_header</b></code></a></dt>
Gets a new PMC header.
<dt><a name="PMC_*_pmc_new_noinit"
><b><code>PMC *pmc_new_noinit</b></code></a></dt>
Creates a new PMC of type <code>base_type</code> (which is an index into the list of PMC types declared in <code>vtables</code> in <em>include/parrot/pmc.h</em>).
Unlike <code>pmc_new()</code>,
<code>pmc_new_noinit()</code> does not call its <code>init</code> method.
This allows separate allocation and initialization for continuations.
<dt><a name="PMC_*_constant_pmc_new_noinit"
><b><code>PMC *constant_pmc_new_noinit</b></code></a></dt>
Creates a new constant PMC of type <code>base_type</code>.
<dt><a name="PMC_*_constant_pmc_new"
><b><code>PMC *constant_pmc_new</b></code></a></dt>
Creates a new constant PMC of type <code>base_type</code>,
then calls its <code>init</code>.
<dt><a name="PMC_*_pmc_new_init"
><b><code>PMC *pmc_new_init</b></code></a></dt>
As <code>pmc_new()</code>,
but passes <code>init</code> to the PMC&#39;s <code>init_pmc()</code> vtable entry.
<dt><a name="PMC_*_constant_pmc_new_init"
><b><code>PMC *constant_pmc_new_init</b></code></a></dt>
As <code>constant_pmc_new</code>,
but passes <code>init</code> to the PMC&#39;s <code>init_pmc</code> vtable entry.
<dt><a name="PMC_*_temporary_pmc_new"
><b><code>PMC *temporary_pmc_new</b></code></a></dt>
Creates a new temporary PMC of type <code>base_type</code>,
the call <code>init</code>.
<b>You</b> are responsible for freeing this PMC when it goes out of scope with <code>free_temporary_pmc()</code>.
<b>Do not</b> store this PMC in any other PMCs,
or allow it to be stored.
<b>Do not</b> store any regular PMC in this PMC,
or allow the storage of any regular PMC in this PMC.If you don&#39;t know what this means means,
or you can&#39;t tell if either case will happen as the result of any call you make on or with this PMC,
<b>DO NOT</b> use this function,
lest you cause weird crashes and memory errors.
Use <code>pmc_new()</code> instead.(Why do these functions even exist?
Used judiciously,
they can reduce GC pressure in hotspots tremendously.
If you haven&#39;t audited the code carefully &#45;&#45; including profiling and benchmarking &#45;&#45; then use <code>pmc_new()</code> instead,
and never <b>ever</b> add <code>PARROT_EXPORT</code> to either function.)
<dt><a name="void_temporary_pmc_free"
><b><code>void temporary_pmc_free</b></code></a></dt>
Frees a new temporary PMC created by <code>temporary_pmc_new()</code>.
Do not call this with any other type of PMC.
Do not forget to call this (or you&#39;ll leak PMCs).
Read and <i>understand</i> the warnings for <code>temporary_pmc_new()</code> before you&#39;re tempted to use this.
<dt><a name="INTVAL_pmc_register"
><b><code>INTVAL pmc_register</b></code></a></dt>
Registers the name of a new PMC type with Parrot,
returning the INTVAL representing that type.
<dt><a name="INTVAL_pmc_type"
><b><code>INTVAL pmc_type</b></code></a></dt>
Returns the PMC type for <code>name</code>.
<dt><a name="INTVAL_pmc_type_p"
><b><code>INTVAL pmc_type_p</b></code></a></dt>
Returns the PMC type for <code>name</code>.
<dt><a name="static_PMC_*_create_class_pmc"
><b><code>static PMC *create_class_pmc</b></code></a></dt>
Create a class object for this interpreter.
Takes an interpreter name and type as arguments.
Returns a pointer to the class object.
<dt><a name="void_Parrot_create_mro"
><b><code>void Parrot_create_mro</b></code></a></dt>
Create the MRO (method resolution order) array for this type.</dl>

<h2><a name="DOD_registry_interface"
>DOD registry interface <a href='#_top'><img alt='^' border=0 src='../../resources/up.gif'></a></a></h2>

<dl>
<dt><a name="void_dod_register_pmc"
><b><code>void dod_register_pmc</b></code></a></dt>
Registers the PMC with the interpreter&#39;s DOD registry.
<dt><a name="void_dod_unregister_pmc"
><b><code>void dod_unregister_pmc</b></code></a></dt>
Unregisters the PMC from the interpreter&#39;s DOD registry.</dl>

<h1><a name="SEE_ALSO"
>SEE ALSO <a href='#_top'><img alt='^' border=0 src='../../resources/up.gif'></a></a></h1>

<p><em>include/parrot/vtable.h</em>.</p>

<p><code>5.1.0.14.2.20011008152120.02158148@pop.sidhe.org</code> (<a href="http://www.nntp.perl.org/group/perl.perl6.internals/5516">http://www.nntp.perl.org/group/perl.perl6.internals/5516</a>).</p>

<h1><a name="HISTORY"
>HISTORY <a href='#_top'><img alt='^' border=0 src='../../resources/up.gif'></a></a></h1>

<p>Initial version by Simon on 2001.10.20.</p>
        </DIV>
        <P>
        <TABLE BORDER="0" WIDTH="730" CELLSPACING="0" CELLPADDING="0">
            <TR ALIGN="RIGHT">
                <TD WIDTH="590" VALIGN="MIDDLE">
                    <BR>
                    <DIV CLASS="FOOTER">
                        <DIV ALIGN="LEFT">
                        </DIV>
                    </DIV>
                </TD>
                <TD VALIGN="middle" ALIGN="center">
                    <IMG BORDER=0
                        SRC="../../resources/parrot_small.png"
                        ALT="parrot">
                </TD>
            </TR>
        </TABLE>
    </BODY>
</HTML>
