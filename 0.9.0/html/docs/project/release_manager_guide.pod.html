<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
    "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
    <HEAD>
        <TITLE>Untitled</TITLE>
        <LINK REL="stylesheet" TYPE="text/css"
            HREF="../../../resources/perl.css"
            TITLE="Default CSS2" media="screen">
    </HEAD>
    <BODY>
        <A NAME="_top"></A>
        <TABLE CELLSPACING="0" WIDTH="730">
            <TR>
                <TD WIDTH="100%" COLSPAN="2" CLASS="BANNER">parrotcode: <SPAN CLASS="title">Untitled</SPAN></TD>
            </TR>
            <TR>
                <TD WIDTH="100%" COLSPAN="2"  ID="NAV" STYLE="border-bottom: 1px solid #191970;">
                    <a href="../../../html/index.html">Contents</a> | <a href="../../../html/info.html">Project Information</a>
                </TD>
            </TR>
        </TABLE>
        <DIV CLASS="pod">

<h1><a name="Release_Instructions"
>Release Instructions <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h1>

<p>To prepare a release:</p>

<dl>
<dt><a name="0."
>0.</a></dt>
As soon as you become the release manager: review the goals for the release on the Parrot roadmap (<a href='https://trac.parrot.org/parrot/wiki/ParrotRoadmap'>https://trac.parrot.org/parrot/wiki/ParrotRoadmap</a>) and announce the tasks to the Parrot mailing list.
Make sure everyone knows what they&#39;ve committed to accomplish in time for the release.
Ask the previous release manager to review PAUSE permissions so that PARROTRE owns all files.A couple of weeks in advance: Ask people to run <code>make fulltest</code> and report (and hopefully fix!) any problems they find.A couple of days in advance: announce the new release to parrot&#45;dev@lists.parrot.org and to the IRC channel #parrot.
Ask whether there are any showstopping bugs.
It&#39;s also good to ask for updates to <em>NEWS</em>,
<em><a href="../../CREDITS.html">CREDITS</a></em>,
<em>PLATFORMS</em>,
<em>RESPONSIBLE_PARTIES</em> and <a href='https://trac.parrot.org/parrot/wiki/Languages'>https://trac.parrot.org/parrot/wiki/Languages</a>.You might also select a name for your release.
For example,
you could select a name from <a href='http://en.wikipedia.org/wiki/List_of_parrots'><a href="http://en.wikipedia.org/wiki/List_of_parrots">http://en.wikipedia.org/wiki/List_of_parrots</a></a>.Set up your account on <a href='http://www.parrot.org/'><a href="http://www.parrot.org/">http://www.parrot.org/</a></a> and ask one of Allison,
Jerry,
Jeff,
Will,
or chromatic to bestow you story&#45;creating powers.
<dt><a name="1."
>1.</a></dt>
Make sure you&#39;re up to date:
<pre> $ svn update</pre>
You may want to ask the developer base to stop committing big changes; it will avoid complications. Or you could create a release branch, make release&#45;related changes there, and fold them back into the trunk once the release is done. This process is explained in <a href='#Appendix_1_%2D_Releasing_from_a_branch'>Appendix 1</a>.
<dt><a name="2."
>2.</a></dt>
Update files with version&#45;specific information:
<dl>
<dt><a name="a"
>a</a></dt>
Increment the version number in the following files: <em>VERSION</em>, <em>parrot.spec</em>, <em>MANIFEST.generated</em>, <em>META.yml</em>, <em>README</em>.Note: <code>Source0</code> in parrot.spec might have to be adapted as well.Also update the version number, date, and your name in the the file: <em><a href="../parrothist.pod.html">docs/parrothist.pod</a></em>.Update this file, that is <em>release_manager_guide.pod</em>, to remove the pending release you&#39;re in the middle of.
<dt><a name="b"
>b</a></dt>
Update <em>ChangeLog</em>, <em>NEWS</em> with the new version number and any other changes that have occurred since the last release: Hopefully these files are being updated as committers work. If not, it&#39;s probably a good idea to gather the updates weekly rather than waiting until the day of the monthly release.
<dt><a name="c"
>c</a></dt>
Update release&#45;related information in <em>tools/util/release.json</em>. This will be used later when making release announcements. There are a few essential fields that must be updated at each release:
<dl>
<dt><a name="release.*"
><b><code>release.*</b></code></a></dt>
The date of the next release is in <a href='#Appendix_2_%2D_Upcoming_releases'>Appendix 2</a>.
<dt><a name="bugday.date"
><b><code>bugday.date</b></code></a></dt>
Enter the date of the Saturday before the next release.
<dt><a name="wiki.bugday"
><b><code>wiki.bugday</b></code></a></dt>
Update the date part of the link to the wiki page for the next bugday.</dl>

<dt><a name="d"
>d</a></dt>
Make sure <em>RESPONSIBLE_PARTIES</em> is still accurate.
<dt><a name="e"
>e</a></dt>
Give yourself credit for the release in <em><a href="../../CREDITS.html">CREDITS</a></em>.
<dt><a name="f"
>f</a></dt>
Configure parrot and run <code>make distro_tests</code>, and either fix what those tests complain about, or fix them so they don&#39;t complain.
<dt><a name="g"
>g</a></dt>
Run <code>perl tools/dev/pbc_header.pl &#45;&#45;upd t/native_pbc/*.pbc</code> to update version and fingerprint in the native tests. Please check with <code>prove t/native_pbc/*.t</code>.NOTE: Due to frequent PBC changes, these tests are currently skipped.
<dt><a name="h"
>h</a></dt>
Make sure everything works:
<pre> $ make realclean
 $ perl Configure.pl &#45;&#45;test ...
 $ make world docs html 2&#62;&#38;1 | tee make_world_docs_html.log
 $ make fulltest        2&#62;&#38;1 | tee make_fulltest.log</pre>
Note that running &#34;make fulltest&#34; takes a while and that separate harnesses are being run.</dl>

<dt><a name="3."
>3.</a></dt>
When all is well, then commit your changes:
<pre> svn diff | more
 svn commit</pre>
Write down the revision number from this commit. You will need it later in step 7.
<dt><a name="4."
>4.</a></dt>
Prepare the release tarball.
<pre> $ make release VERSION=a.b.c</pre>
where a.b.c is the version number. This will create the tarball named <em>parrot&#45;a.b.c.tar.gz</em>. This will automatically avoid including <code>DEVELOPING</code> in the release tarball.
<dt><a name="5."
>5.</a></dt>
Untar <em>parrot&#45;a.b.c.tar.gz</em> into another area.
<dt><a name="6."
>6.</a></dt>
Make sure everything works:
<pre> $ perl Configure.pl
 $ make world docs html 2&#62;&#38;1 | tee make_world_docs_html.log
 $ make fulltest        2&#62;&#38;1 | tee make_fulltest.log</pre>

<dt><a name="7."
>7.</a></dt>
Tag the release as &#34;RELEASE_a_b_c&#34;, where a.b.c is the version number. If you&#39;re working in trunk, be sure to specify the revision number generated in step 3, above.
<pre> $ export SVNPARROT=https://svn.perl.org/parrot
 $ svn copy &#45;m &#34;tagged release a.b.c&#34; \
   $SVNPARROT/trunk $SVNPARROT/tags/RELEASE_a_b_c</pre>
See also <a href='#Appendix_1_%2D_Releasing_from_a_branch'>Appendix 1</a> below.
<dt><a name="8."
>8.</a></dt>

<dl>
<dt><a name="a._CPAN"
>a. CPAN</a></dt>
In PAUSE, assign yourself co&#45;maintainer permissions on all modules owned by PARROTRE.Upload to CPAN.NOTE: you may get a failure message from the CPAN Indexer about the content of META.yml. Don&#39;t panic, the tarball still uploaded okay. You do need to fix META.yml for the next release. Under &#34;no_index&#34; list any modules that aren&#39;t properly part of the Parrot distribution.Once you get a reply from the PAUSE indexer, log in to PAUSE to clean up module permissions. Under &#34;View Permissions&#34; search for your PAUSE ID. Any new modules added in this release will list your PAUSE ID as the &#34;owner&#34;. Change the owner to PARROTRE.See <em><a href="pause_guide.pod.html">docs/project/pause_guide.pod</a></em> for more details.
<dt><a name="b._FTP"
>b. FTP</a></dt>
SSH to ftp&#45;osl.osuosl.org. (If you don&#39;t have the necessary login information, get it from one of the previous release managers.)
<pre> $ ssh &#45;l &#60;USERNAME&#62; ftp&#45;osl.osuosl.org</pre>
If the release is a monthly development release, create a new directory under <em>~/ftp/releases/devel</em>.
<pre> $ mkdir ~/ftp/releases/devel/a.b.c</pre>
If the release is in the stable series (1.0, 1.5, 2.0, 2.5, etc) create the new directory in <em>~/ftp/releases/stable</em> instead.
<pre> $ mkdir ~/ftp/releases/stable/a.b.c</pre>
Copy the tarball from your machine into the new directory.
<pre> $ scp parrot&#45;a.b.c.tar.gz ftp&#45;osl.osuosl.org:~/ftp/releases/devel/a.b.c/.</pre>
(Or using <code>wget</code> or whatever tool you prefer.)When you&#39;re finished making changes, run the trigger script to push the changes out to the FTP mirrors.
<pre>  ~/trigger&#45;parrot</pre>
Check your changes at <em>ftp://ftp.parrot.org/pub/parrot/releases</em>. It should only take a few minutes for the mirrors to sync.</dl>

<dt><a name="9."
>9.</a></dt>
Compose the release announcement. Use <em><a href="../../tools/util/crow.pir.html">tools/util/crow.pir</a></em> to make this part easier. You can specify the format of your announcements like so:
<pre>  $ ./parrot tools/util/crow.pir &#45;&#45;type=text
  $ ./parrot tools/util/crow.pir &#45;&#45;type=html</pre>
Take the screen output and paste it into the application you need. HTML works well for use Perl and PerlMonks, and text for the rest. It is not a bad idea to add a &#34;highlights&#34; section to draw attention to major new features, just be sure to say the same thing in both text and HTML versions.
<dt><a name="10."
>10.</a></dt>
Update the website. You will need an account on <a href='http://www.parrot.org'><a href="http://www.parrot.org">http://www.parrot.org</a></a>.
<dl>
<dt><a name="a"
>a</a></dt>
Add a new page for the release announcement with &#34;Create content&#34; &#45;&#62; &#34;Story&#34;. There&#39;s some additional stuff needed at the top of the page; use one of the old announcements as a guide.The &#34;&#60;!&#45;&#45;break&#45;&#45;&#62;&#34; line marks the end of the text that will appear on the front page.
<dt><a name="b"
>b</a></dt>
Set the &#34;News&#34; category to &#34;Releases&#34;.Add tags to the page for significant changes in this release (e.g. &#34;rakudo&#34; for significant Rakudo language updates, or &#34;gc&#34; for significant garbage collection subsystem updates).
<dt><a name="c"
>c</a></dt>
Under &#34;URL path settings&#34; uncheck &#34;Automatic alias&#34; and set the path to news/[year]/Parrot&#45;[release number].
<dt><a name="d"
>d</a></dt>
Under &#34;Publishing options&#34; make sure &#34;Published&#34; and &#34;Promoted to front page&#34; are checked.
<dt><a name="e"
>e</a></dt>
Under &#34;Administer&#34; &#45;&#62; &#34;Site building&#34; &#45;&#62; &#34;URL Redirects&#34;, change the URL for &#34;release/current&#34; to the FTP directory for the new release (for example, <em>ftp://ftp.parrot.org/pub/parrot/releases/devel/0.8.1</em>).</dl>
Preview the new page, and submit it.(The old release announcement may be edited to uncheck &#34;Promoted to front page&#34; to keep the main page fresh.)
<dt><a name="11."
>11.</a></dt>
Publicize the release by publishing the announcement through the following channels (and any others you can think of):
<dl>
<dt><a name="a"
>a</a></dt>
Send a text email to parrot&#45;dev, perl6&#45;language, perl6&#45;announce, perl5&#45;porters, etc. You should also include LWN.net in this mailing; email to <code>lwn</code> at that domain.
<dt><a name="b"
>b</a></dt>
Submit the use Perl announcement story to use Perl, Perl Monks, Slashdot, Newsforge, etc. Don&#39;t forget to set a Reply&#45;To: or Followup&#45;To: header, if your mail client lets you.
<dt><a name="c"
>c</a></dt>
Modify the topic on #parrot, e.g.:
<pre> /topic #parrot Parrot 0.4.8 Released | <a href="http://parrot.org/">http://parrot.org/</a></pre>

<dt><a name="d"
>d</a></dt>
Update the wiki frontpage at <a href='http://www.perlfoundation.org/parrot/index.cgi?parrot'><a href="http://www.perlfoundation.org/parrot/index.cgi?parrot">http://www.perlfoundation.org/parrot/index.cgi?parrot</a></a>. Update the next planned release date on the wiki at <a href='http://www.perlfoundation.org/parrot/index.cgi?release_schedule_2008'><a href="http://www.perlfoundation.org/parrot/index.cgi?release_schedule_2008">http://www.perlfoundation.org/parrot/index.cgi?release_schedule_2008</a></a>.
<dt><a name="e"
>e</a></dt>
Update the Wikipedia entry at <a href='http://en.wikipedia.org/wiki/Parrot_virtual_machine'><a href="http://en.wikipedia.org/wiki/Parrot_virtual_machine">http://en.wikipedia.org/wiki/Parrot_virtual_machine</a></a>.
<dt><a name="f"
>f</a></dt>
Update the C2 wiki entry at <a href='http://c2.com/cgi/wiki?ParrotCode'><a href="http://c2.com/cgi/wiki?ParrotCode">http://c2.com/cgi/wiki?ParrotCode</a></a>.</dl>

<dt><a name="12."
>12.</a></dt>
Close any release&#45;related tickets in trac. Migrate any critical tickets to the next milestone; non&#45;critical tickets can have their milestone unset.
<dt><a name="13."
>13.</a></dt>
Add the version to trac so new bug reports can be filed against your buggy code. <a href='https://trac.parrot.org/parrot/admin/ticket/versions'>https://trac.parrot.org/parrot/admin/ticket/versions</a>Remove any sufficiently old versions listed there.
<dt><a name="14."
>14.</a></dt>
You&#39;re done! Help yourself to a beer, cola, or other celebratory drink.</dl>

<h2><a name="ABOUT_THIS_DOCUMENT"
>ABOUT THIS DOCUMENT <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h2>

<p>This document was written after a couple of subtly incorrectly assembled releases&#45;&#45;usually when someone forgot to delete <em>DEVELOPING</em> (which is now automated!), but at least once where the <em>MANIFEST</em> check failed. The intent of this file is to document what must be done to release so that such mistakes won&#39;t happen again.</p>

<h1><a name="SEE_ALSO"
>SEE ALSO <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h1>

<p><em>README</em>, <em>RESPONSIBLE_PARTIES</em>.</p>

<h1><a name="Appendix_1_&#45;_Releasing_from_a_branch"
>Appendix 1 &#45; Releasing from a branch <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h1>

<p>Instead of step 1, create a new branch, and get a working copy of it:</p>

<pre>   $ export SVNPARROT=https://svn.perl.org/parrot
   $ svn copy &#45;m&#34;Starting release a.b.c&#34; \
              $SVNPARROT/trunk $SVNPARROT/branches/RELEASE_a_b_c
   $ svn checkout $SVNPARROT/branches/RELEASE_a_b_c parrot&#45;release
   $ cd parrot&#45;release</pre>

<p>Make a note of the revision number produced by <code>svn copy</code> so that you know which changes were made on the branch.</p>

<p>This new <code>parrot&#45;release</code> working copy will be &#34;on&#34; the branch, insulated from trunk commits, so you should feel free to announce the end of any &#34;code slush&#34; that may be in effect.</p>

<p>Then, do steps 3 through 7 using your branch working copy, so that commits go to the branch. When you are sure that the tarball is all that it should be, tag the release as a copy from the branch (instead of the trunk):</p>

<pre>   $ svn copy &#45;m&#34;Release a.b.c&#34; \
           $SVNPARROT/branches/RELEASE_a_b_c $SVNPARROT/tags/RELEASE_a_b_c</pre>

<p>Alternatively you can also move the branch:</p>

<pre>   $ svn move &#45;m &#34;Tagging release a.b.c&#34; \
           $SVNPARROT/branches/RELEASE_a_b_c $SVNPARROT/tags/RELEASE_a_b_c</pre>

<p>Upload your shiny new tarball, announce the release, and close tickets (steps 9 through 11) as described above.</p>

<p>Finally (don&#39;t get your celebratory drink yet!), you need to merge the branch changes back into the trunk. To do this, you need an up&#45;to&#45;date working copy on the trunk. You can reuse the <code>parrot&#45;release</code> working copy via <code>svn switch</code> by switching it back to the trunk (assuming <code>parrot&#45;release</code> is the current directory):</p>

<pre>   $ svn switch $SVNPARROT/trunk</pre>

<p>Then, merge the branch changes back into it:</p>

<pre>   $ svn merge &#45;r 12345:HEAD $SVNPARROT/branches/RELEASE_a_b_c</pre>

<p>where &#34;12345&#34; is the revision number of the <code>svn copy</code> operation that created the branch. Check that the merge was clean, &#34;make test&#34; if there were any code changes on the branch, and commit. <i>Then</i> go get that beer!</p>

<h1><a name="Appendix_2_&#45;_Upcoming_releases"
>Appendix 2 &#45; Upcoming releases <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h1>

<p>To make a monthly release schedule possible, we&#39;re spreading the burden of releases across multiple release managers. Releases are scheduled for the 3rd Tuesday of each month. Version numbers for each release will be determined each month, and will depend on the features actually present in that release.</p>

<pre> &#45; February 17, 2009 &#45; 0.9.1
 &#45; March 17, 2009  &#45; 1.0.0</pre>
        </DIV>
        <P>
        <TABLE BORDER="0" WIDTH="730" CELLSPACING="0" CELLPADDING="0">
            <TR ALIGN="RIGHT">
                <TD WIDTH="590" VALIGN="MIDDLE">
                    <BR>
                    <DIV CLASS="FOOTER">
                        <DIV ALIGN="LEFT">
                        </DIV>
                    </DIV>
                </TD>
                <TD VALIGN="middle" ALIGN="center">
                    <IMG BORDER=0
                        SRC="../../../resources/parrot_small.png"
                        ALT="parrot">
                </TD>
            </TR>
        </TABLE>
    </BODY>
</HTML>
