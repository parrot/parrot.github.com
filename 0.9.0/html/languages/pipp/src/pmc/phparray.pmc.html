<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
    "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
    <HEAD>
        <TITLE>PHP Array</TITLE>
        <LINK REL="stylesheet" TYPE="text/css"
            HREF="../../../../../resources/perl.css"
            TITLE="Default CSS2" media="screen">
    </HEAD>
    <BODY>
        <A NAME="_top"></A>
        <TABLE CELLSPACING="0" WIDTH="730">
            <TR>
                <TD WIDTH="100%" COLSPAN="2" CLASS="BANNER">parrotcode: <SPAN CLASS="title">PHP Array</SPAN></TD>
            </TR>
            <TR>
                <TD WIDTH="100%" COLSPAN="2"  ID="NAV" STYLE="border-bottom: 1px solid #191970;">
                    <a href="../../../../../html/index.html">Contents</a> | <a href="../../../../../html/languages.html">Language Implementations</a> | <a href="../../../../../html/pipp.html">Pipp</a>
                </TD>
            </TR>
        </TABLE>
        <DIV CLASS="pod">

<h1><a name="NAME"
>NAME <a href='#_top'><img alt='^' border=0 src='../../../../../resources/up.gif'></a></a></h1>

<p>src/pmc/phparray.pmc &#45; PHP Array</p>

<h1><a name="DESCRIPTION"
>DESCRIPTION <a href='#_top'><img alt='^' border=0 src='../../../../../resources/up.gif'></a></a></h1>

<p>Implementation of the Array datatype.</p>

<h2><a name="VTABLE_Functions"
>VTABLE Functions <a href='#_top'><img alt='^' border=0 src='../../../../../resources/up.gif'></a></a></h2>

<dl>
<dt><a name="void_init()"
><b><code>void init()</b></code></a></dt>
Intialize this PHPArray.
<dt><a name="void_init_pmc(PMC_*p)"
><b><code>void init_pmc(PMC *p)</b></code></a></dt>
Initialize this PHPArray with the passed&#45;in PMC <code>p</code>.
If <code>p</code> is a PHPArray,
its contents are copied directly.
If <code>p</code> is a PMC that provides a hash or array interface,
its contents are copied via the appropriate VTABLE functions.
In any other case,
an exception will be thrown.
<dt><a name="void_destroy()"
><b><code>void destroy()</b></code></a></dt>
Non&#45;recursively free all memory used by this PHPArray.
<dt><a name="void_mark()"
><b><code>void mark()</b></code></a></dt>
Recursively mark this PHPArray and all its contents as live.
<dt><a name="INTVAL_elements()"
><b><code>INTVAL elements()</b></code></a></dt>
Return the number of elements in this PHPArray.
<dt><a name="void_set_integer_keyed(PMC_*key,_INTVAL_i_val)"
><b><code>void set_integer_keyed(PMC *key, INTVAL i_val)</b></code></a></dt>
Store <code>i_val</code> in this PHPArray,
indexed by the Key PMC <code>key</code>.
<dt><a name="void_set_integer_keyed_str_(STRING_*s_key,_INTVAL_i_val)"
><b><code>void set_integer_keyed_str (STRING *s_key, INTVAL i_val)</b></code></a></dt>
Store <code>i_val</code> in this PHPArray,
indexed by the STRING <code>s_key</code>.
<dt><a name="void_set_integer_keyed_int_(INTVAL_i_key,_INTVAL_i_val)"
><b><code>void set_integer_keyed_int (INTVAL i_key, INTVAL i_val)</b></code></a></dt>
Store <code>i_val</code> in this PHPArray,
indexed by the INTVAL <code>i_key</code>.
<dt><a name="void_set_pmc_keyed(PMC_*key,_PMC_*p_val)"
><b><code>void set_pmc_keyed(PMC *key, PMC *p_val)</b></code></a></dt>
Store <code>val</code> in this PHPArray,
indexed by the Key PMC <code>key</code>.
<dt><a name="void_set_pmc_keyed_str(STRING_*s_key,_PMC_*val)"
><b><code>void set_pmc_keyed_str(STRING *s_key, PMC *val)</b></code></a></dt>
Store <code>val</code> in this PHPArray,
indexed by the STRING <code>s_key</code>.
<dt><a name="void_set_pmc_keyed_int(INTVAL_i_key,_PMC_*val)"
><b><code>void set_pmc_keyed_int(INTVAL i_key, PMC *val)</b></code></a></dt>
Store <code>val</code> in this PHPArray,
indexed by the INTVAL <code>i_key</code>.
<dt><a name="void_set_string_keyed(PMC_*key,_STRING_*s_val)"
><b><code>void set_string_keyed(PMC *key, STRING *s_val)</b></code></a></dt>
Store <code>s_val</code> in this PHPArray,
indexed by the Key PMC <code>key</code>.
<dt><a name="void_set_string_keyed_str(STRING_*s_key,_STRING_*s_val)"
><b><code>void set_string_keyed_str(STRING *s_key, STRING *s_val)</b></code></a></dt>
Store <code>s_val</code> in this PHPArray,
indexed by the STRING <code>s_key</code>.
<dt><a name="void_set_string_keyed_int(INTVAL_i_key,_STRING_*s_val)"
><b><code>void set_string_keyed_int(INTVAL i_key, STRING *s_val)</b></code></a></dt>
Store <code>s_val</code> in this PHPArray,
indexed by the INTVAL <code>i_key</code>.
<dt><a name="void_set_number_keyed(PMC_*key,_FLOATVAL_f_val)"
><b><code>void set_number_keyed(PMC *key, FLOATVAL f_val)</b></code></a></dt>
Store <code>f_val</code> in this PHPArray,
indexed by the Key PMC <code>key</code>.
<dt><a name="void_set_number_keyed_str(STRING_*s_key,_FLOATVAL_f_val)"
><b><code>void set_number_keyed_str(STRING *s_key, FLOATVAL f_val)</b></code></a></dt>
Store <code>f_val</code> in this PHPArray,
indexed by the STRING <code>s_key</code>.
<dt><a name="void_set_number_keyed_int(INTVAL_i_key,_FLOATVAL_f_val)"
><b><code>void set_number_keyed_int(INTVAL i_key, FLOATVAL f_val)</b></code></a></dt>
Store <code>f_val</code> in this PHPArray,
indexed by the INTVAL <code>i_key</code>.
<dt><a name="INTVAL_get_integer_keyed(PMC_*key)"
><b><code>INTVAL get_integer_keyed(PMC *key)</b></code></a></dt>
Retrieve the value from this PHPArray which is associated with the Key PMC <code>key</code>.
<dt><a name="INTVAL_get_integer_keyed_str(STRING_*s_key)"
><b><code>INTVAL get_integer_keyed_str(STRING *s_key)</b></code></a></dt>
Retrieve the value from this PHPArray which is associated with the STRING <code>s_key</code>.
<dt><a name="INTVAL_get_integer_keyed_int(INTVAL_i_key)"
><b><code>INTVAL get_integer_keyed_int(INTVAL i_key)</b></code></a></dt>
Retrieve the value from this PHPArray which is associated with the INTVAL <code>i_key</code>.
<dt><a name="PMC_*get_pmc_keyed(PMC_*key)"
><b><code>PMC *get_pmc_keyed(PMC *key)</b></code></a></dt>
Retrieve the value from this PHPArray which is associated with the Key PMC <code>key</code>.
<dt><a name="PMC_*get_pmc_keyed_str(STRING_*s_key)"
><b><code>PMC *get_pmc_keyed_str(STRING *s_key)</b></code></a></dt>
Retrieve the value from this PHPArray which is associated with the STRING <code>s_key</code>.
<dt><a name="PMC_*get_pmc_keyed_int(INTVAL_i_key)"
><b><code>PMC *get_pmc_keyed_int(INTVAL i_key)</b></code></a></dt>
Retrieve the value from this PHPArray which is associated with the INTVAL <code>i_key</code>.
<dt><a name="STRING_*get_string_keyed(PMC_*key)"
><b><code>STRING *get_string_keyed(PMC *key)</b></code></a></dt>
Retrieve the value from this PHPArray which is associated with the Key PMC <code>key</code>.
<dt><a name="STRING_*get_string_keyed_str(STRING_*s_key)"
><b><code>STRING *get_string_keyed_str(STRING *s_key)</b></code></a></dt>
Retrieve the value from this PHPArray which is associated with the STRING <code>s_key</code>.
<dt><a name="STRING_*get_string_keyed_int(INTVAL_i_key)"
><b><code>STRING *get_string_keyed_int(INTVAL i_key)</b></code></a></dt>
Retrieve the value from this PHPArray which is associated with the INTVAL <code>i_key</code>.
<dt><a name="FLOATVAL_get_number_keyed(PMC_*key)"
><b><code>FLOATVAL get_number_keyed(PMC *key)</b></code></a></dt>
Retrieve the value from this PHPArray which is associated with the Key PMC <code>key</code>.
<dt><a name="FLOATVAL_get_number_keyed_str(STRING_*s_key)"
><b><code>FLOATVAL get_number_keyed_str(STRING *s_key)</b></code></a></dt>
Retrieve the value from this PHPArray which is associated with the STRING <code>s_key</code>.
<dt><a name="FLOATVAL_get_number_keyed_int(INTVAL_i_key)"
><b><code>FLOATVAL get_number_keyed_int(INTVAL i_key)</b></code></a></dt>
Retrieve the value from this PHPArray which is associated with the INTVAL <code>i_key</code>.
<dt><a name="INTVAL_exists_keyed(PMC_*key)"
><b><code>INTVAL exists_keyed(PMC *key)</b></code></a></dt>
Return non&#45;zero if an element keyed by <code>key</code> exists.
<dt><a name="INTVAL_exists_keyed_str(STRING_*s_key)"
><b><code>INTVAL exists_keyed_str(STRING *s_key)</b></code></a></dt>
Return non&#45;zero if an element keyed by <code>s_key</code> exists.
<dt><a name="INTVAL_exists_keyed_int(INTVAL_i_key)"
><b><code>INTVAL exists_keyed_int(INTVAL i_key)</b></code></a></dt>
Return non&#45;zero if an element keyed by <code>i_key</code> exists.
<dt><a name="void_delete_keyed(PMC_*key)"
><b><code>void delete_keyed(PMC *key)</b></code></a></dt>
If an element in this PHPArray is keyed by <code>key</code>,
delete it.
Otherwise do nothing.
<dt><a name="void_delete_keyed_str(STRING_*s_key)"
><b><code>void delete_keyed_str(STRING *s_key)</b></code></a></dt>
If an element in this PHPArray is keyed by <code>key</code>,
delete it.
Otherwise do nothing.
<dt><a name="void_delete_keyed_int(INTVAL_i_key)"
><b><code>void delete_keyed_int(INTVAL i_key)</b></code></a></dt>
If an element in this PHPArray is keyed by <code>key</code>,
delete it.
Otherwise do nothing.
<dt><a name="void_push_integer(INTVAL_i)"
><b><code>void push_integer(INTVAL i)</b></code></a></dt>
Add an integer with the value <code>i</code> to the end of this PHPArray.
<dt><a name="void_push_pmc(PMC_*p_val)"
><b><code>void push_pmc(PMC *p_val)</b></code></a></dt>
Add a PMC with the value <code>p_val</code> to the end of this PHPArray.
<dt><a name="void_push_string(STRING_*s_val)"
><b><code>void push_string(STRING *s_val)</b></code></a></dt>
Add a STRING with the value <code>s_val</code> to the end of this PHPArray.
<dt><a name="void_push_float(FLOATVAL_f_val)"
><b><code>void push_float(FLOATVAL f_val)</b></code></a></dt>
Add a FLOATVAL with the value <code>f_val</code> to the end of this PHPArray.
<dt><a name="INTVAL_pop_integer()"
><b><code>INTVAL pop_integer()</b></code></a></dt>
Delete the element at the end of this PHPArray,
returning its value as an INTVAL.
<dt><a name="PMC*_pop_pmc()"
><b><code>PMC *pop_pmc()</b></code></a></dt>
Delete the element at the end of this PHPArray,
returning its value as a PMC.
<dt><a name="STRING*_pop_string()"
><b><code>STRING *pop_string()</b></code></a></dt>
Delete the element at the end of this PHPArray,
returning its value as a STRING.
<dt><a name="FLOATVAL_pop_float()"
><b><code>FLOATVAL pop_float()</b></code></a></dt>
Delete the element at the end of this PHPArray,
returning its value as a FLOATVAL.
<dt><a name="void_unshift_integer(INTVAL_i_val)"
><b><code>void unshift_integer(INTVAL i_val)</b></code></a></dt>
Add an integer with the value <code>i_val</code> to the beginning of this PHPArray.
<code>i_val</code> will be keyed by the INTVAL 0 and all other numerically indexed elements will be renumbered according to insertion order.
<dt><a name="void_unshift_pmc(PMC_*p_val)"
><b><code>void unshift_pmc(PMC *p_val)</b></code></a></dt>
Add a PMC with the value <code>p_val</code> to the beginning of this PHPArray.
<code>p_val</code> will be keyed by the INTVAL 0 and all other numerically indexed elements will be renumbered according to insertion order.
<dt><a name="void_unshift_string(STRING_*s_val)"
><b><code>void unshift_string(STRING *s_val)</b></code></a></dt>
Add a STRING with the value <code>s_val</code> to the beginning of this PHPArray.
<code>s_val</code> will be keyed by the INTVAL 0 and all other numerically indexed elements will be renumbered according to insertion order.
<dt><a name="void_unshift_float(FLOATVAL_f_val)"
><b><code>void unshift_float(FLOATVAL f_val)</b></code></a></dt>
Add a FLOATVAL with the value <code>f_val</code> to the beginning of this PHPArray.
<code>f_val</code> will be keyed by the INTVAL 0 and all other numerically indexed elements will be renumbered according to insertion order.
<dt><a name="INTVAL_shift_integer()"
><b><code>INTVAL shift_integer()</b></code></a></dt>
Delete the element at the beginning of this PHPArray,
returning its value as an INTVAL.
<dt><a name="PMC*_shift_pmc()"
><b><code>PMC *shift_pmc()</b></code></a></dt>
Delete the element at the beginning of this PHPArray,
returning its value as a PMC.
<dt><a name="STRING*_shift_string()"
><b><code>STRING *shift_string()</b></code></a></dt>
Delete the element at the beginning of this PHPArray,
returning its value as a STRING.
<dt><a name="FLOATVAL_shift_float()"
><b><code>FLOATVAL shift_float()</b></code></a></dt>
Delete the element at the beginning of this PHPArray,
returning its value as a FLOATVAL.
<dt><a name="STRING*_name()"
><b><code>STRING *name()</b></code></a></dt>
Return the string &#39;array&#39;.
<dt><a name="STRING*_get_string()"
><b><code>STRING *get_string()</b></code></a></dt>
Return the string &#39;Array&#39;.
<dt><a name="INTVAL_get_bool()"
><b><code>INTVAL get_bool()</b></code></a></dt>
Return 1 if this PHPArray has 1 or more elements.
<dt><a name="void_visit(visit_info_*info()"
><b><code>void visit(visit_info *info()</b></code></a></dt>
Freeze or thaw the contents of this PHPArray.
<dt><a name="void_freeze(visit_info_*info()"
><b><code>void freeze(visit_info *info()</b></code></a></dt>
After <code>visit()</code> has been called during the freeze process,
this VTABLE function is used to add additional information about the PHPArray to the visit_info struct.
<dt><a name="void_thaw(visit_info_*info()"
><b><code>void thaw(visit_info *info()</b></code></a></dt>
Before <code>visit()</code> is called during the thaw process,
this VTABLE function is used to initialize the empty PHPArray.
<dt><a name="void_thawfinish(visit_info_*info()"
><b><code>void thawfinish(visit_info *info()</b></code></a></dt>
After <code>visit()</code> is called during the thaw process,
this VTABLE function is used to make any changes to the newly thawed PHPArray which could not be made during the thaw process.
<dt><a name="PMC_*get_iter()"
><b><code>PMC *get_iter()</b></code></a></dt>
Return an Iterator over this PHPArray.
When using an Iterator over PHPArrays,
it is a very good idea to use the <code>iter</code> opcode as follows:
<pre> $P0 = new &#39;PhpArray&#39;
 $P1 = iter $P0</pre>
This ensures that the Iterator and the PHPArray&#39;s internal pointer stay in sync. Using an Iterator and a PHPArray any other way may lead to mysterious failures.
<dt><a name="PMC*_clone()"
><b><code>PMC *clone()</b></code></a></dt>
Return a deep clone of this PHPArray.
<dt><a name="void_assign_pmc(PMC_*src)"
><b><code>void assign_pmc(PMC *src)</b></code></a></dt>
If <code>src</code> is an aggregate PMC (i.e. one that does hash and/or array), use an Iterator to copy each key/value pair into this PHPArray. If <code>src</code> is a PHPArray, just make a clone.
<dt><a name="PMC*_add(PMC_*src,_PMC_*dest)"
><b><code>PMC *add(PMC *src, PMC *dest)</b></code></a></dt>
Copy all key/value pairs in <code>SELF</code> and <code>src</code> into <code>dest</code>. All values in <code>dest</code> are deleted. If the same key is in both <code>src</code> and <code>SELF</code>, the value from <code>SELF</code> will be used.
<dt><a name="PMC*_i_add(PMC_*src)"
><b><code>PMC *i_add(PMC *src)</b></code></a></dt>
Copy all key/value pairs from <code>src</code> into <code>SELF</code>. If the same key is in both <code>src</code> and <code>SELF</code>, the value from <code>SELF</code> will be used.
<dt><a name="INTVAL_is_equal(PMC_*other)"
><b><code>INTVAL is_equal(PMC *other)</b></code></a></dt>
Return true if <code>SELF</code> and <code>other</code> contain the same key/value pairs and have the same number of elements. Order is not important.
<dt><a name="INTVAL_is_equal_num(PMC_*other)"
><b><code>INTVAL is_equal_num(PMC *other)</b></code></a></dt>
Determine equality between a PHPArray and a number. PHP&#39;s documentation says that an array is always greater than a number, so this function returns 0. See <a href="http://us.php.net/manual/en/language.operators.comparison.php">http://us.php.net/manual/en/language.operators.comparison.php</a> .
<dt><a name="INTVAL_is_equal_string(PMC_*other)"
><b><code>INTVAL is_equal_string(PMC *other)</b></code></a></dt>
Determine equality between a PHPArray and a string. PHP&#39;s documentation says that an array is always greater than a string, so this function returns 0. See <a href="http://us.php.net/manual/en/language.operators.comparison.php">http://us.php.net/manual/en/language.operators.comparison.php</a> .
<dt><a name="INTVAL_is_same(PMC_*other)"
><b><code>INTVAL is_same(PMC *other)</b></code></a></dt>
Return true if <code>SELF</code> and <code>other</code> point to the same place in memory.
<dt><a name="INTVAL_cmp(PMC_*other)"
><b><code>INTVAL cmp(PMC *other)</b></code></a></dt>
Compare <code>SELF</code> to <code>other</code>. A PHPArray with fewer elements is always considered to be less than one with more elements. Two PHPArrays of the same size are comparable if they have the same keys. In this case, <code>a</code> &#62; <code>b</code> if the first unequal value of <code>a</code> is greater, according to the internal ordering of <code>a</code>. This means it&#39;s possible for both <code>a</code> &#62; <code>b</code> and <code>b</code> &#62; <code>a</code> to be true.If the arrays are comparable and <code>SELF</code> is larger, cmp returns 1. If they&#39;re equal, cmp returns 0. If <code>other</code> is larger, cmp returns &#45;1.If <code>SELF</code> and the other PMC are not comparable, an exception is thrown. This is to allow the PHP implementation to return null for a comparison between two non&#45;comparable PHPArrays.
<dt><a name="INTVAL_cmp_num(PMC_*other)"
><b><code>INTVAL cmp_num(PMC *other)</b></code></a></dt>
In PHP, arrays are always greater than numeric types. This function always returns 1.
<dt><a name="INTVAL_cmp_string(PMC_*other)"
><b><code>INTVAL cmp_string(PMC *other)</b></code></a></dt>
In PHP, arrays are always greater than strings. This function always returns 1.
<dt><a name="STRING_*get_repr()"
><b><code>STRING *get_repr()</b></code></a></dt>
Return a string representation of the contents of this PhpArray. The format of this string is the same as a Parrot Hash&#39;s <code>get_repr()</code>:
<pre> {0: 4, 4: 323, &#39;foo&#39;: 9999999}</pre>
</dl>

<h2><a name="Methods"
>Methods <a href='#_top'><img alt='^' border=0 src='../../../../../resources/up.gif'></a></a></h2>

<dl>
<dt><a name="METHOD_void_next()"
><b><code>METHOD void next()</b></code></a></dt>
Advance the internal pointer to the next element. This method emulates the behavior of PHP&#39;s <code>next()</code> function.
<dt><a name="METHOD_void_prev()"
><b><code>METHOD void prev()</b></code></a></dt>
Move the internal pointer to the previous element. This method emulates the behavior of PHP&#39;s <code>prev()</code> function.
<dt><a name="METHOD_void_reset()"
><b><code>METHOD void reset()</b></code></a></dt>
Move the internal pointer to the first element of this PhpArray, according to insertion order. This method emulates the behavior of PHP&#39;s <code>reset()</code> function.
<dt><a name="METHOD_void_end()"
><b><code>METHOD void end()</b></code></a></dt>
Move the internal pointer to the last element of this PhpArray, according to insertion order. This method emulates the behavior of PHP&#39;s <code>end()</code> function.
<dt><a name="METHOD_STRING*_key()"
><b><code>METHOD STRING *key()</b></code></a></dt>
Return the key of the element pointed to by the internal pointer. If the internal pointer does not point at a valid element, the empty string is returned. This method has no side&#45;effects and does not modify the internal pointer.
<dt><a name="METHOD_PMC*_current()"
><b><code>METHOD PMC *current()</b></code></a></dt>
Return a clone of value of the element pointed to by the internal pointer. If the internal pointer does not point at a valid element, PMCNULL is returned. This method has no side&#45;effects and does not modify the internal pointer.
<dt><a name="METHOD_PMC*_each()"
><b><code>METHOD PMC *each()</b></code></a></dt>
Return a PhpArray containing the key/value pair pointed to by the internal pointer, then advance the internal pointer to the next pair. The returned PhpArray has the following key/value pairs, in this order:
<ul>
<li>1 =&#62; value</li>

<li>&#34;value&#34; =&#62; value</li>

<li>0 =&#62; key</li>

<li>&#34;key&#34; =&#62; key</li>
</ul>
where <code>key</code> and <code>value</code> are the key and value from this PhpArray. If the internal pointer does not point to a valid element, a PhpBoolean <code>false</code> will be returned.
<dt><a name="PMC*_to_number()"
><b><code>PMC *to_number()</b></code></a></dt>

<dt><a name="METHOD_void_sanity_check()"
><b><code>METHOD void sanity_check()</b></code></a></dt>
Check if everything about the PippHashTable looks sane. If anything looks broken, the code will throw an exception.</dl>

<h1><a name="AUTHORS"
>AUTHORS <a href='#_top'><img alt='^' border=0 src='../../../../../resources/up.gif'></a></a></h1>

<dl>
<dt><a name="Christoph_Otto"
>Christoph Otto</a></dt>

<dt><a name="Francois_Perrad"
>Francois Perrad</a></dt>
</dl>
        </DIV>
        <P>
        <TABLE BORDER="0" WIDTH="730" CELLSPACING="0" CELLPADDING="0">
            <TR ALIGN="RIGHT">
                <TD WIDTH="590" VALIGN="MIDDLE">
                    <BR>
                    <DIV CLASS="FOOTER">
                        <DIV ALIGN="LEFT">
                        </DIV>
                    </DIV>
                </TD>
                <TD VALIGN="middle" ALIGN="center">
                    <IMG BORDER=0
                        SRC="../../../../../resources/parrot_small.png"
                        ALT="parrot">
                </TD>
            </TR>
        </TABLE>
    </BODY>
</HTML>
