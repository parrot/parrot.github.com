<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
    "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
    <HEAD>
        <TITLE>Untitled</TITLE>
        <LINK REL="stylesheet" TYPE="text/css"
            HREF="../../../../resources/perl.css"
            TITLE="Default CSS2" media="screen">
    </HEAD>
    <BODY>
        <A NAME="_top"></A>
        <TABLE CELLSPACING="0" WIDTH="730">
            <TR>
                <TD WIDTH="100%" COLSPAN="2" CLASS="BANNER">parrotcode: <SPAN CLASS="title">Untitled</SPAN></TD>
            </TR>
            <TR>
                <TD WIDTH="100%" COLSPAN="2"  ID="NAV" STYLE="border-bottom: 1px solid #191970;">
                    <a href="../../../../html/index.html">Contents</a> | <a href="../../../../html/compilers.html">Compilers</a>
                </TD>
            </TR>
        </TABLE>
        <DIV CLASS="pod">

<h1><a name="DESCRIPTION"
>DESCRIPTION <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<p>This file contains functions related to opcodes.</p>

<h1><a name="FUNCTIONS"
>FUNCTIONS <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<dl>
<dt><a name="static_int_get_signature_length(expression_*_const_e)"
><b><code>static int get_signature_length(expression *const e)</b></code></a></dt>
Calculate the length of the signature for one operand; an operand is separated from the instruction name or another operand through &#39;_&#39;,
which must also be counted.
<pre> set $I0, 42  &#45;&#45;&#62; set_i_ic</pre>
therefore, for $I0 (a target), return 1 for the type, 1 for the &#39;_&#39;, and whatever is needed for a key, if any, as in this example:
<pre> set $P0[1] = &#34;hi&#34;  &#45;&#45;&#62; set_p_kic_sc</pre>
$P0 is a target, resulting in &#34;_p&#34;, the key [1] is a key (&#39;k&#39;) of type int (&#39;i&#39;), and it&#39;s a constant (&#39;c&#39;). Add 1 for the &#39;_&#39;.
<dt><a name="static_char_*_write_signature(expression_*_const_iter,_char_*instr_writer)"
><b><code>static char *write_signature(expression *const iter, char *instr_writer)</b></code></a></dt>
Write the signature for the operand <code>iter</code>, using the character pointer <code>instr_writer</code>. When the operand is an indexed target node (in other words, it has a key node), this function is invoked recursively passing the key as an argument.This function returns the updated character pointer (due to pass&#45;by&#45;value semantics of the C calling conventions).
<dt><a name="static_char_*_get_signatured_opname(instruction_*_const_instr)"
><b><code>static char *get_signatured_opname(instruction *const instr)</b></code></a></dt>
Returns the full opname of the instruction <code>name</code>; the signature of the opname is based on the operands, some examples are shown below:
<pre> set I0, 10        &#45;&#45;&#62; set_i_ic
 print &#34;hi&#34;        &#45;&#45;&#62; print_sc
 set P0[1], 3.14   &#45;&#45;&#62; set_p_kic_nc</pre>
For each operand, an underscore is added; then for the types int, num, string or pmc, an &#39;i&#39;, &#39;n&#39;, &#39;s&#39; or &#39;p&#39; is added respectively. If the operand is a constant, a &#39;c&#39; suffic is added.If the operand is a key of something, a &#39;k&#39; prefix is added.
<dt><a name="int_get_opinfo(lexer_state_*_const_lexer)"
><b><code>int get_opinfo(lexer_state *const lexer)</b></code></a></dt>
Compute the signatured opname from the instruction name and its arguments. Based on this signature, the opcode is retrieved. If the opcode cannot be found (i.e., it&#39;s &#45;1), then a check is done for some special math ops; <code>add_i_ic_ic</code> and the like do not exist, but instead should be replaced by <code>set_i_ic</code> (and the like). If it&#39;s not one of these special cases, then that means the op is not valid, and an error message will be reported.</dl>
        </DIV>
        <P>
        <TABLE BORDER="0" WIDTH="730" CELLSPACING="0" CELLPADDING="0">
            <TR ALIGN="RIGHT">
                <TD WIDTH="590" VALIGN="MIDDLE">
                    <BR>
                    <DIV CLASS="FOOTER">
                        <DIV ALIGN="LEFT">
                        </DIV>
                    </DIV>
                </TD>
                <TD VALIGN="middle" ALIGN="center">
                    <IMG BORDER=0
                        SRC="../../../../resources/parrot_small.png"
                        ALT="parrot">
                </TD>
            </TR>
        </TABLE>
    </BODY>
</HTML>
