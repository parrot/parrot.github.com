<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
    "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
    <HEAD>
        <TITLE>OO interface to libpq</TITLE>
        <LINK REL="stylesheet" TYPE="text/css"
            HREF="../../../../resources/perl.css"
            TITLE="Default CSS2" media="screen">
    </HEAD>
    <BODY>
        <A NAME="_top"></A>
        <TABLE CELLSPACING="0" WIDTH="730">
            <TR>
                <TD WIDTH="100%" COLSPAN="2" CLASS="BANNER">parrotcode: <SPAN CLASS="title">OO interface to libpq</SPAN></TD>
            </TR>
            <TR>
                <TD WIDTH="100%" COLSPAN="2"  ID="NAV" STYLE="border-bottom: 1px solid #191970;">
                    <a href="../../../../html/index.html">Contents</a> | <a href="../../../../html/libs.html">Libraries</a>
                </TD>
            </TR>
        </TABLE>
        <DIV CLASS="pod">

<h1><a name="NAME"
>NAME <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<p>Pg.pir &#45; OO interface to libpq</p>

<h1><a name="SYNOPSIS"
>SYNOPSIS <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<pre>  .local pmc pg, con, res
  pg = get_class &#39;Pg&#39;
  con = pg.&#39;connectdb&#39;(&#39;dbname = db&#39;)
  res = con.&#39;exec&#39;(&#39;SELECT * from tab&#39;)
  n = res.&#39;ntuples&#39;()
  m = res.&#39;nfields&#39;()
  ...
  val = res.&#39;getvalue&#39;(i, j)</pre>

<h1><a name="ABSTRACT"
>ABSTRACT <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<p>The Pg library provides an OO interface to libpq functions &#45; the C interface to PostgreSQL.</p>

<p>See &#34;Chapter 28. libpq &#45; C Library&#34; for details or the tests in <em><a href="../../../t/library/pg.t.html">t/library/pg.t</a></em>.</p>

<h1><a name="AUTHOR"
>AUTHOR <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<p>Leopold &#34;leo&#34; Toetsch &#60;lt(at)toetsch.at&#62;</p>

<h1><a name="DESCRIPTION"
>DESCRIPTION <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<p>Pg.pir is a thin wrapper around <em>postgres.pir</em> &#45; the NCI functions of the <code>libpq</code> library. It&#39;s roughly divided into 3 parts, represented by &#39;Pg&#39;, &#39;Pg;Conn&#39;, and &#39;Pg;Result&#39; classes.</p>

<h2><a name="Connection_Construction"
>Connection Construction <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h2>

<dl>
<dt><a name="con_=_Pg::connectdb(&#39;var=val_var=val_...&#39;)"
>con = Pg::connectdb(&#39;var=val var=val ...&#39;)</a></dt>
A class method that returns a new connection object.</dl>

<h2><a name="Connection_Methods"
>Connection Methods <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h2>

<dl>
<dt><a name="__init(con)"
>__init(con)</a></dt>
Object initializer. Takes a <code>PGconn</code> structure.
<dt><a name="c_=_res.&#39;PGconn&#39;()"
>c = res.&#39;PGconn&#39;()</a></dt>
Return the raw PGconn structure. You probably don&#39;t need this function except for calling PQ* code directly.
<dt><a name="$I0_=_con.&#39;status&#39;()"
>$I0 = con.&#39;status&#39;()</a></dt>
Return the connection status.
<dt><a name="con.&#39;finish&#39;()"
>con.&#39;finish&#39;()</a></dt>
Finish the connection. The connection attribute is set to .undef thereafter and inaccessible then.
<dt><a name="res_=_con.&#39;exec&#39;(str)"
>res = con.&#39;exec&#39;(str)</a></dt>
Execute the SQL command and return a Pg;Result object.
<dt><a name="res_=_con.&#39;execParams&#39;(str,_val,_...)"
>res = con.&#39;execParams&#39;(str, val, ...)</a></dt>
Execute the SQL command and return a Pg;Result object. All values are considered being text &#45; there&#39;s no provision to use binary data.
<dt><a name="res_=_con.&#39;prepare&#39;(name,_query,_nparams)"
>res = con.&#39;prepare&#39;(name, query, nparams)</a></dt>
Prepare a query for execution with <b>execPrepared</b>
<dt><a name="res_=_con.&#39;execPrepared&#39;(name,_val,_...)"
>res = con.&#39;execPrepared&#39;(name, val, ...)</a></dt>
Execute a prepared query.
<dt><a name="$P0_=_con.&#39;setNoticeReceiver&#39;(cb,_arg)"
>$P0 = con.&#39;setNoticeReceiver&#39;(cb, arg)</a></dt>
Install a notice receiver callback. The callback will be called as
<pre>  .sub &#39;notice&#39;
    .param pmc arg
    .param pmc res</pre>
</dl>

<h2><a name="Result_Methods"
>Result Methods <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h2>

<dl>
<dt><a name="__finalize()"
>__finalize()</a></dt>
Object finalizer. Calls self.&#39;clear&#39;().
<dt><a name="r_=_res.&#39;PGresult&#39;()"
>r = res.&#39;PGresult&#39;()</a></dt>
Return the raw PGresult structure. You probably don&#39;t need this function except for calling PQ* code directly.
<dt><a name="$I0_=_res.&#39;resultStatus&#39;()"
>$I0 = res.&#39;resultStatus&#39;()</a></dt>
Return the status of the result.
<dt><a name="res.&#39;clear&#39;()"
>res.&#39;clear&#39;()</a></dt>
Clear the result structure. You don&#39;t have to explicitely call this method. If a result object is no longer alive, the GC will call __finalize(), which wil clear the object.
<dt><a name="$I0_=_res.&#39;ntuples&#39;()"
>$I0 = res.&#39;ntuples&#39;()</a></dt>
Return the amount of tuples in the result.
<dt><a name="$I0_=_res.&#39;nfields&#39;()"
>$I0 = res.&#39;nfields&#39;()</a></dt>
Return the amount of fields in the result.
<dt><a name="$S0_=_res.&#39;fname&#39;(c)"
>$S0 = res.&#39;fname&#39;(c)</a></dt>
Return the name of the c&#45;th field in the result.
<dt><a name="$I0_=_res.&#39;fnumber&#39;(col_name)"
>$I0 = res.&#39;fnumber&#39;(col_name)</a></dt>
Return the number of the field or &#45;1.
<dt><a name="v_=_res.&#39;getvalue&#39;(r,_c)"
>v = res.&#39;getvalue&#39;(r, c)</a></dt>
Return result value from row r and column c.
<dt><a name="$I0_=_res.&#39;getisnull&#39;(r,_c)"
>$I0 = res.&#39;getisnull&#39;(r, c)</a></dt>
Return true if the result value at (r,c) is NULL.</dl>
        </DIV>
        <P>
        <TABLE BORDER="0" WIDTH="730" CELLSPACING="0" CELLPADDING="0">
            <TR ALIGN="RIGHT">
                <TD WIDTH="590" VALIGN="MIDDLE">
                    <BR>
                    <DIV CLASS="FOOTER">
                        <DIV ALIGN="LEFT">
                        </DIV>
                    </DIV>
                </TD>
                <TD VALIGN="middle" ALIGN="center">
                    <IMG BORDER=0
                        SRC="../../../../resources/parrot_small.png"
                        ALT="parrot">
                </TD>
            </TR>
        </TABLE>
    </BODY>
</HTML>
