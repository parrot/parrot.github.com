<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Parrot  - Generate Perl module from operation definitions</title>
        <link rel="stylesheet" type="text/css"
            href="../../../resources/parrot.css"
            media="all">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    </head>
    <body>
        <div id="wrapper">
            <div id="header">

                <a href="http://www.parrot.org">
                <img border=0 src="../../../resources/parrot_logo.png" id="logo" alt="parrot">
                </a>
            </div> <!-- "header" -->
            <div id="divider"></div>
            <div id="mainbody">
                <div id="breadcrumb">
                    <a href="../../../html/index.html">Home</a> &raquo; <a href="../../../html/tools.html">Tools</a> &raquo; Generate Perl module from operation definitions
                </div>

<h1><a name="NAME"
>NAME</a></h1>

<p>tools/build/ops2pm.pl &#45; Generate Perl module from operation definitions</p>

<h1><a name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre> $ perl tools/build/ops2pm.pl [&#45;&#45;help] [&#45;&#45;no&#45;lines] input.ops [input2.ops ...]
 $ perl tools/build/ops2pm.pl [&#45;&#45;renum]  input.ops [input2.ops ...]</pre>

<h1><a name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>Reads the ops files listed on the command line and outputs a <em>Parrot::OpLib::core</em> module containing information about the ops. Also outputs <em>include/parrot/oplib/ops.h</em>. This program is called by Parrot&#39;s <em>make</em>.</p>

<p>If called with the <code>&#45;&#45;renum</code> flag, renumbers the file <em>src/ops/ops.num</em>. This is mandatory when adding or removing opcodes.</p>

<h1><a name="OPTIONS"
>OPTIONS</a></h1>

<dl>
<dt><a name="&#45;&#45;help"
><b><code>&#45;&#45;help</b></code></a></dt>
Print synopsis.
<dt><a name="&#45;&#45;no&#45;lines"
><b><code>&#45;&#45;no&#45;lines</b></code></a></dt>
Do not generate <code>#line</code> directives in the generated C code.
<dt><a name="&#45;&#45;renum"
><b><code>&#45;&#45;renum</b></code></a></dt>
Renumber opcodes according to existing ops in ops/num and natural order in the given ops files. See also <em>tools/dev/ops_renum.mak</em>.</dl>

<p>Most of the functionality in this program is now held in Parrot::Ops2pm::Util methods and a small number of Parrot::Ops2pm::Auxiliary subroutines. See those modules&#39; documentation for discussion of those functions. Revisions to the functionality should be made in those packages and tested against tests found in <em>t/tools/ops2pm/</em>.</p>

<h1><a name="WARNING"
>WARNING</a></h1>

<p>Generating a <code>Parrot::OpLib::core</code> module for a set of ops files that you do not later turn into C code (see <em><a href="ops2c.pl.html">tools/build/ops2c.pl</a></em>) with the same op content and order is a recipe for disaster. But as long as you just run these tools in the standard build process via <code>make</code> there shouldn&#39;t be a problem.</p>

<h1><a name="TODO"
>TODO</a></h1>

<p>The original design of the ops processing code was intended to be a read&#45;only representation of what was in a particular ops file. It was not originally intended that it was a mechanism for building a bigger virtual ops file from multiple physical ops files.</p>

<p>This code does half of that job (the other half is getting them to compile together instead of separately in a <em>*_ops.c</em> file).</p>

<p>You can see evidence of this by the way this code reaches in to the internal <code>OPS</code> hash key to do its concatenation, and the way it twiddles each op&#39;s <code>CODE</code> hash key after that.</p>

<p>If the op and oplib Perl modules are going to be used for modifying information read from ops files in addition to reading it, they should be changed to make the above operations explicitly supported.</p>

<p>Otherwise, the Parrot build and interpreter start&#45;up logic should be modified so that it doesn&#39;t need to concatenate separate ops files.</p>

<h1><a name="SEE_ALSO"
>SEE ALSO</a></h1>

<dl>
<dt><a name="tools/build/ops2c.pl."
><em><a href="ops2c.pl.html">tools/build/ops2c.pl</a></em>.</a></dt>

<dt><a name="lib/Parrot/Ops2pm.pm."
><em><a href="../../lib/Parrot/Ops2pm.pm.html">lib/Parrot/Ops2pm.pm</a></em>.</a></dt>

<dt><a name="lib/Parrot/Ops2pm/Auxiliary.pm."
><em><a href="../../lib/Parrot/Ops2pm/Auxiliary.pm.html">lib/Parrot/Ops2pm/Auxiliary.pm</a></em>.</a></dt>

<dt><a name="tools/dev/ops_renum.mak."
><em>tools/dev/ops_renum.mak</em>.</a></dt>
</dl>

<h1><a name="AUTHOR"
>AUTHOR</a></h1>

<p>Over the years, <em><a href="ops2pm.pl.html">tools/build/ops2pm.pl</a></em> has been worked on by the following Parrot hackers:</p>

<pre>  bernhard
  brentdax
  chip
  chromatic
  coke
  dan
  gregor
  jkeenan
  leo
  mikescott
  particle
  paultcochrane
  petdance
  robert
  simon
  tewk</pre>

<p>Others who provided code cited in the version control logs include:</p>

<pre>  Andy Dougherty
  Jeff Gof
  Steve Fink</pre>
            </div> <!-- "mainbody" -->
            <div id="divider"></div>
            <div id="footer">
	        Copyright &copy; 2002-2009, Parrot Foundation.
            </div>
        </div> <!-- "wrapper" -->
    </body>
</html>
