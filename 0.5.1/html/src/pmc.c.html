<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
    "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>  
    <HEAD>
        <TITLE>The base vtable calling functions</TITLE>
        <LINK REL="stylesheet" TYPE="text/css" 
            HREF="../../resources/perl.css" 
            TITLE="Default CSS2" media="screen">
    </HEAD>
    <BODY> 
        <A NAME="_top"></A>
        <TABLE CELLSPACING="0" WIDTH="730">
            <TR>
                <TD WIDTH="100%" COLSPAN="2" CLASS="BANNER">parrotcode: <SPAN CLASS="title">The base vtable calling functions</SPAN></TD>
            </TR>
            <TR>
                <TD WIDTH="100%" COLSPAN="2"  ID="NAV" STYLE="border-bottom: 1px solid #191970;">
                    <a href="../../html/index.html">Contents</a> | <a href="../../html/c.html">C</a>
                </TD>
            </TR>
        </TABLE>
        <DIV CLASS="pod">

<h1><a name="NAME"
>NAME <a href='#_top'><img alt='^' border=0 src='../../resources/up.gif'></a></a></h1>

<p>src/pmc.c &#45; The base vtable calling functions</p>

<h1><a name="DESCRIPTION"
>DESCRIPTION <a href='#_top'><img alt='^' border=0 src='../../resources/up.gif'></a></a></h1>

<h2><a name="Functions"
>Functions <a href='#_top'><img alt='^' border=0 src='../../resources/up.gif'></a></a></h2>

<dl>
<dt><a
><b><code lang='und' xml:lang='und'>PARROT_API PARROT_CANNOT_RETURN_NULL PARROT_MALLOC PMC *pmc_new(PARROT_INTERP, INTVAL base_type)</b></code></a></dt><p class="pad"></p>

<dd>Creates a new PMC of type <code lang='und' xml:lang='und'>base_type</code> (which is an index into the list of PMC types declared in <code lang='und' xml:lang='und'>vtables</code> in <em lang='und' xml:lang='und'>include/parrot/pmc.h</em>).
Once the PMC has been successfully created and its vtable pointer initialized,
we call its <code lang='und' xml:lang='und'>init</code> method to perform any other necessary initialization.</dd><p class="pad"></p>

<dt><a
><b><code lang='und' xml:lang='und'>PARROT_API PARROT_CANNOT_RETURN_NULL PMC *pmc_reuse(PARROT_INTERP, NOTNULL(PMC *pmc), INTVAL new_type, SHIM(UINTVAL flags))</b></code></a></dt><p class="pad"></p>

<dd>Reuse an existing PMC,
turning it into an empty PMC of the new type.
Any required internal structure will be put in place (such as the extension area) and the PMC will be ready to go.
This will throw an exception if the PMC is constant or of a singleton type (such as the environment PMC) or is being turned into a PMC of a singleton type.</dd><p class="pad"></p>

<dt><a
><b><code lang='und' xml:lang='und'>PARROT_WARN_UNUSED_RESULT PARROT_CANNOT_RETURN_NULL static PMC *get_new_pmc_header(PARROT_INTERP, INTVAL base_type, UINTVAL flags)</b></code></a></dt><p class="pad"></p>

<dd>Gets a new PMC header.</dd><p class="pad"></p>

<dt><a name="PARROT_API_PARROT_CANNOT_RETURN_NULL_PMC_*_pmc_new_noinit(PARROT_INTERP,_INTVAL_base_type)"
><b><code lang='und' xml:lang='und'>PARROT_API PARROT_CANNOT_RETURN_NULL PMC *pmc_new_noinit(PARROT_INTERP, INTVAL base_type)</b></code></a></dt><p class="pad"></p>

<dd>Creates a new PMC of type <code lang='und' xml:lang='und'>base_type</code> (which is an index into the list of PMC types declared in <code lang='und' xml:lang='und'>vtables</code> in <em lang='und' xml:lang='und'>include/parrot/pmc.h</em>).
Unlike <code lang='und' xml:lang='und'>pmc_new()</code>,
<code lang='und' xml:lang='und'>pmc_new_noinit()</code> does not call its <code lang='und' xml:lang='und'>init</code> method.
This allows separate allocation and initialization for continuations.</dd><p class="pad"></p>

<dt><a
><b><code lang='und' xml:lang='und'>PARROT_API PARROT_CANNOT_RETURN_NULL PMC *constant_pmc_new_noinit(PARROT_INTERP, INTVAL base_type)</b></code></a></dt><p class="pad"></p>

<dd>Creates a new constant PMC of type <code lang='und' xml:lang='und'>base_type</code>.</dd><p class="pad"></p>

<dt><a
><b><code lang='und' xml:lang='und'>PARROT_API PARROT_CANNOT_RETURN_NULL PMC *constant_pmc_new(PARROT_INTERP, INTVAL base_type)</b></code></a></dt><p class="pad"></p>

<dd>Creates a new constant PMC of type <code lang='und' xml:lang='und'>base_type</code>,
the call <code lang='und' xml:lang='und'>init</code>.</dd><p class="pad"></p>

<dt><a
><b><code lang='und' xml:lang='und'>PARROT_API PARROT_CANNOT_RETURN_NULL PMC *pmc_new_init(PARROT_INTERP, INTVAL base_type, NULLOK(PMC *init))</b></code></a></dt><p class="pad"></p>

<dd>As <code lang='und' xml:lang='und'>pmc_new()</code>,
but passes <code lang='und' xml:lang='und'>init</code> to the PMC&#39;s <code lang='und' xml:lang='und'>init_pmc()</code> method.</dd><p class="pad"></p>

<dt><a
><b><code lang='und' xml:lang='und'>PARROT_API PARROT_CANNOT_RETURN_NULL PMC *constant_pmc_new_init(PARROT_INTERP, INTVAL base_type, NULLOK(PMC *init))</b></code></a></dt><p class="pad"></p>

<dd>As <code lang='und' xml:lang='und'>constant_pmc_new</code>,
but passes <code lang='und' xml:lang='und'>init</code> to the PMC&#39;s <code lang='und' xml:lang='und'>init_pmc</code> method.</dd><p class="pad"></p>

<dt><a name="PARROT_API_INTVAL_pmc_register(PARROT_INTERP,_NOTNULL(STRING_*name))"
><b><code lang='und' xml:lang='und'>PARROT_API INTVAL pmc_register(PARROT_INTERP, NOTNULL(STRING *name))</b></code></a></dt><p class="pad"></p>

<dd>This segment handles PMC registration and such.</dd><p class="pad"></p>

<dt><a name="PARROT_API_PARROT_WARN_UNUSED_RESULT_INTVAL_pmc_type(PARROT_INTERP,_NOTNULL(STRING_*name))"
><b><code lang='und' xml:lang='und'>PARROT_API PARROT_WARN_UNUSED_RESULT INTVAL pmc_type(PARROT_INTERP, NOTNULL(STRING *name))</b></code></a></dt><p class="pad"></p>

<dd>Returns the PMC type for <code lang='und' xml:lang='und'>name</code>.</dd><p class="pad"></p>

<dt><a name="PARROT_API_INTVAL_pmc_type_p(PARROT_INTERP,_NOTNULL(PMC_*name))"
><b><code lang='und' xml:lang='und'>PARROT_API INTVAL pmc_type_p(PARROT_INTERP, NOTNULL(PMC *name))</b></code></a></dt><p class="pad"></p>

<dd>Returns the PMC type for <code lang='und' xml:lang='und'>name</code>.</dd><p class="pad"></p>

<dt><a
><b><code lang='und' xml:lang='und'>PARROT_WARN_UNUSED_RESULT PARROT_CANNOT_RETURN_NULL static PMC *create_class_pmc(PARROT_INTERP, INTVAL type)</b></code></a></dt><p class="pad"></p>

<dd>RT#48260: Not yet documented!!!</dd><p class="pad"></p>

<dt><a name="PARROT_API_void_Parrot_create_mro(PARROT_INTERP,_INTVAL_type)"
><b><code lang='und' xml:lang='und'>PARROT_API void Parrot_create_mro(PARROT_INTERP, INTVAL type)</b></code></a></dt><p class="pad"></p>

<dd>Create the MRO (method resolution order) array for this type.</dd><p class="pad"></p>
</dl>

<h2><a name="DOD_registry_interface"
>DOD registry interface <a href='#_top'><img alt='^' border=0 src='../../resources/up.gif'></a></a></h2>

<dl>
<dt><a name="PARROT_API_void_dod_register_pmc(PARROT_INTERP,_NOTNULL(PMC*_pmc))"
><b><code lang='und' xml:lang='und'>PARROT_API void dod_register_pmc(PARROT_INTERP, NOTNULL(PMC *pmc))</b></code></a></dt><p class="pad"></p>

<dd>Registers the PMC with the interpreter&#39;s DOD registery.</dd><p class="pad"></p>

<dt><a name="void_dod_unregister_pmc(PARROT_INTERP,_NOTNULL(PMC*_pmc))"
><b><code lang='und' xml:lang='und'>void dod_unregister_pmc(PARROT_INTERP, NOTNULL(PMC *pmc))</b></code></a></dt><p class="pad"></p>

<dd>Unregisters the PMC from the interpreter&#39;s DOD registry.</dd><p class="pad"></p>
</dl>

<h1><a name="SEE_ALSO"
>SEE ALSO <a href='#_top'><img alt='^' border=0 src='../../resources/up.gif'></a></a></h1>

<p><em lang='und' xml:lang='und'>include/parrot/vtable.h</em>.</p>

<p><code lang='und' xml:lang='und'>5.1.0.14.2.20011008152120.02158148@pop.sidhe.org</code> (<a href="http://www.nntp.perl.org/group/perl.perl6.internals/5516">http://www.nntp.perl.org/group/perl.perl6.internals/5516</a>).</p>

<h1><a name="HISTORY"
>HISTORY <a href='#_top'><img alt='^' border=0 src='../../resources/up.gif'></a></a></h1>

<p>Initial version by Simon on 2001.10.20.</p>
        </DIV>
        <P>
        <TABLE BORDER="0" WIDTH="730" CELLSPACING="0" CELLPADDING="0">
            <TR ALIGN="RIGHT">
                <TD WIDTH="590" VALIGN="MIDDLE">
                    <BR>
                    <DIV CLASS="FOOTER">
                        <DIV ALIGN="LEFT">
                        </DIV>
                    </DIV>
                </TD>
                <TD VALIGN="middle" ALIGN="center">
                    <IMG BORDER=0
                        SRC="../../resources/parrot_small.png" 
                        ALT="parrot">
                </TD>
            </TR>
        </TABLE>
    </BODY>
</HTML>
