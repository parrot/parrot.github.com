<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
    "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>  
    <HEAD>
        <TITLE>Untitled</TITLE>
        <LINK REL="stylesheet" TYPE="text/css" 
            HREF="../../../../resources/perl.css" 
            TITLE="Default CSS2" media="screen">
    </HEAD>
    <BODY> 
        <A NAME="_top"></A>
        <TABLE CELLSPACING="0" WIDTH="730">
            <TR>
                <TD WIDTH="100%" COLSPAN="2" CLASS="BANNER">parrotcode: <SPAN CLASS="title">Untitled</SPAN></TD>
            </TR>
            <TR>
                <TD WIDTH="100%" COLSPAN="2"  ID="NAV" STYLE="border-bottom: 1px solid #191970;">
                    <a href="../../../../html/index.html">Contents</a> | <a href="../../../../html/languages.html">Language Implementations</a> | <a href="../../../../html/perl5.html">Perl5</a>
                </TD>
            </TR>
        </TABLE>
        <DIV CLASS="pod">

<h1><a name="Perl_Array_PMC"
>Perl Array PMC <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<h2><a name="Synopsis"
>Synopsis <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h2>

<pre lang='und' xml:lang='und'>  new P0, .PerlArray   # PMC creation

  set P0, 5            # set array size
  set I1, P0           # get array size

  set P0[4], &#34;foo&#34;     # set array position 4
  set P0[&#45;1], &#34;gah!&#34;   # set last array element

  push P0, 3           # add 3 to the end of the array
  pop  N0, P0          # remove last element of the array

  shift P0, 2          # add 2 in the beginning of the array
  unshift I0, P0       # remove first element of the array

  defined I0, P0[1]    # check if element is defined
  exists I0, P0[4]     # check if element exists

  clone P1, P0         # copy/clone PMC</pre>

<h2><a name="Creation"
>Creation <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h2>

<p>To create a new PMC with a PerlArray in register <code lang='und' xml:lang='und'>P0</code> use:</p>

<pre lang='und' xml:lang='und'>   new P0, .PerlArray</pre>

<h2><a name="Size"
>Size <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h2>

<p>Perl array size can be initialized. For example, the empty array (size 0) is set using:</p>

<pre lang='und' xml:lang='und'>   set P0, 0</pre>

<p>and we can check the PerlArray size, putting the value on register <code lang='und' xml:lang='und'>I0</code> using</p>

<pre lang='und' xml:lang='und'>   set I0, P0</pre>

<p>Arrays can be initialized with any size:</p>

<pre lang='und' xml:lang='und'>   set P0, 5</pre>

<p>In fact, size is almost non&#45;interesting because these arrays grow as soon as you access an index out of bounds or ask explicitly.</p>

<h2><a name="Indexed_access"
>Indexed access <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h2>

<p>You can set the value 3 on the position 5 from the array using</p>

<pre lang='und' xml:lang='und'>   set P0[5], 3</pre>

<p>In the same mood, to access the element use</p>

<pre lang='und' xml:lang='und'>   set I0, P0[5]</pre>

<p>As in Perl, negative indexes are seen as indexes from the end of the array. This way, you can set the last element of the array to the value 7 using</p>

<pre lang='und' xml:lang='und'>   set P0[&#45;1], 7</pre>

<p>Note that these arrays are polymorphic: array elements can store any kind of element.</p>

<h2><a name="Multidimensional_arrays"
>Multidimensional arrays <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h2>

<p>You can use Perl arrays inside Perl arrays:</p>

<pre lang='und' xml:lang='und'>    new P0, .PerlArray
    new P1, .PerlArray
    set P1[0], &#34;el1&#34;
    set P1[1], &#34;el2&#34;
    set P0[0], P1      # First element for P0 is a perl array.
    clone P2, P1
    set P0[1], P2      # Second element for P0 is a perl array.</pre>

<p>This code creates a table like this:</p>

<pre lang='und' xml:lang='und'>  el1  el2
  el1  el2</pre>

<p>TODO: (bellow)</p>

<p>Will this be possible? At the moment, gives an &#39;Array index out of bounds!&#39;</p>

<p>While you can do this manually, as shown in the above example, it is possible to use the following syntax:</p>

<pre lang='und' xml:lang='und'>    new P0, .PerlArray
    set P0[0;0], &#34;el1&#34;
    set P0[0;1], &#34;el2&#34;
    set P0[1;0], &#34;el1&#34;
    set P0[1;1], &#34;el2&#34;</pre>

<p>This code would construct the same table. To fetch the elements you can use the same syntax:</p>

<pre lang='und' xml:lang='und'>    set S0, P0[0;1]</pre>

<h2><a name="Stacking"
>Stacking <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h2>

<p>You can use the Perl arrays as stacks, where elements are added to higher positions on the array:</p>

<pre lang='und' xml:lang='und'>  new P0, .PerlArray
  push P0, 2        # set P0[0], 2
  push P0, 3        # set P0[1], 3

  pop I0, P0        # sets I0 to P0[1] and removes this element from
                    # the array</pre>

<h2><a name="Shifting"
>Shifting <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h2>

<p>If you want to add or remove elements from the beginning of the array, use the shift or unshift commands:</p>

<pre lang='und' xml:lang='und'>  new P0, .PerlArray
  unshift P0, 2        # set P0[0], 2
  unshift P0, 3        # set P0[1], 2; set P0[0], 3

  shift I0, P0         # sets I0, P0[0], and moves all elements one
                       # index down</pre>

<h2><a name="Trueness"
>Trueness <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h2>

<p>You can get a boolean value from a Perl Array. If you use an empty Perl Array in a condition, it will return false (no elements).</p>

<pre lang='und' xml:lang='und'>        new P0, .PerlArray
        if P0, JUMP         # This will never succeed</pre>

<p>After adding a value (for example, P0[0] = 1), it will return a true value (the Perl Array has elements).</p>

<pre lang='und' xml:lang='und'>        new P0, .PerlArray
        set P0, 0, 1
        if P0, JUMP         # This will succeed</pre>

<p>If you don&#39;t add a value, but force a size different from zero the the array, it will return a true value:</p>

<pre lang='und' xml:lang='und'>        new P0, .PerlArray
        set P0, 1
        if P0, JUMP         # This will succeed</pre>

<p>You can test if there is a defined element on some array position using</p>

<pre lang='und' xml:lang='und'>  defined I0, P0[1]</pre>

<p>for the position you want to test. On the other hand, if you want only to test if there is an element (rather than testing if it is defines) you should use the <code lang='und' xml:lang='und'>exists</code> keyword:</p>

<pre lang='und' xml:lang='und'>  exists I0, P0[0]</pre>

<p>If you set the size of an array to something larger than its current value, extra elements do not exists. This means that:</p>

<pre lang='und' xml:lang='und'>  new P0, .PerlArray
  set P0, 2
  set P0[0], 4
  exists I0, P0[0]     # I0 == 1
  exists I0, P0[1]     # I0 == 0</pre>

<h2><a name="Cloning"
>Cloning <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h2>

<p>As other PMCs, you can clone Perl arrays. If you try something like</p>

<pre lang='und' xml:lang='und'>    new P0, .PerlArray
    set P0[0], 1
    set P0[1], 2

    clone P1, P0</pre>

<p><code lang='und' xml:lang='und'>P1</code> is a copy of <code lang='und' xml:lang='und'>P0</code>, where you can do whatever you want without changing the other array.</p>

<p>TODO:</p>

<p>Apparently, the copy will be deep. This means that copying an array of arrays you will get a new array with copies of arrays. Cool!</p>

<p>The problem is: how do you shallow copy?</p>

<h2><a name="TODO"
>TODO <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h2>

<pre lang='und' xml:lang='und'> &#45; explain splicing;

 &#45; add multidimentional arrays on synopsis, as soon we know if they
   work directly;</pre>
        </DIV>
        <P>
        <TABLE BORDER="0" WIDTH="730" CELLSPACING="0" CELLPADDING="0">
            <TR ALIGN="RIGHT">
                <TD WIDTH="590" VALIGN="MIDDLE">
                    <BR>
                    <DIV CLASS="FOOTER">
                        <DIV ALIGN="LEFT">
                        </DIV>
                    </DIV>
                </TD>
                <TD VALIGN="middle" ALIGN="center">
                    <IMG BORDER=0
                        SRC="../../../../resources/parrot_small.png" 
                        ALT="parrot">
                </TD>
            </TR>
        </TABLE>
    </BODY>
</HTML>
