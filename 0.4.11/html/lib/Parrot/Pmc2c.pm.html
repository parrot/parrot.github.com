<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
    "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>  
    <HEAD>
        <TITLE>PMC to C Code Generation</TITLE>
        <LINK REL="stylesheet" TYPE="text/css" 
            HREF="../../../resources/perl.css" 
            TITLE="Default CSS2" media="screen">
    </HEAD>
    <BODY> 
        <A NAME="_top"></A>
        <TABLE CELLSPACING="0" WIDTH="730">
            <TR>
                <TD WIDTH="100%" COLSPAN="2" CLASS="BANNER">parrotcode: <SPAN CLASS="title">PMC to C Code Generation</SPAN></TD>
            </TR>
            <TR>
                <TD WIDTH="100%" COLSPAN="2"  ID="NAV" STYLE="border-bottom: 1px solid #191970;">
                    <a href="../../../html/index.html">Contents</a> | <a href="../../../html/perl.html">Perl Modules</a>
                </TD>
            </TR>
        </TABLE>
        <DIV CLASS="pod">

<h1><a name="NAME"
>NAME <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h1>

<p>Parrot::Pmc2c &#45; PMC to C Code Generation</p>

<h1><a name="SYNOPSIS"
>SYNOPSIS <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h1>

<pre lang='und' xml:lang='und'>    use Parrot::Pmc2c;</pre>

<h1><a name="DESCRIPTION"
>DESCRIPTION <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h1>

<p><code lang='und' xml:lang='und'>Parrot::Pmc2c</code> is used by <em lang='und' xml:lang='und'><a href="../../tools/build/pmc2c.pl.html">tools/build/pmc2c.pl</a></em> to generate C code from PMC files.</p>

<h2><a name="Functions"
>Functions <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h2>

<h2><a name="Class_Methods"
>Class Methods <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h2>

<dl>
<dt><a name="new($self,_$opt)"
><b><code lang='und' xml:lang='und'>new($self, $opt)</b></code></a></dt><p class="pad"></p>

<dd>Returns <code lang='und' xml:lang='und'>$self</code> as a new instance.</dd><p class="pad"></p>

<dd><code lang='und' xml:lang='und'>$self</code> is a hash reference <code lang='und' xml:lang='und'>eval</code>&#45;ed from a <em lang='und' xml:lang='und'>*.dump</em> file generated by <em lang='und' xml:lang='und'><a href="../../tools/build/pmc2c.pl.html">tools/build/pmc2c.pl</a></em> from a <em lang='und' xml:lang='und'>*.pmc</em> file. It is <code lang='und' xml:lang='und'>bless</code>&#45;ed either into <code lang='und' xml:lang='und'><a href='Pmc2c/Standard.pm.html'>Parrot::Pmc2c::Standard</a></code>, or into one of the other <i>special</i> PMCs: <em lang='und' xml:lang='und'>default</em>, <code lang='und' xml:lang='und'>delegate</code>, <code lang='und' xml:lang='und'>Null</code>, <code lang='und' xml:lang='und'>Ref</code> or <code lang='und' xml:lang='und'>SharedRef</code>.</dd><p class="pad"></p>

<dd><code lang='und' xml:lang='und'>$opt</code> is a hash reference.</dd><p class="pad"></p>
</dl>

<h2><a name="Instance_Methods"
>Instance Methods <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h2>

<dl>
<dt><a name="does_write($method)"
><b><code lang='und' xml:lang='und'>does_write($method)</b></code></a></dt><p class="pad"></p>

<dd>Returns true if the vtable method <code lang='und' xml:lang='und'>$method</code> writes our value.</dd><p class="pad"></p>

<dt><a name="line_directive($self,$line,$file)"
><b><code lang='und' xml:lang='und'>line_directive($self,$line,$file)</b></code></a></dt><p class="pad"></p>

<dd>Generates the C pre processor string for a #line directive, or an empty string if <code lang='und' xml:lang='und'>$self&#45;</code>{opt}{nolines}&#62; is true.</dd><p class="pad"></p>

<dt><a name="line_directive_here($self,$output,$file)"
><b><code lang='und' xml:lang='und'>line_directive_here($self,$output,$file)</b></code></a></dt><p class="pad"></p>

<dd>Generates the C pre processor string for a #line directive to reset the compiler&#39;s line number to the next physical line in the output.</dd><p class="pad"></p>

<dt><a name="make_constlike($type,_$is_variant)"
><b><code lang='und' xml:lang='und'>make_constlike($type, $is_variant)</b></code></a></dt><p class="pad"></p>

<dd>Create a variant for Const or RO.</dd><p class="pad"></p>

<dt><a name="make_const()"
><b><code lang='und' xml:lang='und'>make_const()</b></code></a></dt><p class="pad"></p>

<dd>If the PMC had its <code lang='und' xml:lang='und'>const_too</code> flag set then this method is called in <code lang='und' xml:lang='und'>init()</code> to to create the read&#45;only set methods.</dd><p class="pad"></p>

<dt><a name="make_ro()"
><b><code lang='und' xml:lang='und'>make_ro()</b></code></a></dt><p class="pad"></p>

<dd>If the PMC doesn&#39;t have <code lang='und' xml:lang='und'>const_too</code> set (FIXME?) then this method is called to create the read&#45;only set methods and vtable variant.</dd><p class="pad"></p>

<dt><a name="init()"
><b><code lang='und' xml:lang='und'>init()</b></code></a></dt><p class="pad"></p>

<dd>Initializes the instance.</dd><p class="pad"></p>

<dt><a name="decl($classname,_$method,_$for_header)"
><b><code lang='und' xml:lang='und'>decl($classname, $method, $for_header)</b></code></a></dt><p class="pad"></p>

<dd>Returns the C code for the PMC method declaration. <code lang='und' xml:lang='und'>$for_header</code> indicates whether the code is for a header or implementation file.</dd><p class="pad"></p>

<dt><a name="includes()"
><b><code lang='und' xml:lang='und'>includes()</b></code></a></dt><p class="pad"></p>

<dd>Returns the C <code lang='und' xml:lang='und'>#include</code> for the header file of each of the PMC&#39;s superclasses.</dd><p class="pad"></p>

<dt><a name="full_arguments($args)"
><b><code lang='und' xml:lang='und'>full_arguments($args)</b></code></a></dt><p class="pad"></p>

<dd>Prepends <code lang='und' xml:lang='und'>INTERP, SELF</code> to <code lang='und' xml:lang='und'>$args</code>.</dd><p class="pad"></p>

<dt><a name="proto($type,$parameters)"
><b><code lang='und' xml:lang='und'>proto($type,$parameters)</b></code></a></dt><p class="pad"></p>

<dd>Determines the prototype (argument signature) for a method body (see <em lang='und' xml:lang='und'>src/call_list</em>).</dd><p class="pad"></p>

<dt><a name="rewrite_nci_method($self,_$class,_$method,_$super,_$super_table)"
><b><code lang='und' xml:lang='und'>rewrite_nci_method($self, $class, $method, $super, $super_table)</b></code></a></dt><p class="pad"></p>

<dd>Rewrites the method body performing the various macro substitutions for nci method bodies (see <em lang='und' xml:lang='und'><a href="../../tools/build/pmc2c.pl.html">tools/build/pmc2c.pl</a></em>).</dd><p class="pad"></p>

<dt><a name="rewrite_vtable_method($self,_$class,_$method,_$super,_$super_table)"
><b><code lang='und' xml:lang='und'>rewrite_vtable_method($self, $class, $method, $super, $super_table)</b></code></a></dt><p class="pad"></p>

<dd>Rewrites the method body performing the various macro substitutions for vtable method bodies (see <em lang='und' xml:lang='und'><a href="../../tools/build/pmc2c.pl.html">tools/build/pmc2c.pl</a></em>).</dd><p class="pad"></p>

<dt><a name="body($method,_$line,_$out_name)"
><b><code lang='und' xml:lang='und'>body($method, $line, $out_name)</b></code></a></dt><p class="pad"></p>

<dd>Returns the C code for the method body. <code lang='und' xml:lang='und'>$line</code> is used to accumulate the number of lines, <code lang='und' xml:lang='und'>$out_name</code> is the name of the output file we are generating.</dd><p class="pad"></p>

<dt><a name="methods($line,_$out_name)"
><b><code lang='und' xml:lang='und'>methods($line, $out_name)</b></code></a></dt><p class="pad"></p>

<dd>Returns the C code for the vtable methods. <code lang='und' xml:lang='und'>$line</code> is used to accumulate the number of lines, <code lang='und' xml:lang='und'>$out_name</code> is the name of the output file we are generating.</dd><p class="pad"></p>

<dt><a name="pmc_is_dynpmc"
><b><code lang='und' xml:lang='und'>pmc_is_dynpmc</b></code></a></dt><p class="pad"></p>

<dd>Determines if a given PMC type is dynamically loaded or not.</dd><p class="pad"></p>

<dt><a name="find_mmd_methods()"
><b><code lang='und' xml:lang='und'>find_mmd_methods()</b></code></a></dt><p class="pad"></p>

<dd>Returns three values:</dd><p class="pad"></p>

<dd>The first is an arrayref of &#60;[ mmd_number, left, right, implementation_func]&#62; suitable for initializing the MMD list.</dd><p class="pad"></p>

<dd>The second is a arrayref listing dynamic PMCs which will need to be looked up.</dd><p class="pad"></p>

<dd>The third is a list of <code lang='und' xml:lang='und'>[index, dynamic PMC]</code> pairs of right entries in the MMD table that will need to be resolved at runtime.</dd><p class="pad"></p>

<dt><a name="find_vtable_methods()"
><b><code lang='und' xml:lang='und'>find_vtable_methods()</b></code></a></dt><p class="pad"></p>

<dd>Returns an arrayref containing the vtable methods in the order they appear in the vtable.</dd><p class="pad"></p>

<dt><a name="vtable_decl($name)"
><b><code lang='und' xml:lang='und'>vtable_decl($name)</b></code></a></dt><p class="pad"></p>

<dd>Returns the C code for the declaration of a vtable temporary named <code lang='und' xml:lang='und'>$name</code> with the functions for this class.</dd><p class="pad"></p>

<dt><a name="init_func()"
><b><code lang='und' xml:lang='und'>init_func()</b></code></a></dt><p class="pad"></p>

<dd>Returns the C code for the PMC&#39;s initialization method, or an empty string if the PMC has a <code lang='und' xml:lang='und'>no_init</code> flag.</dd><p class="pad"></p>

<dt><a name="gen_c($out_name)"
><b><code lang='und' xml:lang='und'>gen_c($out_name)</b></code></a></dt><p class="pad"></p>

<dd>Generates the C implementation file code for the PMC. <code lang='und' xml:lang='und'>$out_name</code> is the name of the output file we are generating.</dd><p class="pad"></p>

<dt><a name="hdecls()"
><b><code lang='und' xml:lang='und'>hdecls()</b></code></a></dt><p class="pad"></p>

<dd>Returns the C code function declarations for all the methods for inclusion in the PMC&#39;s C header file.</dd><p class="pad"></p>

<dd>TODO include MMD variants.</dd><p class="pad"></p>

<dt><a name="gen_h($out_name)"
><b><code lang='und' xml:lang='und'>gen_h($out_name)</b></code></a></dt><p class="pad"></p>

<dd>Generates the C header file code for the PMC. <code lang='und' xml:lang='und'>$out_name</code> is the name of the output file we are generating.</dd><p class="pad"></p>

<dt><a name="implements($method)"
><b><code lang='und' xml:lang='und'>implements($method)</b></code></a></dt><p class="pad"></p>

<dd>True if this class generates code for the method <code lang='und' xml:lang='und'>$method</code>.</dd><p class="pad"></p>

<dt><a name="implements_vtable($method)"
><b><code lang='und' xml:lang='und'>implements_vtable($method)</b></code></a></dt><p class="pad"></p>

<dd>True if this class generates code for VTABLE method <code lang='und' xml:lang='und'>$method</code>.</dd><p class="pad"></p>
</dl>
        </DIV>
        <P>
        <TABLE BORDER="0" WIDTH="730" CELLSPACING="0" CELLPADDING="0">
            <TR ALIGN="RIGHT">
                <TD WIDTH="590" VALIGN="MIDDLE">
                    <BR>
                    <DIV CLASS="FOOTER">
                        <DIV ALIGN="LEFT">
                        </DIV>
                    </DIV>
                </TD>
                <TD VALIGN="middle" ALIGN="center">
                    <IMG BORDER=0
                        SRC="../../../resources/parrot.small.png" 
                        ALT="parrot">
                </TD>
            </TR>
        </TABLE>
    </BODY>
</HTML>
