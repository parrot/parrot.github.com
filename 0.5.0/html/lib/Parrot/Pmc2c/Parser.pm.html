<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
    "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>  
    <HEAD>
        <TITLE>PMC Parser</TITLE>
        <LINK REL="stylesheet" TYPE="text/css" 
            HREF="../../../../resources/perl.css" 
            TITLE="Default CSS2" media="screen">
    </HEAD>
    <BODY> 
        <A NAME="_top"></A>
        <TABLE CELLSPACING="0" WIDTH="730">
            <TR>
                <TD WIDTH="100%" COLSPAN="2" CLASS="BANNER">parrotcode: <SPAN CLASS="title">PMC Parser</SPAN></TD>
            </TR>
            <TR>
                <TD WIDTH="100%" COLSPAN="2"  ID="NAV" STYLE="border-bottom: 1px solid #191970;">
                    <a href="../../../../html/index.html">Contents</a> | <a href="../../../../html/perl.html">Perl Modules</a>
                </TD>
            </TR>
        </TABLE>
        <DIV CLASS="pod">

<h1><a name="NAME"
>NAME <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<p>Parrot::Pmc2c::Parser &#45; PMC Parser</p>

<h1><a name="SYNOPSIS"
>SYNOPSIS <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<pre lang='und' xml:lang='und'>    use Parrot::Pmc2c::Parser;</pre>

<h1><a name="DESCRIPTION"
>DESCRIPTION <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<p>Parrot::Pmc2c::Paser parses a sudo C syntax into a perl hash that is then dumped.</p>

<h2><a name="parse_pmc()"
><code lang='und' xml:lang='und'>parse_pmc()</code> <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h2>

<pre lang='und' xml:lang='und'>    $parsed_pmc_hash = parse_pmc($pmc2cMain, $filename);</pre>

<p><b>Purpose:</b> Parse PMC code and return a hash ref of pmc attributes.</p>

<p><b>Arguments:</b> List of two arguments:</p>

<ul>
<li>The pmc2cMain object</li><p class="pad"></p>

<li>Filename of the pmc to parse.</li><p class="pad"></p>
</ul>

<p><b>Return Values:</b> Reference to a Parrot::Pmc2c::PMC object</p>

<p><b>Comments:</b> Called by <code lang='und' xml:lang='und'>dump_pmc()</code>.</p>

<h2><a name="parse_top_level()"
><code lang='und' xml:lang='und'>parse_top_level()</code> <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h2>

<pre lang='und' xml:lang='und'>    my ($preamble, $pmcname, $flags, $parents, $pmcbody, $post, $chewed_lines)
        = parse_top_level(\$code);</pre>

<p><b>Purpose:</b> Extract a pmc signature from the code ref.</p>

<p><b>Argument:</b> PMC file contents slurped by <code lang='und' xml:lang='und'>parse_pmc()</code>.</p>

<p><b>Return Values:</b> List of seven elements:</p>

<ul>
<li>the code found before the pmc signature;</li><p class="pad"></p>

<li>the name of the pmc</li><p class="pad"></p>

<li>a hash ref containing the flags associated with the pmc (such as <code lang='und' xml:lang='und'>extends</code> and <code lang='und' xml:lang='und'>does</code>).</li><p class="pad"></p>

<li>the list of parents this pmc extends</li><p class="pad"></p>

<li>the body of the pmc</li><p class="pad"></p>

<li>the code found after the pmc body</li><p class="pad"></p>

<li>number of newlines in the pmc signature that need to be added to the running total of lines in the file</li><p class="pad"></p>
</ul>

<p><b>Comments:</b> Called internally by <code lang='und' xml:lang='und'>parse_pmc()</code>.</p>

<h2><a name="parse_flags()"
><code lang='und' xml:lang='und'>parse_flags()</code> <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h2>

<pre lang='und' xml:lang='und'>    my ($flags, $parents) = parse_flags($attributes, $pmcname);</pre>

<p><b>Purpose:</b> Extract a pmc signature from the code ref.</p>

<p><b>Argument:</b> PMC file contents slurped by <code lang='und' xml:lang='und'>parse_pmc()</code>.</p>

<p><b>Return Values:</b> List of two elements:</p>

<ul>
<li>a hash ref containing the flags associated with the pmc (such as <code lang='und' xml:lang='und'>extends</code> and <code lang='und' xml:lang='und'>does</code>).</li><p class="pad"></p>

<li>the list of parents this pmc extends</li><p class="pad"></p>
</ul>

<p><b>Comments:</b> Called internally by <code lang='und' xml:lang='und'>parse_top_level()</code>.</p>

<h2><a name="extract_balanced()"
><code lang='und' xml:lang='und'>extract_balanced()</code> <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h2>

<pre lang='und' xml:lang='und'>    ($pmcbody, $post) = extract_balanced($code);</pre>

<p><b>Purpose:</b> Remove a balanced <code lang='und' xml:lang='und'>{}</code> construct from the beginning of <code lang='und' xml:lang='und'>$code</code>. Return it and the remaining code.</p>

<p><b>Argument:</b> The code ref which was the first argument provided to <code lang='und' xml:lang='und'>parse_pmc()</code>.</p>

<p><b>Return Values:</b> List of two elements:</p>

<ul>
<li>String beginning with <code lang='und' xml:lang='und'>{</code> and ending with <code lang='und' xml:lang='und'>}</code>. In between is found C code where the comments hold strings of Perl comments written in POD.</li><p class="pad"></p>

<li>String holding the balance of the code. Same style as first element, but without the braces.</li><p class="pad"></p>
</ul>

<p><b>Comments:</b> Called twice within <code lang='und' xml:lang='und'>parse_pmc()</code>. Will die with error message <code lang='und' xml:lang='und'>Badly balanced</code> if not balanced.</p>

<h2><a name="parse_method_attrs()"
><code lang='und' xml:lang='und'>parse_method_attrs()</code> <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h2>

<pre lang='und' xml:lang='und'>    $attrs = parse_method_attrs($method_attributes);</pre>

<p><b>Purpose:</b> Parse a list of method attributes and return a hash ref of them.</p>

<p><b>Arguments:</b> String captured from regular expression.</p>

<p><b>Return Values:</b> Reference to hash of attribute values.</p>

<p><b>Comments:</b> Called within <code lang='und' xml:lang='und'>parse_pmc()</code>.</p>
        </DIV>
        <P>
        <TABLE BORDER="0" WIDTH="730" CELLSPACING="0" CELLPADDING="0">
            <TR ALIGN="RIGHT">
                <TD WIDTH="590" VALIGN="MIDDLE">
                    <BR>
                    <DIV CLASS="FOOTER">
                        <DIV ALIGN="LEFT">
                        </DIV>
                    </DIV>
                </TD>
                <TD VALIGN="middle" ALIGN="center">
                    <IMG BORDER=0
                        SRC="../../../../resources/parrot_small.png" 
                        ALT="parrot">
                </TD>
            </TR>
        </TABLE>
    </BODY>
</HTML>
