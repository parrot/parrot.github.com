<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
    "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>  
    <HEAD>
        <TITLE>No frills programming for Parrot</TITLE>
        <LINK REL="stylesheet" TYPE="text/css" 
            HREF="../../../../resources/perl.css" 
            TITLE="Default CSS2" media="screen">
    </HEAD>
    <BODY> 
        <A NAME="_top"></A>
        <TABLE CELLSPACING="0" WIDTH="730">
            <TR>
                <TD WIDTH="100%" COLSPAN="2" CLASS="BANNER">parrotcode: <SPAN CLASS="title">No frills programming for Parrot</SPAN></TD>
            </TR>
            <TR>
                <TD WIDTH="100%" COLSPAN="2"  ID="NAV" STYLE="border-bottom: 1px solid #191970;">
                    <a href="../../../../html/index.html">Contents</a> | <a href="../../../../html/languages.html">Language Implementations</a> | <a href="../../../../html/jako.html">Jako</a>
                </TD>
            </TR>
        </TABLE>
        <DIV CLASS="pod">

<h1><a name="NAME"
>NAME <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<p>jako &#45; No frills programming for Parrot</p>

<h1><a name="SYNOPSIS"
>SYNOPSIS <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<p>Jako is a simple programming language that targets the Parrot virtual machine.</p>

<h1><a name="DESCRIPTION"
>DESCRIPTION <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<p>Jako should be familiar to those who have seen C and Perl.</p>

<h2><a name="Lexical_Structure"
>Lexical Structure <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h2>

<p>Jako&#39;s lexical structure is similar to its relative: Perl.
Whitespace between tokens is not significant,
and comments are introduced with an octothorp (&#39;#&#39;) and continue to the end of the line.</p>

<ul>
<li>Labels</li><p class="pad"></p>

<p>An identifier followed by a colon at the beginning of a line is a label.
Labels can be the targets of <b>goto</b> statements,
and can also provide a way to refer to specific loops when using the loop control statements (see below).</p>

<li>Literals</li><p class="pad"></p>

<ul>
<li>Integers</li><p class="pad"></p>

<ul>
<li>Binary</li><p class="pad"></p>

<p>&#34;0b&#34; followed by any number of binary digits (&#34;0&#34; or &#34;1&#34;).</p>

<li>Octal</li><p class="pad"></p>

<p>&#34;0&#34; followed by any number of octal digits (&#34;0&#34; to &#34;7&#34;).</p>

<li>Decimal</li><p class="pad"></p>

<p>Starting with a non&#45;zero decimal digit,
with any number of decimal digits following.
Optional prefixed &#34;&#45;&#34; for negative integers.</p>

<li>Hexadecimal</li><p class="pad"></p>

<p>&#34;0x&#34; followed by any number of hexadecimal digits (&#34;0&#34; to &#34;9&#34;,
&#34;a&#34;,
&#34;b&#34;,
&#34;c&#34;,
&#34;d&#34;,
&#34;e&#34;,
or &#34;f&#34;).</p>
</ul>

<li>Numbers</li><p class="pad"></p>

<p>One or more decimal digits,
a decimal point,
and one ore more decimal digits.
Optional prefixed &#34;&#45;&#34; for negative numbers.</p>

<li>Strings</li><p class="pad"></p>

<p>A double&#45;quote character,
followed by the contents of the string,
and another double&#45;quote character.
Inside the string literal,
double quotes are to be escaped with &#34;\&#34; (back slash,
a.k.a.
&#34;whack&#34;).
To include a back slash in the string,
precede it with another back slash.</p>
</ul>

<li>Identifiers</li><p class="pad"></p>

<p>Start with a letter,
followed by any combination of letters,
decimal digits and underscores.</p>

<li>Types</li><p class="pad"></p>

<p>The built&#45;in types are recognized as keywords: <b>int</b>,
<b>num</b>,
<b>pmc</b>,
<b>str</b>.</p>
</ul>

<h2><a name="Syntax"
>Syntax <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h2>

<ul>
<li>Blocks</li><p class="pad"></p>

<p>A block is a sequence of statements and declarations between a matching pair of open and close braces (&#34;<b>{</b>&#34; and &#34;<b>}</b>&#34;).
Each block represents a scope for lexical symbols (variables and constants).
There is an implicit block which represents the entire compilation unit (usually a file).
Subroutines may only appear at this level.</p>

<li>Constant Declarations</li><p class="pad"></p>

<p><b>const</b> introduces a constant declaration.
What follows must be a type,
a list of identifiers,
&#34;<b>=</b>&#34;,
and a value of an appropriate type.</p>

<pre lang='und' xml:lang='und'>        const int a, b, c = 2;
        const int pi_in   = 3;             # Indiana
        const num pi      = 3.141592;      # Everywhere else
        const str d       = &#34;Como estas?&#34;;</pre>

<li>Variable Declarations</li><p class="pad"></p>

<p><b>var</b> introduces a variable declaration. What follows must be a type and a list of identifiers, optionally followed by &#34;<b>=</b>&#34; and an expression.</p>

<pre lang='und' xml:lang='und'>        var int a, b, c;
        var num d, e, f = 42.0;
        var str g = &#34;Howdy&#34;;</pre>

<li>Subroutines</li><p class="pad"></p>

<p><b>sub</b> introduces a subroutine declaration (and possibly definition). What follows is an optional type, and identifier (the name of the subroutine), an optional set of properties, and a list of formal arguments in parenthesis. The formal arguments are written as a comma&#45;separated list of type&#45;name pairs. Finally, there must be a block which contains the implementation of the subroutine.</p>

<p>Simple cases of subroutine definitions are:</p>

<pre lang='und' xml:lang='und'>        sub foo() { ... }
        sub int bar(int x, int y) { ... }</pre>

<p>NOTE: The below requires <code lang='und' xml:lang='und'>jakoc</code> to be able to determine the best match among a number of alternatives with the same name, but different signatures.</p>

<p>The <b>op</b> property can have a string value that gives the op name, if it is different from the sub name. There is also an <b>oplib</b> property that gives the oplib, if the op is not core.</p>

<p>TODO: Presumably, there should be an implicit &#34;use &#39;core&#39;&#34;, that would pull in the definitions of the core ops as subs (if any).</p>

<p>One wonders if this mechanism could be expanded to account for the arithmetic operators, etc.</p>

<p>Also, if the Parrot .ops files could be processed to automatically produce the include files for the various categories of ops and subs.</p>

<pre lang='und' xml:lang='und'>  sub num coversine { oplib = &#34;obscure&#34;, op = &#34;covers&#34; } (num);

  sub int BlitSurface { fnlib = &#34;libsdl&#34;, fn = &#34;SDL_BlitSurface&#34; } (
    pmc { nat = &#34;p&#34; } src,
    pmc { nat = &#34;p&#34; } srcrect,
    pmc { nat = &#34;p&#34; } dst,
    pmc { nat = &#34;p&#34; } dstrect
  );</pre>

<p>NOTE: The <b>oplib</b> sub property is not implemented yet.</p>

<p>NOTE: Type properties are not implemented yet.</p>

<li>Assignments</li><p class="pad"></p>

<p>Following tradition, basic assignments are written as</p>

<pre lang='und' xml:lang='und'>         left = right;</pre>

<p>Conversions between <b>int</b> and <b>num</b> values are implicit.</p>

<li>Conditionals</li><p class="pad"></p>

<p>There are two kinds of conditional block: <b>if</b> and <b>unless</b>, with the latter being short for the more familiar <b>if</b>, but with the condition inverted. In both cases, what follows the keyword is a parenthesized boolean expression and a block.</p>

<pre lang='und' xml:lang='und'>        if     (happy)   { smile(); }
        unless (raining) { play();  }</pre>

<p>Even though each is redundant given the presence of the other, both are retained in the language for the same reason as in Perl: allowing more natural expression.</p>

<p>Further, there can be a subsequent block, introduced with <b>else</b>:</p>

<pre lang='und' xml:lang='und'>        if     (paid) { work();     } else { complain(); }
        unless (paid) { complain(); } else { work();     }</pre>

<li>Loops</li><p class="pad"></p>

<p>There are two kinds of loop: <b>while</b> and <b>until</b>, with the same reversal of sense as exists between <b>if</b> and <b>unless</b>.</p>

<pre lang='und' xml:lang='und'>        while (1) {
          while (overdue != 0.0) { work(); invoice();     }
          until (overdue == 0.0) { send_dunning_letter(); }
        }</pre>

<p>You can control loops with the <b>next</b>, <b>last</b> and <b>redo</b> loop control statements. <b>next</b> jumps immediately to the next iteration of the loop, without executing the intervening statements, <b>last</b> jumps immediately out of the loop, again without executing the intervening statements. And, <b>redo</b> jumps back to the beginning of the current iteration.</p>

<p>Loops can be followed by an optional <b>continue</b> block, which provides code to be executed between iterations.</p>
</ul>

<h2><a name="Semantics"
>Semantics <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h2>

<ul>
<li>String interpolation</li><p class="pad"></p>

<p>An unescaped dollar sign (&#34;$&#34;) in a string causes Jako to interpolate variables into a final string before the string is used in an expression. In case the text to follow the interpolated value starts with identifier characters that would interfere with the correct determination of the variable to interpolate, use the form &#34;${...}&#34;.</p>
</ul>

<h1><a name="HISTORY"
>HISTORY <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<p>Jako was the first language to target the Parrot virtual machine. It was also the first language to support subroutines (although in a rudimentary, hackish way) for Parrot. It has since grown up a bit and now uses PIR to get real subroutine support.</p>

<h1><a name="AUTHOR"
>AUTHOR <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<p>You can blame gregor &#60;gregor@focusresearch.com&#62; for the Jako language and its compiler.</p>

<h1><a name="COPYRIGHT"
>COPYRIGHT <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<p>Copyright (C) 2001&#45;2007, The Perl Foundation.</p>

<h1><a name="LICENSE"
>LICENSE <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<p>The Jako compiler is free software. It is subject to the same license as the Parrot interpreter.</p>
        </DIV>
        <P>
        <TABLE BORDER="0" WIDTH="730" CELLSPACING="0" CELLPADDING="0">
            <TR ALIGN="RIGHT">
                <TD WIDTH="590" VALIGN="MIDDLE">
                    <BR>
                    <DIV CLASS="FOOTER">
                        <DIV ALIGN="LEFT">
                        </DIV>
                    </DIV>
                </TD>
                <TD VALIGN="middle" ALIGN="center">
                    <IMG BORDER=0
                        SRC="../../../../resources/parrot.small.png" 
                        ALT="parrot">
                </TD>
            </TR>
        </TABLE>
    </BODY>
</HTML>
