<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
    "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>  
    <HEAD>
        <TITLE>running</TITLE>
        <LINK REL="stylesheet" TYPE="text/css" 
            HREF="../../../resources/perl.css" 
            TITLE="Default CSS2" media="screen">
    </HEAD>
    <BODY> 
        <A NAME="_top"></A>
        <TABLE CELLSPACING="0" WIDTH="730">
            <TR>
                <TD WIDTH="100%" COLSPAN="2" CLASS="BANNER">parrotcode: <SPAN CLASS="title">running</SPAN></TD>
            </TR>
            <TR>
                <TD WIDTH="100%" COLSPAN="2"  ID="NAV" STYLE="border-bottom: 1px solid #191970;">
                    <a href="../../../html/index.html">Contents</a> | <a href="../../../html/imcc.html">IMCC</a>
                </TD>
            </TR>
        </TABLE>
        <DIV CLASS="pod">

<h1><a name="NAME"
>NAME <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h1>

<p>Parrot &#45; running</p>

<h1><a name="VERSION"
>VERSION <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h1>

<dl>
<dt><a name="0.0.1_initial"
>0.0.1 initial</a></dt><p class="pad"></p>

<dt><a name="0.0.9.10_changed_run_options"
>0.0.9.10 changed run options</a></dt><p class="pad"></p>

<dt><a name="0.0.9.12_changed_debug_options"
>0.0.9.12 changed debug options</a></dt><p class="pad"></p>

<dt><a name="0.0.10.0_imcc_is_parrot"
>0.0.10.0 imcc is parrot</a></dt><p class="pad"></p>

<dt><a name="0.0.10.1_add_&#45;E_switch"
>0.0.10.1 add &#45;E switch</a></dt><p class="pad"></p>

<dt><a name="0.0.11_added_runtime_options"
>0.0.11 added runtime options</a></dt><p class="pad"></p>
</dl>

<h1><a name="OVERVIEW"
>OVERVIEW <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h1>

<p>This document describes parrot&#39;s command line options.</p>

<h1><a name="SYNOPSIS"
>SYNOPSIS <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h1>

<pre lang='und' xml:lang='und'> parrot [&#45;options] &#60;file&#62; [arguments ...]</pre>

<h1><a name="OPTIONS"
>OPTIONS <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h1>

<h2><a name="Assembler_options"
>Assembler options <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h2>

<dl>
<dt><a name="&#45;a,_&#45;&#45;pasm"
>&#45;a, &#45;&#45;pasm</a></dt><p class="pad"></p>

<dd>Assume PASM input on stdin.</dd><p class="pad"></p>

<dt><a name="&#45;c,_&#45;&#45;pbc"
>&#45;c, &#45;&#45;pbc</a></dt><p class="pad"></p>

<dd>Assume PBC file on stdin, run it.</dd><p class="pad"></p>

<dt><a name="&#45;d,_&#45;&#45;debug_[hexbits]"
>&#45;d, &#45;&#45;debug [hexbits]</a></dt><p class="pad"></p>

<dd>The <b>&#45;d</b> switch takes an optional argument which is considered to hold a hex value of debug bits. Without a value, debug is set to 1.</dd><p class="pad"></p>

<dd>The individual bits are:</dd><p class="pad"></p>

<pre lang='und' xml:lang='und'> DEBUG_PARROT         0001
 DEBUG_LEXER          0002
 DEBUG_PARSER         0004
 DEBUG_IMC            0008
 DEBUG_CFG            0010
 DEBUG_OPT1           0020
 DEBUG_OPT2           0040
 DEBUG_PBC            1000
 DEBUG_PBC_CONST      2000
 DEBUG_PBC_FIXUP      4000</pre>

<dd>These can be listed on the command line by use of the <b>&#45;&#45;help&#45;debug</b> switch.</dd><p class="pad"></p>

<dd>To produce really huge output on <em lang='und' xml:lang='und'>stderr</em> run &#34;imcc <b>&#45;d 0ffff</b> ...&#34;. Note: if the argument is separated by whitespace from the <b>&#45;d</b> switch, it has to start with a number.</dd><p class="pad"></p>

<dt><a name="&#45;h,_&#45;&#45;help"
>&#45;h, &#45;&#45;help</a></dt><p class="pad"></p>

<dt><a name="&#45;o_outputfile,_&#45;&#45;output=outputfile"
>&#45;o outputfile, &#45;&#45;output=outputfile</a></dt><p class="pad"></p>

<dd>Act like an assembler. Don&#39;t run code, unless <b>&#45;r</b> is given too. If the outputfile ends with <b>.pbc</b>, a PBC file is written. If it ends with <b>.pasm</b>, a PASM output is generated, even from PASM input. This can be handy to check various optimizations, including <b>&#45;Op</b>.</dd><p class="pad"></p>

<dt><a name="&#45;&#45;output&#45;pbc"
>&#45;&#45;output&#45;pbc</a></dt><p class="pad"></p>

<dd>Act like an assembler, but always output bytecode, even if the output file does not end in <b>.pbc</b></dd><p class="pad"></p>

<dt><a name="&#45;r,_&#45;&#45;run&#45;pbc"
>&#45;r, &#45;&#45;run&#45;pbc</a></dt><p class="pad"></p>

<dd>Only useful after <b>&#45;o</b> or <b>&#45;&#45;output&#45;pbc</b>. Run the program from the compiled in&#45;memory image. If two <b>&#45;r</b> options are given, the <b>.pbc</b> file is read from disc and run. This is mainly needed for tests.</dd><p class="pad"></p>

<dt><a name="&#45;v,_&#45;&#45;verbose"
>&#45;v, &#45;&#45;verbose</a></dt><p class="pad"></p>

<dd>One <b>&#45;v</b> shows which files are worked on and prints a summary over register usage and optimization stats per <i>compilation unit</i>. With two <b>&#45;v</b> switches, IMCC prints a line per individual processing step too.</dd><p class="pad"></p>

<dt><a name="&#45;y,_&#45;&#45;yydebug"
>&#45;y, &#45;&#45;yydebug</a></dt><p class="pad"></p>

<dd>Turn on yydebug in <em lang='und' xml:lang='und'>yacc</em>/<em lang='und' xml:lang='und'>bison</em>.</dd><p class="pad"></p>

<dt><a name="&#45;V,_&#45;&#45;version"
>&#45;V, &#45;&#45;version</a></dt><p class="pad"></p>

<dt><a name="&#45;Ox"
>&#45;Ox</a></dt><p class="pad"></p>

<dd>Optimize</dd><p class="pad"></p>

<pre lang='und' xml:lang='und'> &#45;O0 no optimization (default)
 &#45;O1 optimizations without life info (e.g. branches)
 &#45;O  same
 &#45;O2 optimizations with life info
 &#45;Op rewrite I and N PASM registers most used first
 &#45;Ot select fastest run core (default with &#45;O1 and &#45;O2)</pre>

<dd>See <em lang='und' xml:lang='und'><a href="operation.pod.html">imcc/docs/operation.pod</a></em> for more information on the optimizer. NB. Optimization is currently experimental and these options are likely to change.</dd><p class="pad"></p>

<dt><a name="&#45;E,_&#45;&#45;pre&#45;process&#45;only"
>&#45;E, &#45;&#45;pre&#45;process&#45;only</a></dt><p class="pad"></p>

<dd>Preprocess source file (i.e. expand macros) and print result to stdout. E.g.</dd><p class="pad"></p>

<pre lang='und' xml:lang='und'>  $ parrot &#45;E t/op/macro_10.pasm
  $ parrot &#45;E t/op/macro_10.pasm | parrot &#45;&#45; &#45;</pre>
</dl>

<h2><a name="Run_Core_Options"
>Run Core Options <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h2>

<dl>
<dt><a name="&#45;b,_&#45;&#45;bounds&#45;checks,_&#45;&#45;slow&#45;core"
>&#45;b, &#45;&#45;bounds&#45;checks, &#45;&#45;slow&#45;core</a></dt><p class="pad"></p>

<dd>Select the bounds&#45;checking slow core.</dd><p class="pad"></p>

<dt><a name="&#45;C,_&#45;&#45;CGP&#45;core"
>&#45;C, &#45;&#45;CGP&#45;core</a></dt><p class="pad"></p>

<dd>Select the CGP (CGoto Predereferenced) core.</dd><p class="pad"></p>

<dt><a name="&#45;f,_&#45;&#45;fast&#45;core"
>&#45;f, &#45;&#45;fast&#45;core</a></dt><p class="pad"></p>

<dd>Select the fast (or function) core.</dd><p class="pad"></p>

<dt><a name="&#45;g,_&#45;&#45;computed&#45;goto&#45;core"
>&#45;g, &#45;&#45;computed&#45;goto&#45;core</a></dt><p class="pad"></p>

<dd>Select the CGoto core.</dd><p class="pad"></p>

<dt><a name="&#45;j,_&#45;&#45;jit&#45;core"
>&#45;j, &#45;&#45;jit&#45;core</a></dt><p class="pad"></p>

<dd>Run with the JIT subsystem.</dd><p class="pad"></p>

<dt><a name="&#45;p,_&#45;&#45;profile"
>&#45;p, &#45;&#45;profile</a></dt><p class="pad"></p>

<dd>Run with the slow core and do print an execution profile.</dd><p class="pad"></p>

<dt><a name="&#45;P,_&#45;&#45;predereferenced&#45;core"
>&#45;P, &#45;&#45;predereferenced&#45;core</a></dt><p class="pad"></p>

<dd>Prederefernce opcode function arguments on the fly.</dd><p class="pad"></p>

<dt><a name="&#45;t,_&#45;&#45;trace"
>&#45;t, &#45;&#45;trace</a></dt><p class="pad"></p>

<dd>Run with the slow core and print trace information to <b>stderr</b>.</dd><p class="pad"></p>
</dl>

<h2><a name="VM_Options"
>VM Options <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h2>

<dl>
<dt><a name="&#45;w,_&#45;&#45;warnings"
>&#45;w, &#45;&#45;warnings</a></dt><p class="pad"></p>

<dd>Turn on warnings.</dd><p class="pad"></p>

<dt><a name="&#45;&#45;gc&#45;debug"
>&#45;&#45;gc&#45;debug</a></dt><p class="pad"></p>

<dd>Turn on GC (Garbage Collection) debugging. This imposes some stress on the GC subsystem and can slow down execution considerably.</dd><p class="pad"></p>

<dt><a name="&#45;G,_&#45;&#45;no&#45;gc"
>&#45;G, &#45;&#45;no&#45;gc</a></dt><p class="pad"></p>

<dd>This turns off DOD (Dead Object Detection) and GC. This may be useful to find GC related bugs. Don&#39;t use this option for longer running programs: as memory is no longer recycled, it may quickly become exhausted.</dd><p class="pad"></p>

<dt><a name="&#45;&#45;leak&#45;test,_&#45;&#45;destroy&#45;at&#45;end"
>&#45;&#45;leak&#45;test, &#45;&#45;destroy&#45;at&#45;end</a></dt><p class="pad"></p>

<dd>Free all memory of the last interpreter, so that leak checkers can be run.</dd><p class="pad"></p>

<dt><a name="&#45;.,_&#45;&#45;wait"
>&#45;., &#45;&#45;wait</a></dt><p class="pad"></p>

<dd>Read a keystroke before starting.</dd><p class="pad"></p>
</dl>

<h1><a name="&#60;file&#62;"
>&#60;file&#62; <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h1>

<p>If the file ends in <b>.pbc</b> it will be interpreted immediately.</p>

<p>If the file ends in <b>.pasm</b>, then it is parsed as PASM code. Otherwise, it is parsed as PIR code. In both cases, it will then be run, unless the <b>&#45;o</b> flag was given.</p>

<p>If the <b>file</b> is a single dash, input from <b>stdin</b> is read.</p>

<h2><a name="Generated_files"
>Generated files <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h2>

<p>If debugging is enabled these files are generated:</p>

<pre lang='und' xml:lang='und'>  file.stabs.s ... stabsfile for the program
  file.o ... object file with debug information
  EVAL_n ... source of B&#60;compile&#62; op number I&#60;n&#62;
  EVAL_n.stabs.s ... stabsfile for this block
  EVAL_n.o ... object file with debug information</pre>

<h1><a name="[arguments_...]"
>[arguments ...] <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h1>

<p>Optional arguments passed to the running program as ARGV. The program is assumed to know what to do with these.</p>

<h1><a name="Operation_table"
>Operation table <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h1>

<pre lang='und' xml:lang='und'> Command line           Action          Output
 &#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
 parrot x.imc           run
 parrot x.pasm          run
 parrot x.pbc           run
 &#45;o x.pasm x.imc        ass             x.pasm
 &#45;o x.pasm y.pasm       ass             x.pasm
 &#45;o x.pbc  x.imc        ass             x.pbc
 &#45;o x.pbc  x.pasm       ass             x.pbc
 &#45;o x.pbc &#45;r x.pasm     ass/run pasm    x.pbc
 &#45;o x.pbc &#45;r &#45;r x.pasm  ass/run pbc     x.pbc
 &#45;o x.o    x.pbc        obj</pre>

<p>Actions above are:</p>

<pre lang='und' xml:lang='und'>  run ... yes, run the program
  ass ... assemble sourcefile
  obj ..  produce native (ELF) object file for the EXEC subsystem</pre>

<h1><a name="BUGS"
>BUGS <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h1>

<p>Yes.</p>

<h1><a name="FILES"
>FILES <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h1>

<p><em lang='und' xml:lang='und'>main.c</em></p>

<h1><a name="AUTHOR"
>AUTHOR <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h1>

<p>Leopold Toetsch &#60;lt@toetsch.at&#62;</p>
        </DIV>
        <P>
        <TABLE BORDER="0" WIDTH="730" CELLSPACING="0" CELLPADDING="0">
            <TR ALIGN="RIGHT">
                <TD WIDTH="590" VALIGN="MIDDLE">
                    <BR>
                    <DIV CLASS="FOOTER">
                        <DIV ALIGN="LEFT">
                        </DIV>
                    </DIV>
                </TD>
                <TD VALIGN="middle" ALIGN="center">
                    <IMG BORDER=0
                        SRC="../../../resources/parrot.small.png" 
                        ALT="parrot">
                </TD>
            </TR>
        </TABLE>
    </BODY>
</HTML>
