<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
    "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>  
    <HEAD>
        <TITLE>Untitled</TITLE>
        <LINK REL="stylesheet" TYPE="text/css" 
            HREF="../../../resources/perl.css" 
            TITLE="Default CSS2" media="screen">
    </HEAD>
    <BODY> 
        <A NAME="_top"></A>
        <TABLE CELLSPACING="0" WIDTH="730">
            <TR>
                <TD WIDTH="100%" COLSPAN="2" CLASS="BANNER">parrotcode: <SPAN CLASS="title">Untitled</SPAN></TD>
            </TR>
            <TR>
                <TD WIDTH="100%" COLSPAN="2"  ID="NAV" STYLE="border-bottom: 1px solid #191970;">
                    <a href="../../../html/index.html">Contents</a> | <a href="../../../html/docs.html">Documentation</a>
                </TD>
            </TR>
        </TABLE>
        <DIV CLASS="pod">

<h1><a name="Perl_Hash_PMC"
>Perl Hash PMC <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h1>

<h2><a name="Synopsis"
>Synopsis <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h2>

<pre lang='und' xml:lang='und'>   new P0, .PerlHash     # PMC creation

   set P0[&#34;foo&#34;], &#34;bar&#34;  # $P0{foo} = &#34;bar&#34;
   set S0, P0[&#34;foo&#34;]     # $S0 = $P0{foo}

   delete P0[&#34;foo&#34;]      # delete($P0{foo})

   exists I0, P0[&#34;zbr&#34;]  # $I0 = exists($P0{zbr})
   defined I0, P0[&#34;zbr&#34;] # $I0 = defined($P0{zbr})

   clone P1, P0          # clone PMC</pre>

<h2><a name="Creation"
>Creation <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h2>

<p>As with other PMC&#39;s, create the hash with</p>

<pre lang='und' xml:lang='und'>    new P0, .PerlHash</pre>

<h2><a name="Accessing_Elements"
>Accessing Elements <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h2>

<p>To store elements on the hash use</p>

<pre lang='und' xml:lang='und'>    set P0[&#34;key&#34;], &#34;value&#34;</pre>

<p>Note that you can use registers in the same way:</p>

<pre lang='und' xml:lang='und'>    new P0, .PerlHash
    set S0, &#34;one&#34;
    set S1, &#34;two&#34;
    set P0[S0], 1     # $P0{one} = 1
    set P0[S1], 2     # $P0{two} = 2</pre>

<p>To get the element use it in the opposite way:</p>

<pre lang='und' xml:lang='und'>    set I1, P0[&#34;one&#34;]   # $I1 = $P0{one}</pre>

<p>Notice that a hash is polymorphic on the value it holds.</p>

<p>When using a key that does not exist in the hash, the value returned depends on the register used to retrieve the element.</p>

<pre lang='und' xml:lang='und'>  set I0, P1[&#34;qwerty&#34;]  # I0 = 0
  set N0, P1[&#34;qwerty&#34;]  # N0 = 0.000
  set S0, P1[&#34;qwerty&#34;]  # S0 = &#34;&#34;
  set P0, P1[&#34;qwerty&#34;]  # typeof(P0) = PerlUndef</pre>

<p>You can check if an hash element exists before accessing it, using the <code lang='und' xml:lang='und'>exists</code> command:</p>

<pre lang='und' xml:lang='und'>  exists I0, P0[&#34;a&#34;]</pre>

<p>This example will set the value one in register <code lang='und' xml:lang='und'>I0</code> if the key exists, the value zero if it does not exist.</p>

<p>Notice that this tests if there is anything. In fact, the <code lang='und' xml:lang='und'>exists</code> command will return true if the element in that position is a PerlUndef PMC. To check if that element is defined, use the <code lang='und' xml:lang='und'>defined</code> command:</p>

<pre lang='und' xml:lang='und'>  defined I0, P0[&#34;a&#34;]</pre>

<p>TODO: Steve Fink said:</p>

<pre lang='und' xml:lang='und'>  And if there were a keys() method, then &#39;defined&#39; and &#39;exists&#39; are
  very different. (And there ought to be, and would be if we weren&#39;t
  all ignoring Leo&#39;s iterator proposal.)</pre>

<p>I need to read that proposal :&#45;)</p>

<h2><a name="Removing_Elements"
>Removing Elements <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h2>

<p>You can remove (or delete) an element from the hash using the <code lang='und' xml:lang='und'>delete</code> command:</p>

<pre lang='und' xml:lang='und'>  delete P0[&#34;a&#34;]</pre>

<p>This means that:</p>

<pre lang='und' xml:lang='und'>  new P0, .PerlHash
  set P0[&#34;a&#34;], 2
  delete P0[&#34;a&#34;]
  exists I0, P0[&#34;a&#34;]</pre>

<p>will put the value zero on register <code lang='und' xml:lang='und'>I0</code>.</p>

<h2><a name="Size_of_the_Hash"
>Size of the Hash <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h2>

<p>To get the number of keys (size of the hash) use</p>

<pre lang='und' xml:lang='und'>    set I0, P0</pre>

<p>where <code lang='und' xml:lang='und'>P0</code> is the Perl Hash PMC and <code lang='und' xml:lang='und'>I0</code> the register where to store the hash size. You can use an Perl Hash PMC on an <code lang='und' xml:lang='und'>if</code> or <code lang='und' xml:lang='und'>unless</code> command, where it will be checked for the number of elements.</p>

<h2><a name="Cloning"
>Cloning <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h2>

<p>As other PMCs, you can clone Perl hashes. If you try something like</p>

<pre lang='und' xml:lang='und'>    new P0, .PerlHash
    set P0[&#34;a&#34;], 1
    set P0[&#34;b&#34;], 2

    clone P1, P0</pre>

<p><code lang='und' xml:lang='und'>P1</code> is a copy of <code lang='und' xml:lang='und'>P0</code>, where you can do whatever you want without changing the other hash.</p>

<p>TODO: deep or shallow copy? Apparently, deep... wait untill there are news!</p>

<h2><a name="TODO"
>TODO <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h2>

<pre lang='und' xml:lang='und'> &#45; Compound keys</pre>
        </DIV>
        <P>
        <TABLE BORDER="0" WIDTH="730" CELLSPACING="0" CELLPADDING="0">
            <TR ALIGN="RIGHT">
                <TD WIDTH="590" VALIGN="MIDDLE">
                    <BR>
                    <DIV CLASS="FOOTER">
                        <DIV ALIGN="LEFT">
                        </DIV>
                    </DIV>
                </TD>
                <TD VALIGN="middle" ALIGN="center">
                    <IMG BORDER=0
                        SRC="../../../resources/parrot.small.png" 
                        ALT="parrot">
                </TD>
            </TR>
        </TABLE>
    </BODY>
</HTML>
