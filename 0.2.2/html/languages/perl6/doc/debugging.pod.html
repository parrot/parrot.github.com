<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
    "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>  
    <HEAD>
        <TITLE>Untitled</TITLE>
        <LINK REL="stylesheet" TYPE="text/css" 
            HREF="../../../../resources/perl.css" 
            TITLE="Default CSS2" media="screen">
    </HEAD>
    <BODY> 
        <A NAME="_top"></A>
        <TABLE CELLSPACING="0" WIDTH="730">
            <TR>
                <TD WIDTH="100%" COLSPAN="2" CLASS="BANNER">parrotcode: <SPAN CLASS="title">Untitled</SPAN></TD>
            </TR>
            <TR>
                <TD WIDTH="100%" COLSPAN="2"  ID="NAV" STYLE="border-bottom: 1px solid #191970;">
                    <a href="../../../../html/index.html">Contents</a> | <a href="../../../../html/languages.html">Language Implementations</a> | <a href="../../../../html/perl6.html">Perl6</a>
                </TD>
            </TR>
        </TABLE>
        <DIV CLASS="pod">

<h1><a name="Running_perl6"
>Running perl6 <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<h1><a name="Synopsis"
>Synopsis <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<p>Please run <b>perl6 &#45;&#45;help</b> to see actual options.</p>

<p>They are currently changing on demand,
there are a lot of debug options,
so keeping this document in sync is currently not worth the effort &#45;&#45; sorry.</p>

<p>Run <b>perl6 &#45;&#45;test</b> for a full test run.
If everything succeeds &#45; fine.
If not,
read on.
If you want to know more,
read on ;&#45;)</p>

<h1><a name="Getting_started"
>Getting started <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<p>For a quick test,
if everything is ok,
try a one liner:</p>

<pre lang='und' xml:lang='und'>        perl6 &#45;vwk &#45;e&#39;print(qq(Hello perl6\n))&#39;</pre>

<p>You should see the individual compilation steps and finally the output of above program.</p>

<p>If that fails, there are currently 2 steps that might be the culprit:</p>

<dl>
<dt><a name="P6C_&#45;&#45;_the_perl6_compiler"
>P6C &#45;&#45; the perl6 compiler</a></dt><p class="pad"></p>

<dt><a name="parrot_&#45;&#45;_the_parrot_interpreter"
>parrot &#45;&#45; the parrot interpreter</a></dt><p class="pad"></p>
</dl>

<h1><a name="Individual_steps"
>Individual steps <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<h2><a name="P6C"
>P6C <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h2>

<p>The perl6 compiler needs an uptodate grammar to work correctly. If you have modified the grammar in P6C/Parser.pm, you will need to make sure Perl6grammar.pm is regenerated by running</p>

<pre lang='und' xml:lang='und'>        perl6 &#45;&#45;force&#45;grammar &#45;e&#39;print qq(ok\n)&#39; &#45;vwk</pre>

<p>or</p>

<pre lang='und' xml:lang='und'>        rm Perl6grammar.pm ; perl6 &#45;vwk &#45;e&#39;print qq(ok\n)&#39;</pre>

<p>If this prints <i>ok</i> at the end, then it should be so. If not, let&#39;s look, what is broken.</p>

<p>The <b>perl6</b> compiler spits out PIR files (parrot intermediate language), also known as IMCC files, because this was the name of the intermediate code compiler. So, after above test you should have a file named <em lang='und' xml:lang='und'>__eval__.imc</em> in your current working directory. Have a look into it.</p>

<p>It should look similar to this:</p>

<pre lang='und' xml:lang='und'>        .sub __main
                call __setup
                call _main
                end
                ret
        .sub _main
                saveall
                $P1 = new PerlArray
                $I3 = 0
                $P1[$I3] = &#34;ok\n&#34;
                inc $I3
                .arg    $P1
                call    _print
                restoreall
                ret
        ... # more here</pre>

<p>(Comments left out for brevity). If that&#39;s ok, we go on to:</p>

<h2><a name="Parrot"
>Parrot <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h2>

<p>Parrot runs above <em lang='und' xml:lang='und'>.imc</em> file directly with the passed options.</p>

<p>Let&#39;s try it manually:</p>

<pre lang='und' xml:lang='und'>        ../../parrot &#45;G __eval__.imc</pre>

<p>This turns off DOD/GC, which might be helpful to verify, that some DOD/GC bug is still lurking around.</p>

<h1><a name="Summary"
>Summary <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<p>These individual steps are currently run by the <b>perl6</b> driver program. Though there are, as already shown above, some short cuts:</p>

<pre lang='und' xml:lang='und'>        perl6 examples/life.p6</pre>

<p>runs the program <em lang='und' xml:lang='und'>examples/life.p6</em> directly through <b>parrot</b>.</p>

<pre lang='und' xml:lang='und'>        perl6 &#45;Rj &#45;v examples/life.p6</pre>

<p>runs the program with the JIT core.</p>

<pre lang='und' xml:lang='und'>        perl6 &#45;RPd &#45;v &#45;k examples/life.p6</pre>

<p>Above option <i>&#45;k</i> tells perl6 to keep intermediate files. So you can run them with the appropriate command or you can run them with the perl6 driver. Flags after <i>&#45;R</i> are passed on to <b>parrot</b>.</p>

<pre lang='und' xml:lang='und'>        perl6 ../../examples/assembly/life.pasm
        perl6 ../../examples/assembly/mops.pasm &#45;Rj</pre>

<p>DWIM.</p>

<h1><a name="Reporting_bugs"
>Reporting bugs <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<p>If any of the above steps fail, please report the bug to &#60;bugs&#45;parrot@bugs6.perl.org&#62; with the output of</p>

<pre lang='und' xml:lang='und'>        perl6 &#45;&#45;version</pre>

<p>and a description of the problem. If all tests are failing, please provide the intermediate files for one of the tests by running e.g.</p>

<pre lang='und' xml:lang='und'>        perl6 &#45;wk t/compiler/{testnumber}_{subtest}.p6</pre>

<p>If particular tests fail, please provide the test summary plus symptomatic cases of failures.</p>

<p>And finally, don&#39;t forget to report your OS environment including involved components like <b>perl</b> and C compiler.</p>

<p>Thanks.</p>

<h1><a name="AUTHOR"
>AUTHOR <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<p>Leopold T&#246;tsch &#60;lt@toetsch.at&#62;</p>

<p>$Id$</p>
        </DIV>
        <P>
        <TABLE BORDER="0" WIDTH="730" CELLSPACING="0" CELLPADDING="0">
            <TR ALIGN="RIGHT">
                <TD WIDTH="590" VALIGN="MIDDLE">
                    <BR>
                    <DIV CLASS="FOOTER">
                        <DIV ALIGN="LEFT">
                        </DIV>
                    </DIV>
                </TD>
                <TD VALIGN="middle" ALIGN="center">
                    <IMG BORDER=0
                        SRC="../../../../resources/parrot.small.png" 
                        ALT="parrot">
                </TD>
            </TR>
        </TABLE>
    </BODY>
</HTML>
