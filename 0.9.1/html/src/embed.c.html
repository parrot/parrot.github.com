<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>The Parrot embedding interface</title>
        <link rel="stylesheet" type="text/css"
            href="../../resources/parrot.css"
            media="all">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    </head>
    <body>
        <div id="wrapper">
            <div id="header">

                <img border=0 src="../../resources/parrot_logo.png" id="logo" alt="parrot">
            </div> <!-- "header" -->
            <div id="divider"></div>
            <div id="mainbody">
                <div id="breadcrumb">
                    <a href="../../html/index.html">Contents</a> &raquo; <a href="../../html/c.html">C</a> &raquo; The Parrot embedding interface
                </div>

<h1><a name="NAME"
>NAME</a></h1>

<p>src/embed.c &#45; The Parrot embedding interface</p>

<h1><a name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This file implements the Parrot embedding interface.</p>

<h2><a name="Functions"
>Functions</a></h2>

<dl>
<dt><a name="Parrot_Interp_Parrot_new"
><b><code>Parrot_Interp Parrot_new</b></code></a></dt>
Returns a new Parrot interpreter.The first created interpreter (<code>parent</code> is <code>NULL</code>) is the last one to get destroyed.
<dt><a name="void_Parrot_init_stacktop"
><b><code>void Parrot_init_stacktop</b></code></a></dt>
Initializes the new interpreter when it hasn&#39;t been initialized before.Additionally sets the stack top,
so that Parrot objects created in inner stack frames will be visible during GC stack walking code.
<b>stack_top</b> should be the address of an automatic variable in the caller&#39;s stack frame.
All unanchored Parrot objects (PMCs) must live in inner stack frames so that they are not destroyed during GC runs.Use this function when you call into Parrot before entering a run loop.
<dt><a name="void_Parrot_set_flag"
><b><code>void Parrot_set_flag</b></code></a></dt>
Sets on any of the following flags,
specified by <code>flag</code>,
in the interpreter:Flag Effect <code>PARROT_BOUNDS_FLAG</code> enable bounds checking <code>PARROT_PROFILE_FLAG</code> enable profiling,
<code>PARROT_THR_TYPE_1</code> disable variable sharing and thread communication <code>PARROT_THR_TYPE_2</code> disable variable sharing but enable thread communication <code>PARROT_THR_TYPE_3</code> enable variable sharing.
<dt><a name="void_Parrot_set_debug"
><b><code>void Parrot_set_debug</b></code></a></dt>
Set a debug flag: <code>PARROT_DEBUG_FLAG</code>.
<dt><a name="void_Parrot_set_executable_name"
><b><code>void Parrot_set_executable_name</b></code></a></dt>
Sets the name of the executable launching Parrot (see <code>pbc_to_exe</code> and the <code>parrot</code> binary).
<dt><a name="void_Parrot_set_trace"
><b><code>void Parrot_set_trace</b></code></a></dt>
Set a trace flag: <code>PARROT_TRACE_FLAG</code>
<dt><a name="void_Parrot_clear_flag"
><b><code>void Parrot_clear_flag</b></code></a></dt>
Clears a flag in the interpreter.
<dt><a name="void_Parrot_clear_debug"
><b><code>void Parrot_clear_debug</b></code></a></dt>
Clears a flag in the interpreter.
<dt><a name="void_Parrot_clear_trace"
><b><code>void Parrot_clear_trace</b></code></a></dt>
Clears a flag in the interpreter.
<dt><a name="Parrot_Int_Parrot_test_flag"
><b><code>Parrot_Int Parrot_test_flag</b></code></a></dt>
Test the interpreter flags specified in <code>flag</code>.
<dt><a name="UINTVAL_Parrot_test_debug"
><b><code>UINTVAL Parrot_test_debug</b></code></a></dt>
Test the interpreter flags specified in <code>flag</code>.
<dt><a name="UINTVAL_Parrot_test_trace"
><b><code>UINTVAL Parrot_test_trace</b></code></a></dt>
Test the interpreter flags specified in <code>flag</code>.
<dt><a name="void_Parrot_set_run_core"
><b><code>void Parrot_set_run_core</b></code></a></dt>
Sets the specified run core.
<dt><a name="void_Parrot_setwarnings"
><b><code>void Parrot_setwarnings</b></code></a></dt>
Activates the given warnings.
<dt><a name="PackFile_*_Parrot_pbc_read"
><b><code>PackFile *Parrot_pbc_read</b></code></a></dt>
Read in a bytecode,
unpack it into a <code>PackFile</code> structure,
and do fixups.
<dt><a name="void_Parrot_pbc_load"
><b><code>void Parrot_pbc_load</b></code></a></dt>
Loads the <code>PackFile</code> returned by <code>Parrot_pbc_read()</code>.
<dt><a name="static_PMC*_setup_argv"
><b><code>static PMC *setup_argv</b></code></a></dt>
Creates and returns <code>ARGS</code> array PMC.
<dt><a name="static_int_prof_sort_f"
><b><code>static int prof_sort_f</b></code></a></dt>
Sort function for profile data.
Sorts by time.
<dt><a name="static_const_char_*_op_name"
><b><code>static const char *op_name</b></code></a></dt>
Returns the name of the opcode.
<dt><a name="static_FLOATVAL_calibrate"
><b><code>static FLOATVAL calibrate</b></code></a></dt>
With this calibration,
reported times of <code>parrot &#45;p</code> almost match those measured with time <code>parrot &#45;b</code>.
<dt><a name="static_void_print_profile"
><b><code>static void print_profile</b></code></a></dt>
Prints out a profile listing.
<dt><a name="static_void_print_debug"
><b><code>static void print_debug</b></code></a></dt>
Prints GC info.
<dt><a name="static_PMC*_set_current_sub"
><b><code>static PMC *set_current_sub</b></code></a></dt>
Search the fixup table for a PMC matching the argument.
On a match,
set up the appropriate context.If no match,
set up a dummy PMC entry.
In either case,
return a pointer to the PMC.
<dt><a name="void_Parrot_runcode"
><b><code>void Parrot_runcode</b></code></a></dt>
Sets up <code>ARGV</code> and runs the ops.
<dt><a name="opcode_t_*_Parrot_debug"
><b><code>opcode_t *Parrot_debug</b></code></a></dt>
Runs the interpreter&#39;s bytecode in debugging mode.
<dt><a name="static_void_print_constant_table"
><b><code>static void print_constant_table</b></code></a></dt>
Print the contents of the constants table.
<dt><a name="void_Parrot_disassemble"
><b><code>void Parrot_disassemble</b></code></a></dt>
Disassembles and prints out the interpreter&#39;s bytecode.This is used by the Parrot disassembler.
<dt><a name="void_Parrot_run_native"
><b><code>void Parrot_run_native</b></code></a></dt>
Run the C function <code>func</code> through the program <code>[enternative, end]</code>.
This ensures that the function is run with the same setup as in other run loops.This function is used in some of the source tests in <em>t/src</em> which use the interpreter outside a runloop.</dl>

<h1><a name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><em>include/parrot/embed.h</em> and <em><a href="../docs/embed.pod.html">docs/embed.pod</a></em>.</p>

<h1><a name="HISTORY"
>HISTORY</a></h1>

<p>Initial version by Brent Dax on 2002.1.28.</p>
            </div> <!-- "mainbody" -->
            <div id="divider"></div>
            <div id="footer">
	        Copyright &copy; 2002-2009, Parrot Foundation.
            </div>
        </div> <!-- "wrapper" -->
    </body>
</html>
