<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Parrot&#39;s configuration script</title>
        <link rel="stylesheet" type="text/css"
            href="../resources/parrot.css"
            media="all">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    </head>
    <body>
        <div id="wrapper">
            <div id="header">

                <img border=0 src="../resources/parrot_logo.png" id="logo" alt="parrot">
            </div> <!-- "header" -->
            <div id="divider"></div>
            <div id="mainbody">
                <div id="breadcrumb">
                    <a href="../html/index.html">Contents</a> &raquo; <a href="../html/config.html">Configuration</a> &raquo; Parrot&#39;s configuration script
                </div>

<h1><a name="NAME"
>NAME</a></h1>

<p>Configure.pl &#45; Parrot&#39;s configuration script</p>

<h1><a name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    % perl Configure.pl [options]</pre>

<p>or:</p>

<pre>    % perl Configure.pl &#45;&#45;file=/path/to/configuration/directives</pre>

<h1><a name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This is Parrot&#39;s configuration program. It should be run to create the necessary system&#45;specific files before building Parrot.</p>

<p>We now offer two interfaces to configuration:</p>

<ul>
<li>Command&#45;Line Interface</li>

<p>All configuration options are placed on the command&#45;line. You may request interactive configuration with the <code>&#45;&#45;ask</code> option. You may not use the <code>&#45;&#45;file</code> option, as that is reserved for the Configuration&#45;File interface.</p>

<li>Configuration&#45;File Interface</li>

<p>All configuration options are placed in a special configuration file whose full path is invoked on the command&#45;line as <code>&#45;&#45;file=/path/to/configuration/directives</code> as the sole command&#45;line option. You may not request interactive configuration. For specific instructions, see <a href='#CONFIGURATION%2DFILE_INTERFACE'>&#34;CONFIGURATION&#45;FILE INTERFACE&#34;</a> below.</p>
</ul>

<h2><a name="General_Options"
>General Options</a></h2>

<dl>
<dt><a name="&#45;&#45;help"
><b><code>&#45;&#45;help</b></code></a></dt>
Prints out a description of the options and exits.
<dt><a name="&#45;&#45;version"
><b><code>&#45;&#45;version</b></code></a></dt>
Prints out the version number of Configure.pl and exits.
<dt><a name="&#45;&#45;verbose"
><b><code>&#45;&#45;verbose</b></code></a></dt>
Tells Configure.pl to output extra information about the configuration data it is setting.
<dt><a name="&#45;&#45;verbose=2"
><b><code>&#45;&#45;verbose=2</b></code></a></dt>
Tells Configure.pl to output information about i&#60;every&#62; setting added or changed.
<dt><a name="&#45;&#45;verbose&#45;step={N|regex}"
><b><code>&#45;&#45;verbose&#45;step={N|regex}</b></code></a></dt>
Run <code>&#45;&#45;verbose=2</code> for step number <code>N</code> or matching description.
<dt><a name="&#45;&#45;fatal"
><b><code>&#45;&#45;fatal</b></code></a></dt>
Tells Configure.pl to halt completely if any configuration step fails.
<dt><a name="&#45;&#45;fatal&#45;step={init::alpha,inter::beta,auto::gamma}"
><b><code>&#45;&#45;fatal&#45;step={init::alpha,inter::beta,auto::gamma}</b></code></a></dt>
Tells Configure.pl to halt completely if any configuration step in comma&#45;delimited string individually fails.
<dt><a name="&#45;&#45;nomanicheck"
><b><code>&#45;&#45;nomanicheck</b></code></a></dt>
Tells Configure.pl not to run the MANIFEST check.
<dt><a name="&#45;&#45;prefix"
><b><code>&#45;&#45;prefix</b></code></a></dt>
Sets the location where parrot will be installed.
<dt><a name="&#45;&#45;languages=&#34;list_of_languages&#34;"
><b><code>&#45;&#45;languages=&#34;list of languages&#34;</b></code></a></dt>
Specify a list of languages to process (space separated.) Used in combination with <code>&#45;&#45;step=gen::languages</code> to regenerate makefiles.
<dt><a name="&#45;&#45;ask"
><b><code>&#45;&#45;ask</b></code></a></dt>
This turns on the user prompts during configuration. Available only in Command&#45;Line interface. Not available in Configuration&#45;File interface.
<dt><a name="&#45;&#45;test"
><b><code>&#45;&#45;test</b></code></a></dt>
Run certain tests along with <em><a href="Configure.pl.html">Configure.pl</a></em>:
<dl>
<dt><a name="&#45;&#45;test=configure"
><b><code>&#45;&#45;test=configure</b></code></a></dt>
Run tests found in <em>t/configure/</em> <i>before</i> beginning configuration. These tests demonstrate that Parrot&#39;s configuration tools will work properly once configuration has begun.
<dt><a name="&#45;&#45;test=build"
><b><code>&#45;&#45;test=build</b></code></a></dt>
Run tests found in <em>t/postconfigure/</em>, <em>t/tools/pmc2cutils/</em>, <em>t/tools/ops2cutils/</em> and <em>t/tools/ops2pm/</em> <i>after</i> configuration has completed. These tests demonstrate (a) that certain of Parrot&#39;s configuration tools are working properly post&#45;configuration; and (b) that certain of Parrot&#39;s build tools will work properly once you call <em>make</em>.
<dt><a name="&#45;&#45;test"
><b><code>&#45;&#45;test</b></code></a></dt>
Run the tests described in <code>&#45;&#45;test=configure</code>, conduct configuration, then run the tests described in <code>&#45;&#45;test=build</code>.</dl>
</dl>

<h2><a name="Compile_Options"
>Compile Options</a></h2>

<dl>
<dt><a name="&#45;&#45;debugging=0"
><b><code>&#45;&#45;debugging=0</b></code></a></dt>
Debugging is turned on by default. Use this to disable it.
<dt><a name="&#45;&#45;parrot_is_shared"
><b><code>&#45;&#45;parrot_is_shared</b></code></a></dt>
Link parrot dynamically.
<dt><a name="&#45;&#45;m=32"
><b><code>&#45;&#45;m=32</b></code></a></dt>
Create a 32&#45;bit executable on 64&#45;architectures like x86_64. This option appends &#45;m32 to compiler and linker programs and does s/lib64/lib/g on link flags.This option is experimental. See <em><a href="config/init/defaults.pm.html">config/init/defaults.pm</a></em> for more.
<dt><a name="&#45;&#45;profile"
><b><code>&#45;&#45;profile</b></code></a></dt>
Turn on profiled compile (gcc only for now)
<dt><a name="&#45;&#45;cage"
><b><code>&#45;&#45;cage</b></code></a></dt>
[CAGE] compile includes many additional warnings
<dt><a name="&#45;&#45;optimize"
><b><code>&#45;&#45;optimize</b></code></a></dt>
Add perl5&#39;s $Config{optimize} to the compiler flags.
<dt><a name="&#45;&#45;optimize=flags"
><b><code>&#45;&#45;optimize=flags</b></code></a></dt>
Add <code>flags</code> to the compiler flags.
<dt><a name="&#45;&#45;inline"
><b><code>&#45;&#45;inline</b></code></a></dt>
Tell Configure that the compiler supports <code>inline</code>.
<dt><a name="&#45;&#45;cc=(compiler)"
><b><code>&#45;&#45;cc=(compiler)</b></code></a></dt>
Specify which compiler to use.
<dt><a name="&#45;&#45;ccflags=(flags)"
><b><code>&#45;&#45;ccflags=(flags)</b></code></a></dt>
Use the given compiler flags.
<dt><a name="&#45;&#45;ccwarn=(flags)"
><b><code>&#45;&#45;ccwarn=(flags)</b></code></a></dt>
Use the given compiler warning flags.
<dt><a name="&#45;&#45;cxx=(compiler)"
><b><code>&#45;&#45;cxx=(compiler)</b></code></a></dt>
Specify which C++ compiler to use (for ICU).
<dt><a name="&#45;&#45;libs=(libs)"
><b><code>&#45;&#45;libs=(libs)</b></code></a></dt>
Use the given libraries.
<dt><a name="&#45;&#45;link=(linker)"
><b><code>&#45;&#45;link=(linker)</b></code></a></dt>
Specify which linker to use.
<dt><a name="&#45;&#45;linkflags=(flags)"
><b><code>&#45;&#45;linkflags=(flags)</b></code></a></dt>
Use the given linker flags
<dt><a name="&#45;&#45;ld=(linker)"
><b><code>&#45;&#45;ld=(linker)</b></code></a></dt>
Specify which loader to use for shared libraries.
<dt><a name="&#45;&#45;ldflags=(flags)"
><b><code>&#45;&#45;ldflags=(flags)</b></code></a></dt>
Use the given loader flags for shared libraries
<dt><a name="&#45;&#45;lex=(lexer)"
><b><code>&#45;&#45;lex=(lexer)</b></code></a></dt>
Specify which lexer to use.
<dt><a name="&#45;&#45;yacc=(parser)"
><b><code>&#45;&#45;yacc=(parser)</b></code></a></dt>
Specify which parser to use.
<dt><a name="&#45;&#45;define=val1[,val2]"
><b><code>&#45;&#45;define=val1[,val2]</b></code></a></dt>
Generate &#34;#define PARROT_DEF_VAL1 1&#34; ... entries in has_header.h. Currently needed to use inet_aton for systems that lack inet_pton:
<pre>  &#45;&#45;define=inet_aton</pre>
</dl>

<h2><a name="Parrot_Options"
>Parrot Options</a></h2>

<dl>
<dt><a name="&#45;&#45;intval=(type)"
><b><code>&#45;&#45;intval=(type)</b></code></a></dt>
Use the given type for <code>INTVAL</code>.
<dt><a name="&#45;&#45;floatval=(type)"
><b><code>&#45;&#45;floatval=(type)</b></code></a></dt>
Use the given type for <code>FLOATVAL</code>.
<dt><a name="&#45;&#45;opcode=(type)"
><b><code>&#45;&#45;opcode=(type)</b></code></a></dt>
Use the given type for opcodes.
<dt><a name="&#45;&#45;ops=(files)"
><b><code>&#45;&#45;ops=(files)</b></code></a></dt>
Use the given ops files.
<dt><a name="&#45;&#45;pmc=(files)"
><b><code>&#45;&#45;pmc=(files)</b></code></a></dt>
Use the given PMC files.
<dt><a name="&#45;&#45;cgoto=0"
><b><code>&#45;&#45;cgoto=0</b></code></a></dt>
Don&#39;t build cgoto core. This is recommended when you are short of memory.
<dt><a name="&#45;&#45;jitcapable"
><b><code>&#45;&#45;jitcapable</b></code></a></dt>
Use JIT system.
<dt><a name="&#45;&#45;execcapable"
><b><code>&#45;&#45;execcapable</b></code></a></dt>
Use JIT to emit a native executable.
<dt><a name="&#45;&#45;gc=(type)"
><b><code>&#45;&#45;gc=(type)</b></code></a></dt>
Determine the type of garbage collection. The value for <code>type</code> should be one of: <code>gc</code>, <code>libc</code>, <code>malloc</code> or <code>malloc&#45;trace</code>. The default is <code>gc</code>.</dl>

<h2><a name="International_Components_For_Unicode_(ICU)_Options"
>International Components For Unicode (ICU) Options</a></h2>

<dl>
<dt><a name="&#45;&#45;icu&#45;config=/path/to/icu&#45;config"
><b><code>&#45;&#45;icu&#45;config=/path/to/icu&#45;config</b></code></a></dt>
Use the specified icu&#45;config script to determine the necessary ICU options.Use &#45;&#45;icu&#45;config=none to disable the autodetect feature. Parrot will then be build without ICU.<b>Note:</b> If you specify another ICU option than &#45;&#45;icu&#45;config, the autodetection functionality will be disabled.
<dt><a name="&#45;&#45;icushared=(linkeroption)"
><b><code>&#45;&#45;icushared=(linkeroption)</b></code></a></dt>
Linker command to link against ICU library.E.g.
<pre>   &#45;&#45;icushared=&#39;&#45;L /opt/openoffice/program &#45;licudata &#45;licuuc&#39;</pre>
(The libs in openoffice are actually version 2.2 and do not work)
<dt><a name="&#45;&#45;icuheaders=(header_dir)"
><b><code>&#45;&#45;icuheaders=(header_dir)</b></code></a></dt>
Location of ICU header files without the /unicode suffix.E.g.&#45;&#45;icuheaders=&#39;/home/lt/icu/&#39;</dl>

<h2><a name="Other_Options"
>Other Options</a></h2>

<dl>
<dt><a name="&#45;&#45;maintainer"
><b><code>&#45;&#45;maintainer</b></code></a></dt>
Use this option if you want imcc&#39;s parser and lexer files to be generated. Needs a working parser and lexer.</dl>

<h1><a name="CONFIGURATION&#45;FILE_INTERFACE"
>CONFIGURATION&#45;FILE INTERFACE</a></h1>

<p>In the Configuration&#45;File interface, unlike the Command&#45;Line interface, you may delete configuration steps or run them in an order different from that listed in Parrot::Configure::Step::List.</p>

<p>A configuration file is a plain&#45;text file located somewhere in or under your top&#45;level Parrot directory. Unless indicated otherwise, all lines in this file must have no leading whitespace. As in Perl 5, lines beginning with <code>#</code> marks are comments and are ignored during parsing of the file. Unlike Perl 5, you may not begin comments in the middle of a line.</p>

<p>The configuration file must contain these three sections:</p>

<ul>
<li>variables</li>

<ul>
<li>Section begins with line <code>=variables</code> and must be followed by at least one blank line. All other content in this section is optional.</li>

<li>Section may contain one or more <i>key=value</i> pairs which assign strings to variables much in the way that you would do in a shell script wrapping around <em><a href="Configure.pl.html">Configure.pl</a></em>.</li>

<pre>    =variables

    CC=/usr/bin/gcc
    CX=/usr/bin/g++</pre>

<p>So if you typically invoked <em><a href="Configure.pl.html">Configure.pl</a></em> by wrapping it in a shell script for the purpose of setting environmental variables used in options, like this:</p>

<pre>    CC=&#34;/usr/bin/gcc&#34;
    CX=&#34;/usr/bin/g++&#34;
    /usr/local/bin/perl Configure.pl \
        &#45;&#45;cc=&#34;$CC&#34; \
        &#45;&#45;cxx=&#34;$CX&#34; \
        &#45;&#45;link=&#34;$CX&#34; \
        &#45;&#45;ld=&#34;$CX&#34;</pre>

<p>... you would now place the assignments to <code>CC</code> and <code>CX</code> in the <i>=variables</i> section of the configuration file (as above).</p>
</ul>

<li>general</li>

<ul>
<li>Section begins with line <code>=general</code> and must be followed by at least one blank line. All other content in this section is optional.</li>

<li>This section is the location recommended for listing options whose impact is not conceptually limited to a single step. It is also the location where the variables defined in the <i>=variables</i> section are assigned to particular Parrot configuration options. Entries in this section must be either <i>option=value</i> pairs or be options which will be assigned a true value.</li>

<pre>    cc=$CC
    cxx=$CX
    link=$CX
    ld=/usr/bin/g++
    verbose</pre>

<p>Note that when the value is a variable defined in the <i>=variables</i> section, it must be preceded by a <code>$</code> sign.</p>

<li>You <i>may</i> list options here which are <i>conceptually</i> limited to a single configuration step. For example, if you wished to skip validation of the <em>MANIFEST</em> during configuration and to configure without ICU, you <i>could</i>, in this section, say:</li>

<pre>    nomanicheck
    without&#45;icu</pre>

<p>However, as we shall quickly see, it&#39;s conceptually clearer to place these values next to those configuration steps that actually use them.</p>
</ul>

<li>steps</li>

<ul>
<li>Section begins with line <code>=steps</code> and must be followed by at least one blank line, in turn followed by the list of configuration steps, followed by another blank line followed by a line <code>=cut</code> (just like POD).</li>

<li>The order in which you list the steps is the order in which they will be executed. If you delete a step from the canonical list or comment a step out, it will not be executed.</li>

<pre>    ...
    auto::snprintf
    # auto::perldoc
    auto::ctags
    ...</pre>

<p>In the above example, step <code>auto::perldoc</code> will be completely skipped. You will not see it listed as <code>....skipped</code> in <em><a href="Configure.pl.html">Configure.pl</a></em>&#39;s output; it will simply not be there at all.</p>

<li>This is the recommended location to call options whose impact is <i>conceptually</i> limited to a single configuration step. Type the configuration step&#39;s name, type a whitespace, type the option (with no leading <code>&#45;&#45;</code>) and repeat as needed for additional step&#45;specific options.</li>

<pre>    init::manifest nomanicheck
    ...</pre>

<li>This is also the location to call options whose impact is limited to one step at a time but which may be applied to more than one configuration step. The <code>fatal&#45;step</code> and <code>verbose&#45;step</code> options are the best examples of this case. Rather than requesting verbose output from all configuration steps, you may, for example, wish to designate only a few steps for verbose output:</li>

<pre>    ...
    init::hints verbose&#45;step
    init::headers
    inter::progs fatal&#45;step
    ...
    auto::gcc verbose&#45;step
    ...</pre>

<p>In the above example, <em><a href="Configure.pl.html">Configure.pl</a></em> will grind to a halt if <code>inter::progs</code> does not complete successfully. You will get verbose output only from <code>init::hints</code> and <code>auto::gcc</code>; the other 60+ steps will be terse.</p>

<li>Nothing prevents you from listing general options anywhere in this section.</li>

<pre>    init::manifest nomanicheck cc=$CC ld=/usr/bin/g++ verbose
    init::defaults
    ...</pre>

<p>That will work &#45;&#45; but why would you want to do something that messy?</p>
</ul>
</ul>

<h2><a name="Example"
>Example</a></h2>

<p>Ignoring leading whitespace, this is an example of a correctly formed configuration file.</p>

<pre>    =variables

    CC=/usr/bin/gcc
    CX=/usr/bin/g++

    =general

    cc=$CC
    cxx=$CX
    link=$CX
    ld=/usr/bin/g++

    =steps

    init::manifest nomanicheck
    init::defaults
    init::install
    init::hints verbose&#45;step
    init::headers
    inter::progs
    inter::make
    inter::lex
    inter::yacc
    auto::gcc
    auto::glibc
    auto::backtrace
    auto::fink
    auto::macports
    auto::msvc
    auto::attributes
    auto::warnings
    init::optimize
    inter::shlibs
    inter::libparrot
    inter::charset
    inter::encoding
    inter::types
    auto::ops
    auto::pmc
    auto::alignptrs
    auto::headers
    auto::sizes
    auto::byteorder
    auto::va_ptr
    auto::format
    auto::isreg
    auto::arch
    auto::jit
    auto::cpu
    auto::funcptr
    auto::cgoto
    auto::inline
    auto::gc
    auto::memalign
    auto::signal
    auto::socklen_t
    auto::env
    auto::gmp
    auto::readline
    auto::gdbm
    auto::pcre
    auto::opengl
    auto::crypto
    auto::gettext
    auto::snprintf
    # auto::perldoc
    auto::ctags
    auto::revision
    auto::icu
    gen::config_h
    gen::core_pmcs
    gen::crypto
    gen::parrot_include
    gen::opengl
    gen::call_list
    gen::languages
    gen::makefiles
    gen::platform
    gen::config_pm

    =cut</pre>

<p>You may see how this works in practice by calling:</p>

<pre>    perl Configure.pl &#45;&#45;file=xconf/samples/yourfoobar</pre>

<p>or</p>

<pre>    perl Configure.pl &#45;&#45;file=xconf/samples/testfoobar</pre>

<h1><a name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><em><a href="lib/Parrot/Configure.pm.html">lib/Parrot/Configure.pm</a></em>, <em><a href="lib/Parrot/Configure/Step.pm.html">lib/Parrot/Configure/Step.pm</a></em>, <em><a href="docs/configuration.pod.html">docs/configuration.pod</a></em></p>
            </div> <!-- "mainbody" -->
            <div id="divider"></div>
            <div id="footer">
	        Copyright &copy; 2002-2009, Parrot Foundation.
            </div>
        </div> <!-- "wrapper" -->
    </body>
</html>
