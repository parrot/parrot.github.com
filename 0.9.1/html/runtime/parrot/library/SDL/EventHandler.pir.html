<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>base class for application&#45;specific SDL event handlers</title>
        <link rel="stylesheet" type="text/css"
            href="../../../../../resources/parrot.css"
            media="all">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    </head>
    <body>
        <div id="wrapper">
            <div id="header">

                <img border=0 src="../../../../../resources/parrot_logo.png" id="logo" alt="parrot">
            </div> <!-- "header" -->
            <div id="divider"></div>
            <div id="mainbody">
                <div id="breadcrumb">
                    <a href="../../../../../html/index.html">Contents</a> &raquo; <a href="../../../../../html/libs.html">Libraries</a> &raquo; base class for application&#45;specific SDL event handlers
                </div>

<h1><a name="NAME"
>NAME</a></h1>

<p>SDL::EventHandler &#45; base class for application&#45;specific SDL event handlers</p>

<h1><a name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    # load the event class and this library
    load_bytecode &#39;library/SDL/Event.pir&#39;
    load_bytecode &#39;library/SDL/EventHandler.pir&#39;

    # subclass this class
    .local pmc parent_class
    .local pmc class_type

    get_class parent_class, &#39;SDL::EventHandler&#39;
    subclass class_type, parent_class, &#39;My::Event::Handler&#39;

    # define your overridden methods
    .sub key_down_down :method
        .param pmc event
        .param pmc event_args

        # ...

    .end

    # create an event handler object
    .local pmc event_handler
    event_handler = new &#39;My::Event::Handler&#39;

    # create and populate some event_arguments
    .local pmc event_args

    new event_args, &#39;Hash&#39;
    event_args[ &#39;main_surface&#39; ] = main_surface
    event_args[ &#39;sprite_list&#39;  ] = sprites

    # create a new event object
    .local pmc event
    event = new &#39;SDL::Event&#39;

    # ... and process events
    event.&#39;process_events&#39;( event_handler, handler_args )</pre>

<h1><a name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>SDL::EventHandler is a parent class for all event handlers in SDL Parrot programs. Subclass this class and override the methods that correspond to the events you want to handle.</p>

<h1><a name="METHODS"
>METHODS</a></h1>

<p>SDL::EventHandler provides the following methods:</p>

<dl>
<dt><a name="key_down(_event,_event_args_)"
>key_down( event, event_args )</a></dt>
Dispatches a key down event to the appropriate <code>key_down_<i>keyname</i></code> method, if one exists. Otherwise, does nothing.Override this if you want to change the way dispatching happens or to do something different for <i>all</i> key down events. In general, you will probably want to override the <code>key_down_*</code> methods instead.XXX The <i>*</i> above i.e. the actually key_name isn&#39;t really documented. But:
<pre>  $ perldoc SDL::Event</pre>
might be helpful (for now), if you remove <i>SDLK_</i> and lowercase the remainder &#45; sorry.
<pre>  .sub key_down_q         # &#39;q&#39; key
  .sub key_down_down      # &#60;down&#62; arrow key
  .sub key_down_kp_plus   # &#60;keypad&#45;plus&#62; key
  ...</pre>

<dt><a name="key_up(_event,_event_args_)"
>key_up( event, event_args )</a></dt>
Dispatches a key up event to the appropriate <code>key_up<i>keyname</i></code> method, if one exists. Otherwise, does nothing.Override this if you want to change the way dispatching happens or to do something different for <i>all</i> key up events. In general, you will probably want to override the <code>key_up_*</code> methods instead.</dl>

<h2><a name="Key_Event_Methods"
>Key Event Methods</a></h2>

<p>Key event methods have names of the form <code>key_<i>eventtype</i>_<i>keyname</i></code>. That is, to handle a key down event for the Escape key, override the method <code>key_down_escape</code>. Key names follow the SDL naming convention, except that key names are in all lowercase.</p>

<p>Unless you override <code>key_down</code> or <code>key_up</code> and do something different, all of these methods will receive one argument, the <code>event_args</code> hash passed to <code>SDL::Event::wait_event()</code>. Use this hash to store and to retrieve data between events, particularly your main surface and any sprites or other surfaces.</p>

<h2><a name="Other_Event_Methods"
>Other Event Methods</a></h2>

<p>In addition, you can override the following methods to handle their event types.</p>

<ul>
<li>active_event</li>

<li>mouse_motion</li>

<li>mouse_button_down</li>

<li>mouse_button_up</li>

<p>Synopsis for mouse event handler:</p>

<pre>  .sub mouse_button_up :method
    .param pmc event
    .param pmc args

    .local int b, x, y
    event = event.&#39;event&#39;( &#39;MouseButton&#39; )
    b = event[&#39;state&#39;]    # 1 = left, 2 = middle, 3 = right
    x = event[&#39;x&#39;]
    y = event[&#39;y&#39;]
    ...</pre>

<li>joy_axis_motion</li>

<li>joy_ball_motion</li>

<li>joy_hat_motion</li>

<li>joy_button_down</li>

<li>joy_button_up</li>

<li>quit</li>

<li>sys_wm_event</li>

<li>video_resize</li>

<li>video_expose</li>

<li>event_reserved_a</li>

<li>event_reserved_b</li>

<li>event_reserved_2</li>

<li>event_reserved_3</li>

<li>event_reserved_4</li>

<li>event_reserved_5</li>

<li>event_reserved_6</li>

<li>event_reserved_7</li>
</ul>

<p>By default, these methods do nothing. They all take two arguments, the SDL::Event object representing the incoming event and the <code>event_args</code> hash storing data between events.</p>

<p>At the very least, you should override <code>quit()</code>.</p>

<h1><a name="AUTHOR"
>AUTHOR</a></h1>

<p>Written and maintained by chromatic, &#60;chromatic at wgz dot org&#62;. Designed by Allison Randal. Please send patches, feedback, and suggestions to the Perl 6 Internals mailing list.</p>

<h1><a name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>Copyright (C) 2004&#45;2008, Parrot Foundation.</p>
            </div> <!-- "mainbody" -->
            <div id="divider"></div>
            <div id="footer">
	        Copyright &copy; 2002-2009, Parrot Foundation.
            </div>
        </div> <!-- "wrapper" -->
    </body>
</html>
