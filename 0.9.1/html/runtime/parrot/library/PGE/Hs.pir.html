<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Untitled</title>
        <link rel="stylesheet" type="text/css"
            href="../../../../../resources/parrot.css"
            media="all">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    </head>
    <body>
        <div id="wrapper">
            <div id="header">

                <img border=0 src="../../../../../resources/parrot_logo.png" id="logo" alt="parrot">
            </div> <!-- "header" -->
            <div id="divider"></div>
            <div id="mainbody">
                <div id="breadcrumb">
                    <a href="../../../../../html/index.html">Contents</a> &raquo; <a href="../../../../../html/libs.html">Libraries</a> &raquo; Untitled
                </div>

<h1><a name="Title"
>Title</a></h1>

<p>PGE::Hs &#45; Match and display PGE rules as Haskell expressions</p>

<h1><a name="SYNOPSIS"
>SYNOPSIS</a></h1>

<p>(You need to run <code>make PGE&#45;Hs.pbc</code> in <em>compilers/pge</em> first.)</p>

<pre>    .sub _main
        load_bytecode &#34;PGE.pbc&#34;
        load_bytecode &#34;PGE/Hs.pir&#34;
        $P0 = get_hll_global [&#34;PGE&#34;;&#34;Hs&#34;], &#34;match&#34;
        $S0 = $P0(&#34;Hello&#34;, &#34;(...)*$&#34;)
        print $S0   # PGE_Match 2 5 [PGE_Array [PGE_Match 2 5 [] []]] []
    .end</pre>

<h1><a name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The Haskell&#45;side data structure is defined thus:</p>

<pre>    data MatchPGE
        = PGE_Match Int Int [MatchPGE] [(String, MatchPGE)]
        | PGE_Array [MatchPGE]
        | PGE_String String
        | PGE_Fail
        deriving (Show, Eq, Ord, Read)</pre>

<p>This <em>PGE&#45;Hs.pbc</em> is built separately (not by default). The reason is because it&#39;s intended to be bundled with Pugs, so as to make Pugs usable with vanilla Parrot from 0.2.0 on, using either an external <em>parrot</em> executable, or a linked <em>libparrot</em>.</p>

<p>In external <em>parrot</em> mode, Parrot&#39;s include path looks into the <em>.pbc</em> files inside the library tree first, then look into the current directory, <em>.</em>. Hence this file includes, rather than loads, the <em>PGE.pbc</em> library, because if Pugs is shipped with its own copy of <em>PGE.pbc</em>, Parrot would ignore that file and prefer to load the one in the Parrot tree instead.</p>

<p>Granted, it is possible to pass in Pugs&#39;s own library path into an environment variable (maybe <code>PARROT_LIBS</code>?), but as this was not in the 0.3.0 release, I (audreyt) decided to take the easy route. :&#45;)</p>

<h1><a name="CAVEATS"
>CAVEATS</a></h1>

<p>This is an initial sketch. The dump format may change, and the whole thing may be taken out or refactored away at any moment.</p>
            </div> <!-- "mainbody" -->
            <div id="divider"></div>
            <div id="footer">
	        Copyright &copy; 2002-2009, Parrot Foundation.
            </div>
        </div> <!-- "wrapper" -->
    </body>
</html>
