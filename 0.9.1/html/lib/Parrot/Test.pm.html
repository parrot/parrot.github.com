<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>testing routines for Parrot and language implementations</title>
        <link rel="stylesheet" type="text/css"
            href="../../../resources/parrot.css"
            media="all">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    </head>
    <body>
        <div id="wrapper">
            <div id="header">

                <img border=0 src="../../../resources/parrot_logo.png" id="logo" alt="parrot">
            </div> <!-- "header" -->
            <div id="divider"></div>
            <div id="mainbody">
                <div id="breadcrumb">
                    <a href="../../../html/index.html">Contents</a> &raquo; <a href="../../../html/perl.html">Perl Modules</a> &raquo; testing routines for Parrot and language implementations
                </div>

<h1><a name="NAME"
>NAME</a></h1>

<p>Parrot::Test &#45; testing routines for Parrot and language implementations</p>

<h1><a name="SYNOPSIS"
>SYNOPSIS</a></h1>

<p>Set the number of tests to be run like this:</p>

<pre>    use Parrot::Test tests =&#62; 8;</pre>

<p>Write individual tests like this:</p>

<pre>    pasm_output_is(&#60;&#60;&#39;CODE&#39;, &#60;&#60;&#39;OUTPUT&#39;, &#34;description of test&#34;);
    print &#34;this is ok\n&#34;
    end
    CODE
    this is ok
    OUTPUT</pre>

<h1><a name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This module provides various Parrot&#45;specific test functions.</p>

<h2><a name="Functions"
>Functions</a></h2>

<p>The parameter <code>$language</code> is the language of the code. The parameter <code>$code</code> is the code that should be executed or transformed. The parameter <code>$expected</code> is the expected result. The parameter <code>$unexpected</code> is the unexpected result. The parameter <code>$description</code> should describe the test.</p>

<p>Any optional parameters can follow. For example, to mark a test as a TODO test (where you know the implementation does not yet work), pass:</p>

<pre>    todo =&#62; &#39;reason to consider this TODO&#39;</pre>

<p>at the end of the argument list. Valid reasons include <code>bug</code>, <code>unimplemented</code>, and so on.</p>

<p><b>Note:</b> you <i>must</i> use a <code>$description</code> with TODO tests.</p>

<dl>
<dt><a name="language_output_is(_$language,_$code,_$expected,_$description)"
><b><code>language_output_is( $language, $code, $expected, $description)</b></code></a></dt>

<dt><a name="language_error_output_is(_$language,_$code,_$expected,_$description)"
><b><code>language_error_output_is( $language, $code, $expected, $description)</b></code></a></dt>
Runs a language test and passes the test if a string comparison of the output with the expected result it true. For <code>language_error_output_is()</code> the exit code also has to be non&#45;zero.
<dt><a name="language_output_like(_$language,_$code,_$expected,_$description)"
><b><code>language_output_like( $language, $code, $expected, $description)</b></code></a></dt>

<dt><a name="language_error_output_like(_$language,_$code,_$expected,_$description)"
><b><code>language_error_output_like( $language, $code, $expected, $description)</b></code></a></dt>
Runs a language test and passes the test if the output matches the expected result. For <code>language_error_output_like()</code> the exit code also has to be non&#45;zero.
<dt><a name="language_output_isnt(_$language,_$code,_$expected,_$description)"
><b><code>language_output_isnt( $language, $code, $expected, $description)</b></code></a></dt>

<dt><a name="language_error_output_isnt(_$language,_$code,_$expected,_$description)"
><b><code>language_error_output_isnt( $language, $code, $expected, $description)</b></code></a></dt>
Runs a language test and passes the test if a string comparison if a string comparison of the output with the unexpected result is false. For <code>language_error_output_isnt()</code> the exit code also has to be non&#45;zero.
<dt><a name="pasm_output_is($code,_$expected,_$description)"
><b><code>pasm_output_is($code, $expected, $description)</b></code></a></dt>
Runs the Parrot Assembler code and passes the test if a string comparison of the output with the expected result it true.
<dt><a name="pasm_error_output_is($code,_$expected,_$description)"
><b><code>pasm_error_output_is($code, $expected, $description)</b></code></a></dt>
Runs the Parrot Assembler code and passes the test if a string comparison of the output with the expected result it true <i>and</i> if Parrot exits with a non&#45;zero exit code.
<dt><a name="pasm_output_like($code,_$expected,_$description)"
><b><code>pasm_output_like($code, $expected, $description)</b></code></a></dt>
Runs the Parrot Assembler code and passes the test if the output matches <code>$expected</code>.
<dt><a name="pasm_error_output_like($code,_$expected,_$description)"
><b><code>pasm_error_output_like($code, $expected, $description)</b></code></a></dt>
Runs the Parrot Assembler code and passes the test if the output matches <code>$expected</code> <i>and</i> if Parrot exits with a non&#45;zero exit code.
<dt><a name="pasm_output_isnt($code,_$unexpected,_$description)"
><b><code>pasm_output_isnt($code, $unexpected, $description)</b></code></a></dt>
Runs the Parrot Assembler code and passes the test if a string comparison of the output with the unexpected result is false.
<dt><a name="pasm_error_output_isnt($code,_$unexpected,_$description)"
><b><code>pasm_error_output_isnt($code, $unexpected, $description)</b></code></a></dt>
Runs the Parrot Assembler code and passes the test if a string comparison of the output with the unexpected result is false <i>and</i> if Parrot exits with a non&#45;zero exit code.
<dt><a name="pir_output_is($code,_$expected,_$description)"
><b><code>pir_output_is($code, $expected, $description)</b></code></a></dt>
Runs the PIR code and passes the test if a string comparison of output with the expected result is true.
<dt><a name="pir_error_output_is($code,_$expected,_$description)"
><b><code>pir_error_output_is($code, $expected, $description)</b></code></a></dt>
Runs the PIR code and passes the test if a string comparison of output with the expected result is true <i>and</i> if Parrot exits with a non&#45;zero exit code.
<dt><a name="pir_output_like($code,_$expected,_$description)"
><b><code>pir_output_like($code, $expected, $description)</b></code></a></dt>
Runs the PIR code and passes the test if output matches the expected result.
<dt><a name="pir_error_output_like($code,_$expected,_$description)"
><b><code>pir_error_output_like($code, $expected, $description)</b></code></a></dt>
Runs the PIR code and passes the test if output matches the expected result <i>and</i> if Parrot exits with a non&#45;zero exit code.
<dt><a name="pir_output_isnt($code,_$unexpected,_$description)"
><b><code>pir_output_isnt($code, $unexpected, $description)</b></code></a></dt>
Runs the PIR code and passes the test if a string comparison of the output with the unexpected result is false.
<dt><a name="pir_error_output_isnt($code,_$unexpected,_$description)"
><b><code>pir_error_output_isnt($code, $unexpected, $description)</b></code></a></dt>
Runs the PIR code and passes the test if a string comparison of the output with the unexpected result is false <i>and</i> if Parrot exits with a non&#45;zero exit code.
<dt><a name="pbc_output_is($code,_$expected,_$description)"
><b><code>pbc_output_is($code, $expected, $description)</b></code></a></dt>
Runs the Parrot Bytecode and passes the test if a string comparison of output with the expected result is true.
<dt><a name="pbc_error_output_is($code,_$expected,_$description)"
><b><code>pbc_error_output_is($code, $expected, $description)</b></code></a></dt>
Runs the Parrot Bytecode and passes the test if a string comparison of the output with the expected result is true <i>and</i> if Parrot exits with a non&#45;zero exit code.
<dt><a name="pbc_output_like($code,_$expected,_$description)"
><b><code>pbc_output_like($code, $expected, $description)</b></code></a></dt>
Runs the Parrot Bytecode and passes the test if output matches the expected result.
<dt><a name="pbc_error_output_like($code,_$expected,_$description)"
><b><code>pbc_error_output_like($code, $expected, $description)</b></code></a></dt>
Runs the Parrot Bytecode and passes the test if output matches the expected result <i>and</i> if Parrot exits with a non&#45;zero exit code.
<dt><a name="pbc_output_isnt($code,_$unexpected,_$description)"
><b><code>pbc_output_isnt($code, $unexpected, $description)</b></code></a></dt>
Runs the Parrot Bytecode and passes the test if a string comparison of output with the unexpected result is false.
<dt><a name="pbc_error_output_isnt($code,_$unexpected,_$description)"
><b><code>pbc_error_output_isnt($code, $unexpected, $description)</b></code></a></dt>
Runs the Parrot Bytecode and passes the test if a string comparison of output with the unexpected result is false <i>and</i> if Parrot exits with a non&#45;zero exit code.
<dt><a name="pir_2_pasm_is($code,_$expected,_$description)"
><b><code>pir_2_pasm_is($code, $expected, $description)</b></code></a></dt>
Compile the Parrot Intermediate Representation and generate Parrot Assembler Code. Pass if the generated PASM is $expected.
<dt><a name="pir_2_pasm_like($code,_$expected,_$description)"
><b><code>pir_2_pasm_like($code, $expected, $description)</b></code></a></dt>
Compile the Parrot Intermediate Representation and generate Parrot Assembler Code. Pass if the generated PASM matches $expected.
<dt><a name="pir_2_pasm_isnt($code,_$unexpected,_$description)"
><b><code>pir_2_pasm_isnt($code, $unexpected, $description)</b></code></a></dt>
Compile the Parrot Intermediate Representation and generate Parrot Assembler Code. Pass unless the generated PASM is $expected.
<dt><a name="c_output_is($code,_$expected,_$description,_%options)"
><b><code>c_output_is($code, $expected, $description, %options)</b></code></a></dt>
Compiles and runs the C code, passing the test if a string comparison of output with the expected result it true. Valid options are &#39;todo&#39; =&#62; &#39;reason&#39; to mark a TODO test.
<dt><a name="c_output_like($code,_$expected,_$description,_%options)"
><b><code>c_output_like($code, $expected, $description, %options)</b></code></a></dt>
Compiles and runs the C code, passing the test if output matches the expected result. Valid options are &#39;todo&#39; =&#62; &#39;reason&#39; to mark a TODO test.
<dt><a name="c_output_isnt($code,_$unexpected,_$description,_%options)"
><b><code>c_output_isnt($code, $unexpected, $description, %options)</b></code></a></dt>
Compiles and runs the C code, passing the test if a string comparison of output with the unexpected result is false. Valid options are &#39;todo&#39; =&#62; &#39;reason&#39; to mark a TODO test.
<dt><a name="example_output_is(_$example_f,_$expected,_@todo_)"
><b><code>example_output_is( $example_f, $expected, @todo )</b></code></a></dt>

<dt><a name="example_output_like(_$example_f,_$expected,_@todo_)"
><b><code>example_output_like( $example_f, $expected, @todo )</b></code></a></dt>

<dt><a name="example_output_isnt(_$example_f,_$expected,_@todo_)"
><b><code>example_output_isnt( $example_f, $expected, @todo )</b></code></a></dt>
Determines the language, PIR or PASM, from the extension of <code>$example_f</code> and runs the appropriate <code>^language_output_(is|like|isnt)</code> sub. <code>$example_f</code> is used as a description, so don&#39;t pass one.
<dt><a name="skip($why,_$how_many)"
><b><code>skip($why, $how_many)</b></code></a></dt>
Use within a <code>SKIP: { ... }</code> block to indicate why and how many tests to skip, just like in Test::More.
<dt><a name="run_command($command,_%options)"
><b><code>run_command($command, %options)</b></code></a></dt>
Run the given $command in a cross&#45;platform manner.%options include...
<pre>    STDOUT    name of file to redirect STDOUT to
    STDERR    name of file to redirect STDERR to
    CD        directory to run the command in</pre>
For example:
<pre>    # equivalent to &#34;cd some_dir &#38;&#38; make test&#34;
    run_command(&#34;make test&#34;, CD =&#62; &#34;some_dir&#34;);</pre>

<dt><a name="slurp_file($file_name)"
><b><code>slurp_file($file_name)</b></code></a></dt>
Read the whole file $file_name and return the content as a string. This is just an alias for <code>Parrot::BuildUtil::slurp_file</code>.
<dt><a name="convert_line_endings($text)"
><b><code>convert_line_endings($text)</b></code></a></dt>
Convert Win32 style line endins with Unix style line endings.
<dt><a name="path_to_parrot()"
><b><code>path_to_parrot()</b></code></a></dt>
Construct an absolute path to the parrot root dir.
<dt><a name="per_test(_$ext,_$test_no_)"
><b><code>per_test( $ext, $test_no )</b></code></a></dt>
Construct a path for a temporary files. Takes <code>$0</code> into account.
<dt><a name="write_code_to_file($code,_$code_f)"
><b><code>write_code_to_file($code, $code_f)</b></code></a></dt>
Writes <code>$code</code> into the file <code>$code_f</code>.
<dt><a name="generate_languages_functions"
><b><code>generate_languages_functions</b></code></a></dt>
Generate functions that are only used by a couple of Parrot::Test::&#60;lang&#62; modules. See RT#43266. This implementation is experimental and currently only works for languages/pipp.</dl>

<h1><a name="SEE_ALSO"
>SEE ALSO</a></h1>

<dl>
<dt><a name="t/harness"
><em><a href="../../t/harness.html">t/harness</a></em></a></dt>

<dt><a name="docs/tests.pod"
><em><a href="../../docs/tests.pod.html">docs/tests.pod</a></em></a></dt>

<dt><a name="&#34;More&#34;_in_Test"
><a href='TODO#More'>&#34;More&#34; in Test</a></a></dt>

<dt><a name="&#34;Builder&#34;_in_Test"
><a href='TODO#Builder'>&#34;Builder&#34; in Test</a></a></dt>
</dl>
            </div> <!-- "mainbody" -->
            <div id="divider"></div>
            <div id="footer">
	        Copyright &copy; 2002-2009, Parrot Foundation.
            </div>
        </div> <!-- "wrapper" -->
    </body>
</html>
