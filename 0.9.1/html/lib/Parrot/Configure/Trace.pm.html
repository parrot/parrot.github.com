<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Trace development of Parrot::Configure object through the configuration steps</title>
        <link rel="stylesheet" type="text/css"
            href="../../../../resources/parrot.css"
            media="all">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    </head>
    <body>
        <div id="wrapper">
            <div id="header">

                <img border=0 src="../../../../resources/parrot_logo.png" id="logo" alt="parrot">
            </div> <!-- "header" -->
            <div id="divider"></div>
            <div id="mainbody">
                <div id="breadcrumb">
                    <a href="../../../../html/index.html">Contents</a> &raquo; <a href="../../../../html/perl.html">Perl Modules</a> &raquo; Trace development of Parrot::Configure object through the configuration steps
                </div>

<h1><a name="NAME"
>NAME</a></h1>

<p>Parrot::Configure::Trace &#45; Trace development of Parrot::Configure object through the configuration steps</p>

<h1><a name="SYNOPSIS"
>SYNOPSIS</a></h1>

<p>When calling <em>perl Configure.pl</em>:</p>

<pre>    $ perl Configure.pl &#45;&#45;configure_trace</pre>

<p>After configuration has completed:</p>

<pre>    use Parrot::Configure::Trace;

    $obj = Parrot::Configure::Trace&#45;&#62;new();

    $steps_list = $obj&#45;&#62;list_steps();

    $steps_index = $obj&#45;&#62;index_steps();

    $attr = $obj&#45;&#62;trace_options_c( {
        attr        =&#62; &#39;some_attr&#39;,
        verbose     =&#62; 1,               # optional
    } );

    $attr = $obj&#45;&#62;trace_options_triggers( {
        trig        =&#62; &#39;some_trig&#39;,
        verbose     =&#62; 1,               # optional
    } );

    $attr = $obj&#45;&#62;trace_data_c( {
        attr        =&#62; &#39;some_attr&#39;,
        verbose     =&#62; 1,               # optional
    } );

    $list_diff_steps = $obj&#45;&#62;diff_data_c( {
        attr        =&#62; &#39;some_attr&#39;,
    } );

    $attr = $obj&#45;&#62;trace_data_triggers( {
        trig        =&#62; &#39;some_trig&#39;,
        verbose     =&#62; 1,               # optional
    } );

    $state = $obj&#45;&#62;get_state_at_step($step_no);

    $state = $obj&#45;&#62;get_state_at_step(&#39;some::step&#39;);</pre>

<h1><a name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This module provides ways to trace the evolution of the data structure within the Parrot::Configure object over the various steps in the configuration process. An understanding of this data structure&#39;s development may be useful to Parrot developers working on the configuration process or its results.</p>

<p>To make use of Parrot::Configure::Trace&#39;s methods, first configure with the <code>&#45;&#45;configure_trace</code> option. As configuration proceeds through what are currently 56 individual steps, the state of the Parrot::Configuration object is recorded in a Perl array reference. That array ref is stored on disk via the Storable module in a file called <em>.configure_trace.sto</em> found in the top&#45;level of your Parrot sandbox directory.</p>

<p>Once that storable file has been created, you can write programs which retrieve its data into a Parrot::Configure::Trace object and then call methods on that object.</p>

<h1><a name="METHODS"
>METHODS</a></h1>

<h2><a name="new()"
><code>new()</code></a></h2>

<pre>    $obj = Parrot::Configure::Trace&#45;&#62;new();</pre>

<ul>
<li>Purpose</li>

<p>Parrot::Configure::Trace constructor. Retrieve configuration data recorded on disk over the course of the configuration steps and populate a Parrot::Configure::Trace object with that data.</p>

<li>Arguments</li>

<p>None currently required. However, to provide for future extensibility, you may provide a reference to a hash in which various attributes are set which will affect the Parrot::Configure::Trace object. Currently, the only such attribute is <code>storable</code>, whose value is the name of the Storable file holding configuration data if that file is named something other than <em>.configure_trace.sto</em>.</p>

<li>Return Value</li>

<p>Parrot::Configure::Trace object.</p>

<li>Comment</li>

<p>The Parrot::Configure::Trace object is a blessed array reference. Element <code>0</code> of that array is a reference to an array holding the names of the individual configuration steps; elements <code>1</code> through <code>$#array</code> hold the state of the Parrot::Configure object at the conclusion of each step.</p>

<p>Since the purpose of Parrot::Configure::Trace is to track the <b>evolution</b> of the Parrot::Configure object through the configuration steps, there is no point in recording information about those parts of the Parrot::Configure object which are invariant. The <code>steps</code> element is set in <em><a href="../../../Configure.pl.html">Configure.pl</a></em> before the configuration steps are run and does not change during those steps. Hence, no information about the <code>steps</code> element is recorded and no methods are provided herein to retrieve that information. Since the <code>options</code> and (especially) <code>data</code> elements of the Parrot::Configure object do change over the course of configuration, methods are provided to access that data.</p>
</ul>

<h2><a name="list_steps()"
><code>list_steps()</code></a></h2>

<pre>    $steps_list = $obj&#45;&#62;list_steps();</pre>

<ul>
<li>Purpose</li>

<p>Provide list of the names of the configuration steps.</p>

<li>Arguments</li>

<p>None.</p>

<li>Return Value</li>

<p>Array reference:</p>

<pre>    [
        &#39;init::manifest&#39;,
        &#39;init::defaults&#39;,
        ...
        &#39;gen::config_pm&#39;
    ]</pre>
</ul>

<h2><a name="index_steps()"
><code>index_steps()</code></a></h2>

<pre>    $steps_index = $obj&#45;&#62;index_steps();</pre>

<ul>
<li>Purpose</li>

<p>Provide lookup table showing which step number a given configuration step is.</p>

<li>Arguments</li>

<p>None.</p>

<li>Return Value</li>

<p>Hash reference:</p>

<pre>    {
        &#39;inter::ops&#39;        =&#62; 19,
        &#39;init::optimize&#39;    =&#62; 13,
        ...
        &#39;init::defaults&#39;    =&#62;  2,
    }</pre>
</ul>

<h2><a name="trace_options_c()"
><code>trace_options_c()</code></a></h2>

<ul>
<li>Purpose</li>

<p>Provide a list of the values which a given attribute in the <code>{options}&#45;</code>{c}&#62; part of the Parrot::Configure object takes over the course of the configuration steps.</p>

<li>Arguments</li>

<p>Hash reference. Key <code>attr</code> is mandatory; it is the key whose value you wish to trace over the course of the configuration steps. Key <code>verbose</code> is optional.</p>

<li>Return Value</li>

<p>Array reference. Element <code>n</code> of this array holds the value of the attribute in the <code>{options}&#45;</code>{c}&#62; part of the Parrot::Configure object at configuration step <code>n + 1</code>.</p>

<p>If, however, <code>verbose</code> is set, each element <code>n</code> of the array holds a hash reference where the hash key is the name of configuration step <code>n + 1</code> and the value is the value of the attribute at step <code>n + 1</code>.</p>
</ul>

<h2><a name="trace_data_triggers()"
><code>trace_data_triggers()</code></a></h2>

<ul>
<li>Purpose</li>

<p>Provide a list of the values which a given attribute in the <code>{options}&#45;</code>{triggers}&#62; part of the Parrot::Configure object takes over the course of the configuration steps.</p>

<li>Arguments</li>

<p>Hash reference. Key <code>attr</code> is mandatory; it is the key whose value you wish to trace over the course of the configuration steps. Key <code>verbose</code> is optional.</p>

<li>Return Value</li>

<p>Array reference. Element <code>n</code> of this array holds the value of the attribute in the <code>{options}&#45;</code>{triggers}&#62; part of the Parrot::Configure object at configuration step <code>n + 1</code>.</p>

<p>If, however, <code>verbose</code> is set, each element <code>n</code> of the array holds a hash reference where the hash key is the name of configuration step <code>n + 1</code> and the value is the value of the attribute at step <code>n + 1</code>.</p>
</ul>

<h2><a name="trace_data_c()"
><code>trace_data_c()</code></a></h2>

<ul>
<li>Purpose</li>

<p>Provide a list of the values which a given attribute in the <code>{data}&#45;</code>{c}&#62; part of the Parrot::Configure object takes over the course of the configuration steps.</p>

<li>Arguments</li>

<p>Hash reference. Key <code>attr</code> is mandatory; it is the key whose value you wish to trace over the course of the configuration steps. Key <code>verbose</code> is optional.</p>

<li>Return Value</li>

<p>Array reference. Element <code>n</code> of this array holds the value of the attribute in the <code>{data}&#45;</code>{c}&#62; part of the Parrot::Configure object at configuration step <code>n + 1</code>.</p>

<p>If, however, <code>verbose</code> is set, each element <code>n</code> of the array holds a hash reference where the hash key is the name of configuration step <code>n + 1</code> and the value is the value of the attribute at step <code>n + 1</code>.</p>
</ul>

<h2><a name="diff_data_c()"
><code>diff_data_c()</code></a></h2>

<ul>
<li>Purpose</li>

<p>Provide a list of those configuration steps where the value of a given attribute in the <code>{data}&#45;</code>{c}&#62; part of the Parrot::Configure object changed from that in effect at the conclusion of the preveious configuration step.</p>

<li>Arguments</li>

<p>Hash reference. Key <code>attr</code> is mandatory; it is the key whose changes in value between various steps you wish to trace over the course of configuration.</p>

<li>Return Value</li>

<p>Array reference. Each element of the array is a reference to a hash holding information about those configuration steps where the value of a given attribute changed from the previous configuration step. The hash has the following key&#45;value pairs:</p>

<ul>
<li>number</li>

<p>Number of the configuration step where the value of the given attribute changed; enumeration starts at <code>1</code>, not <code>0</code>.</p>

<li>name</li>

<p>Name of the configuration step where the value of the given attribute changed.</p>

<li>before</li>

<p>For step <code>n</code>, the value of the attribute at step <code>n&#45;1</code>.</p>

<li>after</li>

<p>For step <code>n</code>, the value of the attribute at step <code>n</code>.</p>
</ul>

<li>Comment</li>

<p>The array whose reference is the return value of this method only contains elements for those configuration steps where the value of the given attribute changed. Nothing is reported if nothing changed.</p>
</ul>

<h2><a name="trace_data_triggers()"
><code>trace_data_triggers()</code></a></h2>

<ul>
<li>Purpose</li>

<p>Provide a list of the values which a given attribute in the <code>{data}&#45;</code>{triggers}&#62; part of the Parrot::Configure object takes over the course of the configuration steps.</p>

<li>Arguments</li>

<p>Hash reference. Key <code>attr</code> is mandatory; it is the key whose value you wish to trace over the course of the configuration steps. Key <code>verbose</code> is optional.</p>

<li>Return Value</li>

<p>Array reference. Element <code>n</code> of this array holds the value of the attribute in the <code>{data}&#45;</code>{triggers}&#62; part of the Parrot::Configure object at configuration step <code>n + 1</code>.</p>

<p>If, however, <code>verbose</code> is set, each element <code>n</code> of the array holds a hash reference where the hash key is the name of configuration step <code>n + 1</code> and the value is the value of the attribute at step <code>n + 1</code>.</p>
</ul>

<h2><a name="get_state_at_step()"
><code>get_state_at_step()</code></a></h2>

<ul>
<li>Purpose</li>

<p>Get a snapshot of the data structure in the Parrot::Configure object at the conclusion of a given configuration step.</p>

<li>Arguments</li>

<p>Either a positive integer corresponding to the step number:</p>

<pre>    $state = $obj&#45;&#62;get_state_at_step(54);</pre>

<p>... or the <code>x::y</code> string corresponding to the step&#39;s name in Parrot::Configure::Step::List.</p>

<pre>    $state = $obj&#45;&#62;get_state_at_step(&#39;gen::makefiles&#39;);</pre>

<li>Return Value</li>

<p>Hash reference.</p>
</ul>

<h1><a name="AUTHOR"
>AUTHOR</a></h1>

<p>James E Keenan (jkeenan@cpan.org)</p>

<h1><a name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href='..%2FConfigure.pm.html'>Parrot::Configure</a>, <a href='Options.pm.html'>Parrot::Configure::Options</a>, <em><a href="../../../Configure.pl.html">Configure.pl</a></em>.</p>
            </div> <!-- "mainbody" -->
            <div id="divider"></div>
            <div id="footer">
	        Copyright &copy; 2002-2009, Parrot Foundation.
            </div>
        </div> <!-- "wrapper" -->
    </body>
</html>
