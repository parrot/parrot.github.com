<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>C&#45;Related methods for configuration</title>
        <link rel="stylesheet" type="text/css"
            href="../../../../resources/parrot.css"
            media="all">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    </head>
    <body>
        <div id="wrapper">
            <div id="header">

                <img border=0 src="../../../../resources/parrot_logo.png" id="logo" alt="parrot">
            </div> <!-- "header" -->
            <div id="divider"></div>
            <div id="mainbody">
                <div id="breadcrumb">
                    <a href="../../../../html/index.html">Contents</a> &raquo; <a href="../../../../html/perl.html">Perl Modules</a> &raquo; C&#45;Related methods for configuration
                </div>

<h1><a name="NAME"
>NAME</a></h1>

<p>Parrot::Configure::Compiler &#45; C&#45;Related methods for configuration</p>

<h1><a name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The Parrot::Configure::Compiler module provides methods inherited by Parrot::Configure which prepare and/or run C programs during compilation.</p>

<h2><a name="Methods"
>Methods</a></h2>

<dl>
<dt><a name="cc_gen()"
><b><code>cc_gen()</b></code></a></dt>

<pre>    $conf&#45;&#62;cc_gen($source)</pre>
Generates <em>test_$$.c</em> from the specified source file.
<dt><a name="cc_build()"
><b><code>cc_build()</b></code></a></dt>

<pre>    $conf&#45;&#62;cc_build($cc_args, $link_args)</pre>
These items are used from current config settings:
<pre>  $cc, $ccflags, $ldout, $o, $link, $linkflags, $cc_exe_out, $exe, $libs</pre>
Calls the compiler and linker on <em>test_$$.c</em>.
<dt><a name="cc_run()"
><b><code>cc_run()</b></code></a></dt>

<pre>    $conf&#45;&#62;cc_run();</pre>
Calls the <em>test</em> (or <em>test.exe</em>) executable. Any output is directed to <em>test.out</em>.
<dt><a name="cc_run_capture()"
><b><code>cc_run_capture()</b></code></a></dt>

<pre>    $conf&#45;&#62;cc_run_capture();</pre>
Same as <code>cc_run()</code> except that warnings and errors are also directed to <em>test.out</em>.
<dt><a name="cc_clean()"
><b><code>cc_clean()</b></code></a></dt>

<pre>    $conf&#45;&#62;cc_clean();</pre>
Cleans up all files in the root folder that match the glob <em>test.*</em>.
<dt><a name="genfile()"
><b><code>genfile()</b></code></a></dt>

<pre>    $conf&#45;&#62;genfile($source, $target, %options);</pre>
Takes the specified source file, replacing entries like <code>@FOO@</code> with <code>FOO</code>&#39;s value from the configuration system&#39;s data, and writes the results to specified target file.Respects the following options when manipulating files (Note: most of the replacement syntax assumes the source text is on a single line.)
<dl>
<dt><a name="file_type"
>file_type</a></dt>
If set to a <code>makefile</code>, <code>c</code> or <code>perl</code> value, <code>comment_type</code> will be set to corresponding value. Moreover, when set to a <code>makefile</code> value, it will set <code>replace_slashes</code> to enabled, and <code>conditioned_lines</code> to enabled.Its value will be detected automatically by target file name unless you set it to a special value <code>none</code>.
<dt><a name="conditioned_lines_#IF_#UNLESS_#ELSIF_#ELSE"
>conditioned_lines #IF #UNLESS #ELSIF #ELSE</a></dt>
If conditioned_lines is true, then lines beginning in #IF, #UNLESS, #ELSIF, and #ELSE are evaluated conditionally, and the content after the <code>:</code> is included or excluded, dependending on the evaluation of the expression.Lines beginning with <code>#IF(expr):</code> are skipped if the expr condition is false, otherwise the content after the <code>:</code> is inserted. Lines beginning with <code>#UNLESS(expr):</code> are skipped if the expr condition is true, otherwise the content after the <code>:</code> is inserted. Lines beginning with <code>#ELSIF(expr):</code> or <code>#ELSE:</code> are evaluated if the preceding <code>#IF(expr):</code> evaluated to false.A condition expr may be:
<pre>  * A single key, which is true if a config key is true,
  * Equal to the platform name or the osname &#45; case&#45;sensitive,
  * A C&#60;key==value&#62; expression, which is trun if the config key has the
    expected value, or
  * A logical combination of C&#60;|&#62;, C&#60;OR&#62;, C&#60;&#38;&#62;, C&#60;AND&#62;, C&#60;!&#62;, C&#60;NOT&#62;.</pre>
A key must only consist of the characters A&#45;Z a&#45;z 0&#45;9 _ &#45;, and is checked case&#45;sensitively against the configuration key or the platform name. Truth is defined as any value that is not 0, an empty string, or <code>undef</code>.The value in <code>key==value</code> expressions may not contain spaces. Quotes in values are not supported.The word ops <code>AND</code>, <code>OR</code> and <code>NOT</code> are case&#45;insensitive. <code>!</code> and <code>NOT</code> bind closer than <code>&#38;</code>, <code>AND</code>, <code>|</code>, and <code>OR</code>. The order of precedence for <code>AND</code> and <code>OR</code> is undefined.For instance:
<pre>  #IF(win32): $(SRC_DIR)/atomic/gcc_x86$(O)</pre>
will be included if the platform is win32.
<pre>  #IF(cpuarch==i386): $(SRC_DIR)/atomic/gcc_x86$(O)</pre>
will be included if the value of the config key &#34;cpuarch&#34; is &#34;i386&#34;.
<pre>  #IF(cpuarch==i386): $(SRC_DIR)/atomic/gcc_x86$(O)
  #ELSIF(cpuarch==sparcv9): $(SRC_DIR)/atomic/sparc_v9.s
  #ELSE:</pre>
will include &#34; $(SRC_DIR)/atomic/gcc_x86$(O)&#34; if the config key &#34;cpuarch&#34; is ste to &#34;i386&#34;, will include &#34; $(SRC_DIR)/atomic/sparc_v9.s&#34; instead if &#34;cpuarch&#34; is set to &#34;sparcv9&#34;, and will include an empty line otherwise.
<pre>  #IF(win32 and glut and not cygwin):</pre>
will be used on &#34;win32&#34; and if &#34;glut&#34; is defined, but not on &#34;cygwin&#34;.<b>Legacy Syntax:</b>The old syntax #CONDITIONED_LINE(var): and #INVERSE_CONDITIONED_LINE(var): is still supported, but is deprecated.
<dt><a name="comment_type"
>comment_type</a></dt>
This option takes has two possible values, <code>#</code> or <code>/*</code>. If present and set to one of these two values, the generated file will contain a generated header that is commented out appropriately.
<dt><a name="ignore_pattern"
>ignore_pattern</a></dt>
A regular expression. Any lines in the file matching this expression are ignored when determining if the target file has changed (and should therefore be overwritten with a new copy).
<dt><a name="feature_file"
>feature_file</a></dt>
When feature_file is set to a true value, a lines beginning with <code>#perl</code> forces the remaining lines of the file to be evaluated as perl code. Before this evaluation occurs, any substitution of @@ values is performed on the original text.
<dt><a name="replace_slashes"
>replace_slashes</a></dt>
If set to a true value, this causes any <code>/</code>s in the file to automatically be replaced with an architecture appropriate slash. <code>/</code> or <code>\</code>. This is a very helpful option when writing Makefiles.
<dt><a name="expand_gmake_syntax"
>expand_gmake_syntax</a></dt>
If set to a true value, then certain types of <i>gmake</i> syntax will be expanded into their full equivalents. For example:
<pre> $(wildcard PATTERN)</pre>
Will be replaced <b>at config time</b> with the list of files that match this pattern. Note! Be very careful when determining whether or not to disable this expansion during config time and letting <i>gmake</i> evaluate these: the config system itself may change state of the filesystem, causing the directives to expand differently depending on when they&#39;re run. Another potential issue to consider there is that most makefiles, while generated from the root directory, are <b>run</b> from a subdirectory. So relative path names become an issue.The <i>gmake</i> replacements are done repeatedly on a single line, so nested syntax works ok.
<dl>
<dt><a name="addprefix"
>addprefix</a></dt>

<dt><a name="basename"
>basename</a></dt>

<dt><a name="wildcard"
>wildcard</a></dt>

<dt><a name="notdir"
>notdir</a></dt>
</dl>
</dl>
</dl>

<h1><a name="SEE_ALSO"
>SEE ALSO</a></h1>

<dl>
<dt><a name="docs/configuration.pod"
><em><a href="../../../docs/configuration.pod.html">docs/configuration.pod</a></em></a></dt>
</dl>
            </div> <!-- "mainbody" -->
            <div id="divider"></div>
            <div id="footer">
	        Copyright &copy; 2002-2009, Parrot Foundation.
            </div>
        </div> <!-- "wrapper" -->
    </body>
</html>
