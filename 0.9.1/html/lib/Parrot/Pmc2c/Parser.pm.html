<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>PMC Parser</title>
        <link rel="stylesheet" type="text/css"
            href="../../../../resources/parrot.css"
            media="all">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    </head>
    <body>
        <div id="wrapper">
            <div id="header">

                <img border=0 src="../../../../resources/parrot_logo.png" id="logo" alt="parrot">
            </div> <!-- "header" -->
            <div id="divider"></div>
            <div id="mainbody">
                <div id="breadcrumb">
                    <a href="../../../../html/index.html">Contents</a> &raquo; <a href="../../../../html/perl.html">Perl Modules</a> &raquo; PMC Parser
                </div>

<h1><a name="NAME"
>NAME</a></h1>

<p>Parrot::Pmc2c::Parser &#45; PMC Parser</p>

<h1><a name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    use Parrot::Pmc2c::Parser;</pre>

<h1><a name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>Parrot::Pmc2c::Parser parses a sudo C syntax into a perl hash that is then dumped.</p>

<h2><a name="parse_pmc()"
><code>parse_pmc()</code></a></h2>

<pre>    $parsed_pmc_hash = parse_pmc($pmc2cMain, $filename);</pre>

<p><b>Purpose:</b> Parse PMC code and return a hash ref of pmc attributes.</p>

<p><b>Arguments:</b> List of two arguments:</p>

<ul>
<li>The pmc2cMain object</li>

<li>Filename of the pmc to parse.</li>
</ul>

<p><b>Return Values:</b> Reference to a Parrot::Pmc2c::PMC object</p>

<p><b>Comments:</b> Called by <code>dump_pmc()</code>.</p>

<h2><a name="parse_top_level()"
><code>parse_top_level()</code></a></h2>

<pre>    my ($preamble, $pmcname, $flags, $parents, $pmcbody, $post, $chewed_lines)
        = parse_top_level(\$code);</pre>

<p><b>Purpose:</b> Extract a pmc signature from the code ref.</p>

<p><b>Argument:</b> PMC file contents slurped by <code>parse_pmc()</code>.</p>

<p><b>Return Values:</b> List of seven elements:</p>

<ul>
<li>the code found before the pmc signature;</li>

<li>the name of the pmc</li>

<li>a hash ref containing the flags associated with the pmc (such as <code>extends</code> and <code>provides</code>).</li>

<li>the list of parents this pmc extends</li>

<li>the body of the pmc</li>

<li>the code found after the pmc body</li>

<li>number of newlines in the pmc signature that need to be added to the running total of lines in the file</li>
</ul>

<p><b>Comments:</b> Called internally by <code>parse_pmc()</code>.</p>

<h2><a name="parse_flags()"
><code>parse_flags()</code></a></h2>

<pre>    my ($flags, $parents) = parse_flags($attributes, $pmcname);</pre>

<p><b>Purpose:</b> Extract a pmc signature from the code ref.</p>

<p><b>Argument:</b> PMC file contents slurped by <code>parse_pmc()</code>.</p>

<p><b>Return Values:</b> List of two elements:</p>

<ul>
<li>a hash ref containing the flags associated with the pmc (such as <code>extends</code> and <code>provides</code>).</li>

<li>the list of parents this pmc extends</li>
</ul>

<p><b>Comments:</b> Called internally by <code>parse_top_level()</code>.</p>

<h2><a name="extract_balanced()"
><code>extract_balanced()</code></a></h2>

<pre>    ($pmcbody, $post) = extract_balanced($code);</pre>

<p><b>Purpose:</b> Remove a balanced <code>{}</code> construct from the beginning of <code>$code</code>. Return it and the remaining code.</p>

<p><b>Argument:</b> The code ref which was the first argument provided to <code>parse_pmc()</code>.</p>

<p><b>Return Values:</b> List of two elements:</p>

<ul>
<li>String beginning with <code>{</code> and ending with <code>}</code>. In between is found C code where the comments hold strings of Perl comments written in POD.</li>

<li>String holding the balance of the code. Same style as first element, but without the braces.</li>
</ul>

<p><b>Comments:</b> Called twice within <code>parse_pmc()</code>. Will die with error message <code>Badly balanced</code> if not balanced.</p>

<h2><a name="parse_method_attrs()"
><code>parse_method_attrs()</code></a></h2>

<pre>    $attrs = parse_method_attrs($method_attributes);</pre>

<p><b>Purpose:</b> Parse a list of method attributes and return a hash ref of them.</p>

<p><b>Arguments:</b> String captured from regular expression.</p>

<p><b>Return Values:</b> Reference to hash of attribute values.</p>

<p><b>Comments:</b> Called within <code>parse_pmc()</code>.</p>
            </div> <!-- "mainbody" -->
            <div id="divider"></div>
            <div id="footer">
	        Copyright &copy; 2002-2009, Parrot Foundation.
            </div>
        </div> <!-- "wrapper" -->
    </body>
</html>
