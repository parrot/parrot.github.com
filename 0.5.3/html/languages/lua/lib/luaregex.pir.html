<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
    "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
    <HEAD>
        <TITLE>Lua regex compiler</TITLE>
        <LINK REL="stylesheet" TYPE="text/css"
            HREF="../../../../resources/perl.css"
            TITLE="Default CSS2" media="screen">
    </HEAD>
    <BODY>
        <A NAME="_top"></A>
        <TABLE CELLSPACING="0" WIDTH="730">
            <TR>
                <TD WIDTH="100%" COLSPAN="2" CLASS="BANNER">parrotcode: <SPAN CLASS="title">Lua regex compiler</SPAN></TD>
            </TR>
            <TR>
                <TD WIDTH="100%" COLSPAN="2"  ID="NAV" STYLE="border-bottom: 1px solid #191970;">
                    <a href="../../../../html/index.html">Contents</a> | <a href="../../../../html/languages.html">Language Implementations</a> | <a href="../../../../html/lua.html">Lua</a>
                </TD>
            </TR>
        </TABLE>
        <DIV CLASS="pod">

<h1><a name="NAME"
>NAME <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<p>lib/luaregex.pir &#45; Lua regex compiler</p>

<h1><a name="DESCRIPTION"
>DESCRIPTION <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<p>See &#34;Lua 5.1 Reference Manual&#34;,
section 5.4.1 &#34;Patterns&#34;,
<a href='http://www.lua.org/manual/5.1/manual.html#5.4.1'><a href="http://www.lua.org/manual/5.1/manual.html#5.4.1">http://www.lua.org/manual/5.1/manual.html#5.4.1</a></a>.</p>

<h2><a name="Character_Class:"
>Character Class: <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h2>

<p>A <i>character class</i> is used to represent a set of characters.
The following combinations are allowed in describing a character class:</p>

<dl>
<dt><a name="x"
><b>x</b></a></dt><p class="pad"></p>

<dd>(where <i>x</i> is not one of the <i>magic characters</i> <code lang='und' xml:lang='und'>^$()%.[]*+&#45;?)</code> represents the character <i>x</i> itself.</dd><p class="pad"></p>

<dt><a name="."
><b>.</b></a></dt><p class="pad"></p>

<dd>(a dot) represents all characters.</dd><p class="pad"></p>

<dt><a name="%a"
><b>%a</b></a></dt><p class="pad"></p>

<dd>represents all letters.</dd><p class="pad"></p>

<dt><a name="%c"
><b>%c</b></a></dt><p class="pad"></p>

<dd>represents all control characters.</dd><p class="pad"></p>

<dt><a name="%d"
><b>%d</b></a></dt><p class="pad"></p>

<dd>represents all digits.</dd><p class="pad"></p>

<dt><a name="%l"
><b>%l</b></a></dt><p class="pad"></p>

<dd>represents all lowercase letters.</dd><p class="pad"></p>

<dt><a name="%p"
><b>%p</b></a></dt><p class="pad"></p>

<dd>represents all punctuation characters.</dd><p class="pad"></p>

<dt><a name="%s"
><b>%s</b></a></dt><p class="pad"></p>

<dd>represents all space characters.</dd><p class="pad"></p>

<dt><a name="%u"
><b>%u</b></a></dt><p class="pad"></p>

<dd>represents all uppercase letters.</dd><p class="pad"></p>

<dt><a name="%w"
><b>%w</b></a></dt><p class="pad"></p>

<dd>represents all alphanumeric characters.</dd><p class="pad"></p>

<dt><a name="%x"
><b>%x</b></a></dt><p class="pad"></p>

<dd>represents all hexadecimal digits.</dd><p class="pad"></p>

<dt><a name="%z"
><b>%z</b></a></dt><p class="pad"></p>

<dd>represents the character with representation 0.</dd><p class="pad"></p>

<dt><a name="%x"
><b>%x</b></a></dt><p class="pad"></p>

<dd>(where <i>x</i> is any non&#45;alphanumeric character) represents the character <i>x</i>.
This is the standard way to escape the magic characters.
Any punctuation character (even the non magic) can be preceded by a <code lang='und' xml:lang='und'>&#39;%&#39;</code> when used to represent itself in a pattern.</dd><p class="pad"></p>

<dt><a name="[set]"
><b>[set]</b></a></dt><p class="pad"></p>

<dd>represents the class which is the union of all characters in <i>set</i>.
A range of characters may be specified by separating the end characters of the range with a <code lang='und' xml:lang='und'>&#39;&#45;&#39;</code>.
All classes <code lang='und' xml:lang='und'>%x</code> described above may also be used as components in <i>set</i>.
All other characters in <i>set</i> represent themselves.
For example,
<code lang='und' xml:lang='und'>[%w_]</code> (or <code lang='und' xml:lang='und'>[_%w]</code>) represents all alphanumeric characters plus the underscore,
<code lang='und' xml:lang='und'>[0&#45;7]</code> represents the octal digits,
and <code lang='und' xml:lang='und'>[0&#45;7%l%&#45;]</code> represents the octal digits plus the lowercase letters plus the <code lang='und' xml:lang='und'>&#39;&#45;&#39;</code> character.</dd><p class="pad"></p>

<dd>The interaction between ranges and classes is not defined.
Therefore,
patterns like <code lang='und' xml:lang='und'>[%a&#45;z]</code> or <code lang='und' xml:lang='und'>[a&#45;%%]</code> have no meaning.</dd><p class="pad"></p>

<dt><a name="[^set]"
><b>[^set]</b></a></dt><p class="pad"></p>

<dd>represents the complement of <i>set</i>,
where <i>set</i> is interpreted as above.</dd><p class="pad"></p>
</dl>

<p>For all classes represented by single letters (<code lang='und' xml:lang='und'>%a</code>,
<code lang='und' xml:lang='und'>%c</code>,
etc.),
the corresponding uppercase letter represents the complement of the class.
For instance,
<code lang='und' xml:lang='und'>%S</code> represents all non&#45;space characters.</p>

<p>The definitions of letter,
space,
and other character groups depend on the current locale.
In particular,
the class <code lang='und' xml:lang='und'>[a&#45;z]</code> may not be equivalent to <code lang='und' xml:lang='und'>%l</code>.</p>

<h2><a name="Pattern_Item:"
>Pattern Item: <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h2>

<p>A <i>pattern item</i> may be</p>

<ul>
<li>a single character class,
which matches any single character in the class;</li><p class="pad"></p>

<li>a single character class followed by <code lang='und' xml:lang='und'>&#39;*&#39;</code>,
which matches 0 or more repetitions of characters in the class.
These repetition items will always match the longest possible sequence;</li><p class="pad"></p>

<li>a single character class followed by <code lang='und' xml:lang='und'>&#39;+&#39;</code>,
which matches 1 or more repetitions of characters in the class.
These repetition items will always match the longest possible sequence;</li><p class="pad"></p>

<li>a single character class followed by <code lang='und' xml:lang='und'>&#39;&#45;&#39;</code>,
which also matches 0 or more repetitions of characters in the class.
Unlike <code lang='und' xml:lang='und'>&#39;*&#39;</code>,
these repetition items will always match the <i>shortest</i> possible sequence;</li><p class="pad"></p>

<li>a single character class followed by <code lang='und' xml:lang='und'>&#39;?&#39;</code>,
which matches 0 or 1 occurrence of a character in the class;</li><p class="pad"></p>

<li><code lang='und' xml:lang='und'>%n</code>,
for <i>n</i> between 1 and 9; such item matches a substring equal to the i&#60;n&#62;&#45;th captured string (see below);</li><p class="pad"></p>

<li><code lang='und' xml:lang='und'>%bxy</code>,
where <i>x</i> and <i>y</i> are two distinct characters; such item matches strings that start with <i>x</i>,
end with <i>y</i>,
and where the <i>x</i> and <i>y</i> are <i>balanced</i>.
This means that,
if one reads the string from left to right,
counting <i>+1</i> for an <i>x</i> and <i>&#45;1</i> for a <i>y</i>,
the ending <i>y</i> is the first <i>y</i> where the count reaches 0.
For instance,
the item <code lang='und' xml:lang='und'>%b()</code> matches expressions with balanced parentheses.</li><p class="pad"></p>
</ul>

<h2><a name="Pattern:"
>Pattern: <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h2>

<p>A <i>pattern</i> is a sequence of pattern items.
A <code lang='und' xml:lang='und'>&#39;^&#39;</code> at the beginning of a pattern anchors the match at the beginning of the subject string.
A <code lang='und' xml:lang='und'>&#39;$&#39;</code> at the end of a pattern anchors the match at the end of the subject string.
At other positions,
<code lang='und' xml:lang='und'>&#39;^&#39;</code> and <code lang='und' xml:lang='und'>&#39;$&#39;</code> have no special meaning and represent themselves.</p>

<h2><a name="Captures:"
>Captures: <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h2>

<p>A pattern may contain sub&#45;patterns enclosed in parentheses; they describe <i>captures</i>.
When a match succeeds,
the substrings of the subject string that match captures are stored (<i>captured</i>) for future use.
Captures are numbered according to their left parentheses.
For instance,
in the pattern <code lang='und' xml:lang='und'>&#34;(a*(.)%w(%s*))&#34;</code>,
the part of the string matching <code lang='und' xml:lang='und'>&#34;a*(.)%w(%s*)&#34;</code> is stored as the first capture (and therefore has number 1); the character matching <code lang='und' xml:lang='und'>&#34;.&#34;</code> is captured with number 2,
and the part matching <code lang='und' xml:lang='und'>&#34;%s*&#34;</code> has number 3.</p>

<p>As a special case,
the empty capture <code lang='und' xml:lang='und'>()</code> captures the current string position (a number).
For instance,
if we apply the pattern <code lang='und' xml:lang='und'>&#34;()aa()&#34;</code> on the string <code lang='und' xml:lang='und'>&#34;flaaap&#34;</code>,
there will be two captures: 3 and 5.</p>

<p>A pattern cannot contain embedded zeros.
Use <code lang='und' xml:lang='und'>%z</code> instead.</p>

<h1><a name="HISTORY"
>HISTORY <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<p>Mostly taken from <em lang='und' xml:lang='und'>compilers/pge/PGE/P5Regex.pir</em>.</p>

<h1><a name="AUTHOR"
>AUTHOR <a href='#_top'><img alt='^' border=0 src='../../../../resources/up.gif'></a></a></h1>

<p>Francois Perrad</p>
        </DIV>
        <P>
        <TABLE BORDER="0" WIDTH="730" CELLSPACING="0" CELLPADDING="0">
            <TR ALIGN="RIGHT">
                <TD WIDTH="590" VALIGN="MIDDLE">
                    <BR>
                    <DIV CLASS="FOOTER">
                        <DIV ALIGN="LEFT">
                        </DIV>
                    </DIV>
                </TD>
                <TD VALIGN="middle" ALIGN="center">
                    <IMG BORDER=0
                        SRC="../../../../resources/parrot_small.png"
                        ALT="parrot">
                </TD>
            </TR>
        </TABLE>
    </BODY>
</HTML>
