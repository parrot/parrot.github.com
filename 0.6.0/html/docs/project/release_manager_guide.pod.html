<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
    "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>  
    <HEAD>
        <TITLE>Untitled</TITLE>
        <LINK REL="stylesheet" TYPE="text/css" 
            HREF="../../../resources/perl.css" 
            TITLE="Default CSS2" media="screen">
    </HEAD>
    <BODY> 
        <A NAME="_top"></A>
        <TABLE CELLSPACING="0" WIDTH="730">
            <TR>
                <TD WIDTH="100%" COLSPAN="2" CLASS="BANNER">parrotcode: <SPAN CLASS="title">Untitled</SPAN></TD>
            </TR>
            <TR>
                <TD WIDTH="100%" COLSPAN="2"  ID="NAV" STYLE="border-bottom: 1px solid #191970;">
                    <a href="../../../html/index.html">Contents</a> | <a href="../../../html/info.html">Project Information</a>
                </TD>
            </TR>
        </TABLE>
        <DIV CLASS="pod">

<h1><a name="Release_Instructions"
>Release Instructions <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h1>

<p>To prepare a release:</p>

<dl>
<dt><a name="0."
>0.</a></dt><p class="pad"></p>

<dd>Announce to parrot&#45;porters and #parrot at least a couple days in advance,
asking if there are any showstopping bugs.
It&#39;s also good to ask for updates to <em lang='und' xml:lang='und'>NEWS</em>,
<em lang='und' xml:lang='und'>CREDITS</em>,
<em lang='und' xml:lang='und'>PLATFORMS</em>,
<em lang='und' xml:lang='und'>RESPONSIBLE_PARTIES</em>,
etc.
You might also select a name for your release (e.g.,
perhaps select a name from <a href='http://en.wikipedia.org/wiki/List_of_parrots'><a href="http://en.wikipedia.org/wiki/List_of_parrots">http://en.wikipedia.org/wiki/List_of_parrots</a></a>).</dd><p class="pad"></p>

<dt><a name="1."
>1.</a></dt><p class="pad"></p>

<dd>Make sure you&#39;re up to date:</dd><p class="pad"></p>

<pre lang='und' xml:lang='und'> $ svn update</pre>

<dd>You may want to ask the developer base to stop committing big changes; it will avoid complications. Or you could create a release branch, make release&#45;related changes there, and fold them back into the trunk once the release is done. This process is explained in <a href='#Appendix_1'>&#34;Appendix 1&#34;</a>.</dd><p class="pad"></p>

<dt><a name="2."
>2.</a></dt><p class="pad"></p>

<dd>Update files with version&#45;specific information:</dd><p class="pad"></p>

<dl>
<dt><a name="a"
>a</a></dt><p class="pad"></p>

<dd>Increment the version number in the following files: <em lang='und' xml:lang='und'>VERSION</em>, <em lang='und' xml:lang='und'>parrot.spec</em>, <em lang='und' xml:lang='und'>MANIFEST.generated</em>, <em lang='und' xml:lang='und'>META.yml</em>, <em lang='und' xml:lang='und'>README</em>.</dd><p class="pad"></p>

<dd>Also update the version number, date, and your name in the the files: <em lang='und' xml:lang='und'>DEVELOPING</em> and <em lang='und' xml:lang='und'><a href="../parrothist.pod.html">docs/parrothist.pod</a></em>.</dd><p class="pad"></p>

<dt><a name="b"
>b</a></dt><p class="pad"></p>

<dd>Update <em lang='und' xml:lang='und'>ChangeLog</em>, <em lang='und' xml:lang='und'>NEWS</em> with the new version number and any other changes that have occurred since the last release: Hopefully these files are being updated as committers work. If not, it&#39;s probably a good idea to gather the updates weekly rather than waiting until the day of the monthly release.</dd><p class="pad"></p>

<dt><a name="c"
>c</a></dt><p class="pad"></p>

<dd>Update release&#45;related information in <em lang='und' xml:lang='und'>tools/util/release.json</em>. This will be used later when making release announcements. There are a few essential fields that must be updated at each release:</dd><p class="pad"></p>

<dl>
<dt><a name="release.*"
><b><code lang='und' xml:lang='und'>release.*</b></code></a></dt><p class="pad"></p>

<dd>The date of the next release is in <a href='#Appendix_2'>&#34;Appendix 2&#34;</a>.</dd><p class="pad"></p>

<dt><a name="rt.tracking"
><b><code lang='und' xml:lang='und'>rt.tracking</b></code></a></dt><p class="pad"></p>

<dd>Create a new ticket for the next release. Change the URL fragment here to use that ticket&#39;s number.</dd><p class="pad"></p>

<dt><a name="rt.saved_search"
><b><code lang='und' xml:lang='und'>rt.saved_search</b></code></a></dt><p class="pad"></p>

<dd>Open the link to the previous value of this field. Copy the resulting full URL, then change the ticket number in the <code lang='und' xml:lang='und'>DependedOnBy</code> parameter to the ticket for the next release. Take the entire resulting URL to <a href='http://xrl.us/'><a href="http://xrl.us/">http://xrl.us/</a></a> and get a short URL. Add that to this field.</dd><p class="pad"></p>
</dl>

<dt><a name="d"
>d</a></dt><p class="pad"></p>

<dd>Make sure <em lang='und' xml:lang='und'>RESPONSIBLE_PARTIES</em> is still accurate.</dd><p class="pad"></p>

<dt><a name="e"
>e</a></dt><p class="pad"></p>

<dd>Configure parrot and run <code lang='und' xml:lang='und'>perl t/harness t/distro/*.t</code>, and either fix what those tests complain about, or fix them so they don&#39;t complain.</dd><p class="pad"></p>

<dt><a name="f"
>f</a></dt><p class="pad"></p>

<dd>Run <code lang='und' xml:lang='und'>perl tools/dev/pbc_header.pl &#45;&#45;upd t/native_pbc/*.pbc</code> to update version and fingerprint in the native tests.</dd><p class="pad"></p>

<dt><a name="g"
>g</a></dt><p class="pad"></p>

<dd>Make sure everything works:</dd><p class="pad"></p>

<pre lang='und' xml:lang='und'> $ make realclean
 $ perl Configure.pl &#45;&#45;test ...
 $ make &#45;s all world fulltest html
 # Note that fulltest runs separate harnesses..</pre>

<dd>It is not necessary to quiet all the codingstd tests for a release.</dd><p class="pad"></p>
</dl>

<dt><a name="3."
>3.</a></dt><p class="pad"></p>

<pre lang='und' xml:lang='und'> svn commit</pre>

<dd>Presuming everything goes well later, you&#39;ll need the revision number from this commit, write it down.</dd><p class="pad"></p>

<dt><a name="4."
>4.</a></dt><p class="pad"></p>

<dd>Prepare the release tarball.</dd><p class="pad"></p>

<pre lang='und' xml:lang='und'> $ make release VERSION=a.b.c</pre>

<dd>where a.b.c is the version number. This will create the tarball named <em lang='und' xml:lang='und'>parrot&#45;a.b.c.tar.gz</em>. This will automatically avoid including <code lang='und' xml:lang='und'>DEVELOPING</code> in the release tarball.</dd><p class="pad"></p>

<dt><a name="5."
>5.</a></dt><p class="pad"></p>

<dd>Untar <em lang='und' xml:lang='und'>parrot&#45;a.b.c.tar.gz</em> into another area.</dd><p class="pad"></p>

<dt><a name="6."
>6.</a></dt><p class="pad"></p>

<dd>Make sure everything works:</dd><p class="pad"></p>

<pre lang='und' xml:lang='und'> $ perl Configure.pl
 $ make world
 $ make fulltest
 $ make docs
 $ make html</pre>

<dt><a name="7."
>7.</a></dt><p class="pad"></p>

<dd>Tag the release as &#34;RELEASE_a_b_c&#34;, where a.b.c is the version number. If you&#39;re working in trunk, be sure to specify the revision number generated in step 3, above.</dd><p class="pad"></p>

<pre lang='und' xml:lang='und'> $ export SVNPARROT=https://svn.perl.org/parrot
 $ svn copy &#45;m&#34;tagged release a.b.c&#34; \
   $SVNPARROT/trunk $SVNPARROT/tags/RELEASE_a_b_c</pre>

<dd>See also <a href='#Appendix_1'>&#34;Appendix 1&#34;</a> below.</dd><p class="pad"></p>

<dt><a name="8."
>8.</a></dt><p class="pad"></p>

<dd>In PAUSE, assign yourself co&#45;maintainer permissions on all modules owned by PARROTRE.</dd><p class="pad"></p>

<dd>Upload to CPAN.</dd><p class="pad"></p>

<dd>NOTE: you may get a failure message from the CPAN Indexer about the content of META.yml. Don&#39;t panic, the tarball still uploaded okay. You do need to fix META.yml for the next release. Under &#34;no_index&#34; list any modules that aren&#39;t properly part of the Parrot distribution.</dd><p class="pad"></p>

<dd>Once you get a reply from the PAUSE indexer, log in to PAUSE to clean up module permissions. Under &#34;View Permissions&#34; search for your PAUSE ID. Any new modules added in this release will list your PAUSE ID as the &#34;owner&#34;. Change the owner to PARROTRE.</dd><p class="pad"></p>

<dd>See <em lang='und' xml:lang='und'><a href="pause_guide.pod.html">docs/project/pause_guide.pod</a></em> for more details.</dd><p class="pad"></p>

<dt><a name="9."
>9.</a></dt><p class="pad"></p>

<dd>Compose and send out the announcements &#45;&#45; parrot&#45;porters, perl6&#45;language, perl6&#45;announce, perl5&#45;porters, use Perl, PerlMonks, etc. Don&#39;t forget to include the next scheduled release date.</dd><p class="pad"></p>

<dd>Use <em lang='und' xml:lang='und'><a href="../../tools/util/crow.pir.html">tools/util/crow.pir</a></em> to make this part easier. You can specify the format of your announcments like so:</dd><p class="pad"></p>

<pre lang='und' xml:lang='und'>  $ ./parrot tools/util/crow.pir &#45;&#45;type=text
  $ ./parrot tools/util/crow.pir &#45;&#45;type=html</pre>

<dd>Take the screen output and paste it into the application you need. HTML works well for use Perl and PerlMonks, and text for the rest.</dd><p class="pad"></p>

<dl>
<dt><a name="a"
>a</a></dt><p class="pad"></p>

<dd>Submit the use Perl announcement story to Slashdot, Newsforge, etc. Don&#39;t forget to set a Reply&#45;To: or Followup&#45;To: header, if your mail client lets you.</dd><p class="pad"></p>

<dt><a name="b"
>b</a></dt><p class="pad"></p>

<dd>Modify the topic on #parrot, e.g.:</dd><p class="pad"></p>

<pre lang='und' xml:lang='und'> /topic #parrot Parrot 0.4.8 Released | <a href="http://parrotcode.org/">http://parrotcode.org/</a></pre>

<dt><a name="c"
>c</a></dt><p class="pad"></p>

<dd>Update the next planned release date on the wiki.</dd><p class="pad"></p>

<dt><a name="d"
>d</a></dt><p class="pad"></p>

<dd>Update the website. The svn repository for the website is at <a href='https://svn.perl.org/perl.org/docs/live/parrotcode'>https://svn.perl.org/perl.org/docs/live/parrotcode</a>.</dd><p class="pad"></p>

<dd>Add a release announcement to news/[year]/Parrot&#45;[release].html. Update <code lang='und' xml:lang='und'>/index.html</code> (The old mini&#45;announcement may be commented out). Update <code lang='und' xml:lang='und'>/.htredirects</code> to point to the proper CPAN URL.</dd><p class="pad"></p>

<dd>If your name is Allison, Will, or chromatic, you will be able to commit these changes yourself; be sure to test locally in combust before pushing the update out. Otherwise, prepare the changes and send a patch to one of the anointed.</dd><p class="pad"></p>
</dl>

<dt><a name="10."
>10.</a></dt><p class="pad"></p>

<dd>Close any release&#45;related tickets in RT. If they are not yet resolved, migrate the critical ones to the next milestone release ticket. Non&#45;critical unresolved tickets can be simply unlinked.</dd><p class="pad"></p>

<dt><a name="11."
>11.</a></dt><p class="pad"></p>

<dd>You&#39;re done! Help yourself to a beer, cola or other celebratory drink.</dd><p class="pad"></p>
</dl>

<h2><a name="ABOUT_THIS_DOCUMENT"
>ABOUT THIS DOCUMENT <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h2>

<p>This document was written after a couple of subtly incorrectly assembled releases&#45;&#45;usually when someone forgot to delete <em lang='und' xml:lang='und'>DEVELOPING</em> (which is now automated!), but at least once where the <em lang='und' xml:lang='und'>MANIFEST</em> check failed. The intent of this file is to document what must be done to release so that such mistakes don&#39;t happen again.</p>

<h1><a name="SEE_ALSO"
>SEE ALSO <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h1>

<p><em lang='und' xml:lang='und'>README</em>, <em lang='und' xml:lang='und'>RESPONSIBLE_PARTIES</em>.</p>

<h1><a name="Appendix_1"
>Appendix 1 <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h1>

<p>parrot repository layout as of end of Apr 2005</p>

<pre lang='und' xml:lang='und'> $ svn ls $SVNPARROT
 branches/
 tags/
 trunk/

 $ svn ls $SVNPARROT/tags
 PRE_REL_0_0_8/
 RELEASE_0_0_10/
 RELEASE_0_0_11/
 RELEASE_0_0_13/
 RELEASE_0_0_6/
 RELEASE_0_0_8/
 RELEASE_0_0_9/
 RELEASE_0_1_0/
 RELEASE_0_1_1/
 RELEASE_0_1_2/
 REL_0_0_5/
 V1/
 file_move_031023/
 help/
 ponie&#45;PRE&#45;P5_592/</pre>

<h2><a name="Releasing_from_a_branch"
>Releasing from a branch <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h2>

<p>Instead of step 1, create a new branch, and get a working copy of it:</p>

<pre lang='und' xml:lang='und'>   $ export SVNPARROT=https://svn.perl.org/parrot
   $ svn copy &#45;m&#34;Starting release a.b.c&#34; \
              $SVNPARROT/trunk $SVNPARROT/branches/RELEASE_a_b_c
   $ svn checkout $SVNPARROT/branches/RELEASE_a_b_c parrot&#45;release
   $ cd parrot&#45;release</pre>

<p>Make a note of the revision number produced by <code lang='und' xml:lang='und'>svn copy</code> so that you know which changes were made on the branch.</p>

<p>This new <code lang='und' xml:lang='und'>parrot&#45;release</code> working copy will be &#34;on&#34; the branch, insulated from trunk commits, so you should feel free to announce the end of any &#34;code slush&#34; that may be in effect.</p>

<p>Then, do steps 3 through 7 using your branch working copy, so that commits go to the branch. When you are sure that the tarball is all that it should be, tag the release as a copy from the branch (instead of the trunk):</p>

<pre lang='und' xml:lang='und'>   $ svn copy &#45;m&#34;Release a.b.c&#34; \
           $SVNPARROT/branches/RELEASE_a_b_c $SVNPARROT/tags/RELEASE_a_b_c</pre>

<p>Upload your shiny new tarball, announce the release, and close tickets (steps 9 through 11) as described above.</p>

<p>Finally (don&#39;t get your celebratory drink yet!), you need to merge the branch changes back into the trunk. To do this, you need an up&#45;to&#45;date working copy on the trunk. You can reuse the <code lang='und' xml:lang='und'>parrot&#45;release</code> working copy via <code lang='und' xml:lang='und'>svn switch</code> by switching it back to the trunk (assuming <code lang='und' xml:lang='und'>parrot&#45;release</code> is the current directory):</p>

<pre lang='und' xml:lang='und'>   $ svn switch $SVNPARROT/trunk</pre>

<p>Then, merge the branch changes back into it:</p>

<pre lang='und' xml:lang='und'>   $ svn merge &#45;r 12345:HEAD $SVNPARROT/branches/RELEASE_a_b_c</pre>

<p>where &#34;12345&#34; is the revision number of the <code lang='und' xml:lang='und'>svn copy</code> operation that created the branch. Check that the merge was clean, &#34;make test&#34; if there were any code changes on the branch, and commit. <i>Then</i> go get that beer!</p>

<h1><a name="Appendix_2"
>Appendix 2 <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h1>

<p>Planned releases in 2008.</p>

<p>To make a monthly release schedule possible, we&#39;re spreading the burden of releases across multiple release managers. Releases are scheduled for the 3rd Tuesday of each month. Version numbers for each release will be determined each month, and will depend on the features that will be in that release.</p>

<pre lang='und' xml:lang='und'> &#45; Jan 15th (0.5.2) Bob Rogers
 &#45; Feb 19th (?)     Patrick Michaud
 &#45; Mar 18th (?)     Bernhard Schmalhofer
 &#45; Apr 15th (?)     Jerry Gay
 &#45; May 20th (?)     chromatic
 &#45; Jun 17th (?)     Nuno Carvalho</pre>
        </DIV>
        <P>
        <TABLE BORDER="0" WIDTH="730" CELLSPACING="0" CELLPADDING="0">
            <TR ALIGN="RIGHT">
                <TD WIDTH="590" VALIGN="MIDDLE">
                    <BR>
                    <DIV CLASS="FOOTER">
                        <DIV ALIGN="LEFT">
                        </DIV>
                    </DIV>
                </TD>
                <TD VALIGN="middle" ALIGN="center">
                    <IMG BORDER=0
                        SRC="../../../resources/parrot_small.png" 
                        ALT="parrot">
                </TD>
            </TR>
        </TABLE>
    </BODY>
</HTML>
