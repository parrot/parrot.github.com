<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
    "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
    <HEAD>
        <TITLE>Class and object</TITLE>
        <LINK REL="stylesheet" TYPE="text/css"
            HREF="../../resources/perl.css"
            TITLE="Default CSS2" media="screen">
    </HEAD>
    <BODY>
        <A NAME="_top"></A>
        <TABLE CELLSPACING="0" WIDTH="730">
            <TR>
                <TD WIDTH="100%" COLSPAN="2" CLASS="BANNER">parrotcode: <SPAN CLASS="title">Class and object</SPAN></TD>
            </TR>
            <TR>
                <TD WIDTH="100%" COLSPAN="2"  ID="NAV" STYLE="border-bottom: 1px solid #191970;">
                    <a href="../../html/index.html">Contents</a> | <a href="../../html/c.html">C</a>
                </TD>
            </TR>
        </TABLE>
        <DIV CLASS="pod">

<h1><a name="NAME"
>NAME <a href='#_top'><img alt='^' border=0 src='../../resources/up.gif'></a></a></h1>

<p>oo.c &#45; Class and object</p>

<h1><a name="DESCRIPTION"
>DESCRIPTION <a href='#_top'><img alt='^' border=0 src='../../resources/up.gif'></a></a></h1>

<p>Handles class and object manipulation.</p>

<h2><a name="Functions"
>Functions <a href='#_top'><img alt='^' border=0 src='../../resources/up.gif'></a></a></h2>

<dl>
<dt><a name="void_Parrot_oo_extract_methods_from_namespace"
><b><code lang='und' xml:lang='und'>void Parrot_oo_extract_methods_from_namespace</b></code></a></dt><p class="pad"></p>

<dd>Extract methods and vtable overrides from the given namespace and insert them into the class.</dd><p class="pad"></p>

<dt><a name="PMC_*_Parrot_oo_get_namespace"
><b><code lang='und' xml:lang='und'>PMC *Parrot_oo_get_namespace</b></code></a></dt><p class="pad"></p>

<dd>Lookup a namespace object from a class PMC.</dd><p class="pad"></p>

<dt><a name="PMC_*_Parrot_oo_get_class"
><b><code lang='und' xml:lang='und'>PMC *Parrot_oo_get_class</b></code></a></dt><p class="pad"></p>

<dd>Lookup a class object from a namespace,
string,
or key PMC.</dd><p class="pad"></p>

<dt><a name="PMC_*_Parrot_oo_get_class_str"
><b><code lang='und' xml:lang='und'>PMC *Parrot_oo_get_class_str</b></code></a></dt><p class="pad"></p>

<dd>Lookup a class object from a builtin string.</dd><p class="pad"></p>

<dt><a name="PMC_*_Parrot_oo_newclass_from_str"
><b><code lang='und' xml:lang='und'>PMC *Parrot_oo_newclass_from_str</b></code></a></dt><p class="pad"></p>

<dd>Create a new class object from a string name.</dd><p class="pad"></p>

<dt><a name="PMC_*_Parrot_oo_find_vtable_override_for_class"
><b><code lang='und' xml:lang='und'>PMC *Parrot_oo_find_vtable_override_for_class</b></code></a></dt><p class="pad"></p>

<dd>Lookup a vtable override in a specific class object.</dd><p class="pad"></p>

<dt><a name="PMC_*_Parrot_oo_find_vtable_override"
><b><code lang='und' xml:lang='und'>PMC *Parrot_oo_find_vtable_override</b></code></a></dt><p class="pad"></p>

<dd>Lookup a vtable override in a class,
including any vtable overrides inherited from parents.</dd><p class="pad"></p>

<dt><a name="INTVAL_Parrot_get_vtable_index"
><b><code lang='und' xml:lang='und'>INTVAL Parrot_get_vtable_index</b></code></a></dt><p class="pad"></p>

<dd>Return index if <code lang='und' xml:lang='und'>name</code> is a valid vtable slot name.</dd><p class="pad"></p>

<dt><a name="static_PMC*_find_vtable_meth_ns"
><b><code lang='und' xml:lang='und'>static PMC *find_vtable_meth_ns</b></code></a></dt><p class="pad"></p>

<dd>Return Sub PMC if a method with the vtable name exists in ns</dd><p class="pad"></p>

<dt><a name="STRING*_readable_name"
><b><code lang='und' xml:lang='und'>STRING *readable_name</b></code></a></dt><p class="pad"></p>

<dd>Given a String or Key PMC return the STRING* representation</dd><p class="pad"></p>

<dd>RT#45967 this function,
key_set_to_string,
and the key PMC get_repr should be consolidated</dd><p class="pad"></p>

<dt><a name="const_char*_Parrot_MMD_method_name"
><b><code lang='und' xml:lang='und'>const char *Parrot_MMD_method_name</b></code></a></dt><p class="pad"></p>

<dd>Return the method name for the given MMD enum.</dd><p class="pad"></p>

<dt><a name="INTVAL_Parrot_MMD_method_idx"
><b><code lang='und' xml:lang='und'>INTVAL Parrot_MMD_method_idx</b></code></a></dt><p class="pad"></p>

<dd>Return the MMD function number for method name or &#45;1 on failure.</dd><p class="pad"></p>

<dd>RT#45973 allow dynamic expansion at runtime.</dd><p class="pad"></p>

<dt><a name="PMC_*_Parrot_class_lookup"
><b><code lang='und' xml:lang='und'>PMC *Parrot_class_lookup</b></code></a></dt><p class="pad"></p>

<dd>Looks for the class named <code lang='und' xml:lang='und'>class_name</code> and returns it if it exists.
Otherwise it returns <code lang='und' xml:lang='und'>PMCNULL</code>.</dd><p class="pad"></p>

<dt><a name="PMC_*_Parrot_class_lookup_p"
><b><code lang='und' xml:lang='und'>PMC *Parrot_class_lookup_p</b></code></a></dt><p class="pad"></p>

<dd>Looks for the class named <code lang='und' xml:lang='und'>class_name</code> and returns it if it exists.
Otherwise it returns <code lang='und' xml:lang='und'>PMCNULL</code>.</dd><p class="pad"></p>

<dt><a name="static_void_fail_if_type_exists"
><b><code lang='und' xml:lang='und'>static void fail_if_type_exists</b></code></a></dt><p class="pad"></p>

<dd>This function throws an exception if a PMC or class with the same name * already exists in the global type registry.
The global type registry will go away eventually,
but this allows the new object metamodel to interact with the old one until it does.</dd><p class="pad"></p>

<dt><a name="INTVAL_Parrot_oo_register_type"
><b><code lang='und' xml:lang='und'>INTVAL Parrot_oo_register_type</b></code></a></dt><p class="pad"></p>

<dd>This function registers a type in the global registry,
first checking if it already exists.
The global type registry will go away eventually,
but this allows the new object metamodel to interact with the old one until it does.</dd><p class="pad"></p>

<dt><a name="static_PMC*_get_init_meth"
><b><code lang='und' xml:lang='und'>static PMC *get_init_meth</b></code></a></dt><p class="pad"></p>

<dd>RT#48260: Not yet documented!!!</dd><p class="pad"></p>

<dt><a name="static_void_do_initcall"
><b><code lang='und' xml:lang='und'>static void do_initcall</b></code></a></dt><p class="pad"></p>

<dd>RT#48260: Not yet documented!!!</dd><p class="pad"></p>

<dt><a name="void_Parrot_instantiate_object_init"
><b><code lang='und' xml:lang='und'>void Parrot_instantiate_object_init</b></code></a></dt><p class="pad"></p>

<dd>Creates a Parrot object.
Takes a passed&#45;in class PMC that has sufficient information to describe the layout of the object and makes the object.</dd><p class="pad"></p>

<dt><a name="void_Parrot_instantiate_object"
><b><code lang='und' xml:lang='und'>void Parrot_instantiate_object</b></code></a></dt><p class="pad"></p>

<dd>Wrapper for instantiate_object,
passing NULL as initialization.
Returns a new Parrot object.</dd><p class="pad"></p>

<dt><a name="static_void_instantiate_object"
><b><code lang='und' xml:lang='und'>static void instantiate_object</b></code></a></dt><p class="pad"></p>

<dd>RT#48260: Not yet documented!!!</dd><p class="pad"></p>

<dt><a name="PMC_*_Parrot_remove_parent"
><b><code lang='und' xml:lang='und'>PMC *Parrot_remove_parent</b></code></a></dt><p class="pad"></p>

<dd>This currently does nothing but return <code lang='und' xml:lang='und'>PMCNULL</code>.
RT#50646</dd><p class="pad"></p>

<dt><a name="void_mark_object_cache"
><b><code lang='und' xml:lang='und'>void mark_object_cache</b></code></a></dt><p class="pad"></p>

<dd>Marks all PMCs in the object method cache as live.
This shouldn&#39;t strictly be necessary,
as they&#39;re likely all reachable from namespaces and classes,
but it&#39;s unlikely to hurt anything except mark phase performance.</dd><p class="pad"></p>

<dt><a name="void_init_object_cache"
><b><code lang='und' xml:lang='und'>void init_object_cache</b></code></a></dt><p class="pad"></p>

<dd>Allocate memory for object cache.</dd><p class="pad"></p>

<dt><a name="void_destroy_object_cache"
><b><code lang='und' xml:lang='und'>void destroy_object_cache</b></code></a></dt><p class="pad"></p>

<dd>RT#48260: Not yet documented!!!</dd><p class="pad"></p>

<dt><a name="static_void_invalidate_type_caches"
><b><code lang='und' xml:lang='und'>static void invalidate_type_caches</b></code></a></dt><p class="pad"></p>

<dd>RT#48260: Not yet documented!!!</dd><p class="pad"></p>

<dt><a name="static_void_invalidate_all_caches"
><b><code lang='und' xml:lang='und'>static void invalidate_all_caches</b></code></a></dt><p class="pad"></p>

<dd>RT#48260: Not yet documented!!!</dd><p class="pad"></p>

<dt><a name="void_Parrot_invalidate_method_cache"
><b><code lang='und' xml:lang='und'>void Parrot_invalidate_method_cache</b></code></a></dt><p class="pad"></p>

<dd>Clear method cache for the given class.
If class is NULL,
caches for all classes are invalidated.</dd><p class="pad"></p>

<dt><a name="PMC_*_Parrot_find_method_direct"
><b><code lang='und' xml:lang='und'>PMC *Parrot_find_method_direct</b></code></a></dt><p class="pad"></p>

<dd>Find a method PMC for a named method,
given the class PMC,
current interpreter,
and name of the method.
Don&#39;t use a possible method cache.</dd><p class="pad"></p>

<dt><a name="PMC_*_Parrot_find_method_with_cache"
><b><code lang='und' xml:lang='und'>PMC *Parrot_find_method_with_cache</b></code></a></dt><p class="pad"></p>

<dd>Find a method PMC for a named method,
given the class PMC,
current interp,
and name of the method.</dd><p class="pad"></p>

<dd>This routine should use the current scope&#39;s method cache,
if there is one.
If not,
it creates a new method cache.
Or,
rather,
it will when we&#39;ve got that bit working.
For now it unconditionally goes and looks up the name in the global stash.</dd><p class="pad"></p>

<dt><a name="static_void_debug_trace_find_meth"
><b><code lang='und' xml:lang='und'>static void debug_trace_find_meth</b></code></a></dt><p class="pad"></p>

<dd>RT#48260: Not yet documented!!!</dd><p class="pad"></p>

<dt><a name="static_PMC_*_find_method_direct_1"
><b><code lang='und' xml:lang='und'>static PMC *find_method_direct_1</b></code></a></dt><p class="pad"></p>

<dd>RT#48260: Not yet documented!!!</dd><p class="pad"></p>

<dt><a name="static_PMC*_C3_merge"
><b><code lang='und' xml:lang='und'>static PMC *C3_merge</b></code></a></dt><p class="pad"></p>

<dd>RT#48260: Not yet documented!!!</dd><p class="pad"></p>

<dt><a name="PMC*_Parrot_ComputeMRO_C3"
><b><code lang='und' xml:lang='und'>PMC *Parrot_ComputeMRO_C3</b></code></a></dt><p class="pad"></p>

<dd>Computes the C3 linearization for the given class.</dd><p class="pad"></p>

<dt><a name="void_Parrot_ComposeRole"
><b><code lang='und' xml:lang='und'>void Parrot_ComposeRole</b></code></a></dt><p class="pad"></p>

<dd>Used by the Class and Object PMCs internally to compose a role into either of them.
The <code lang='und' xml:lang='und'>role</code> parameter is the role that we are composing into the class or role.
<code lang='und' xml:lang='und'>methods_hash</code> is the hash of method names to invokable PMCs that contains the methods the class or role has.
<code lang='und' xml:lang='und'>roles_list</code> is the list of roles the the class or method does.</dd><p class="pad"></p>

<dd>The <code lang='und' xml:lang='und'>role</code> parameter is only dealt with by its external interface.
Whether this routine is usable by any other object system implemented in Parrot very much depends on how closely the role composition semantics they want are to the default implementation.</dd><p class="pad"></p>
</dl>

<h1><a name="SEE_ALSO"
>SEE ALSO <a href='#_top'><img alt='^' border=0 src='../../resources/up.gif'></a></a></h1>

<p><em lang='und' xml:lang='und'>include/parrot/oo.h</em>,
<em lang='und' xml:lang='und'>include/parrot/oo_private.h</em>,
<em lang='und' xml:lang='und'><a href="../docs/pdds/pdd15_objects.pod.html">docs/pdds/pdd15_objects.pod</a></em>.</p>
        </DIV>
        <P>
        <TABLE BORDER="0" WIDTH="730" CELLSPACING="0" CELLPADDING="0">
            <TR ALIGN="RIGHT">
                <TD WIDTH="590" VALIGN="MIDDLE">
                    <BR>
                    <DIV CLASS="FOOTER">
                        <DIV ALIGN="LEFT">
                        </DIV>
                    </DIV>
                </TD>
                <TD VALIGN="middle" ALIGN="center">
                    <IMG BORDER=0
                        SRC="../../resources/parrot_small.png"
                        ALT="parrot">
                </TD>
            </TR>
        </TABLE>
    </BODY>
</HTML>
