<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
    "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>  
    <HEAD>
        <TITLE>Parrot Object</TITLE>
        <LINK REL="stylesheet" TYPE="text/css" 
            HREF="../../../resources/perl.css" 
            TITLE="Default CSS2" media="screen">
    </HEAD>
    <BODY> 
        <A NAME="_top"></A>
        <TABLE CELLSPACING="0" WIDTH="730">
            <TR>
                <TD WIDTH="100%" COLSPAN="2" CLASS="BANNER">parrotcode: <SPAN CLASS="title">Parrot Object</SPAN></TD>
            </TR>
            <TR>
                <TD WIDTH="100%" COLSPAN="2"  ID="NAV" STYLE="border-bottom: 1px solid #191970;">
                    <a href="../../../html/index.html">Contents</a> | <a href="../../../html/pmc.html">PMCs</a>
                </TD>
            </TR>
        </TABLE>
        <DIV CLASS="pod">

<h1><a name="NAME"
>NAME <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h1>

<p>src/pmc/parrotobject.pmc &#45; Parrot Object</p>

<h1><a name="DESCRIPTION"
>DESCRIPTION <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h1>

<p>A Parrot Object is reasonably simple.
Its data pointer points to an array with the attributes of the object in it.
The int cache value holds the offset in that array of the first attribute,
so we can front&#45;load the array with invisible options.</p>

<p>The array holds:</p>

<dl>
<dt><a name="0"
>0</a></dt><p class="pad"></p>

<dd>The first element of the attribute array is a pointer to the class PMC for this object.</dd><p class="pad"></p>

<dt><a name="1"
>1</a></dt><p class="pad"></p>

<dd>The class name (taken from the class PMC)</dd><p class="pad"></p>

<dt><a name="2..."
>2...</a></dt><p class="pad"></p>

<dd>Attributes.</dd><p class="pad"></p>
</dl>

<p>The object is actually constructed by the instantiation code in <em lang='und' xml:lang='und'><a href="../objects.c.html">src/objects.c</a></em>,
at least for right now.</p>

<h2><a name="Methods"
>Methods <a href='#_top'><img alt='^' border=0 src='../../../resources/up.gif'></a></a></h2>

<dl>
<dt><a name="void_init()"
><b><code lang='und' xml:lang='und'>void init()</b></code></a></dt><p class="pad"></p>

<dd>Raises an exception to make sure all users call <code lang='und' xml:lang='und'>new</code> on the registered class PMC and not the ParrotObject itself.</dd><p class="pad"></p>

<dd>During <code lang='und' xml:lang='und'>Parrot_class_register()</code> this <code lang='und' xml:lang='und'>init()</code> method gets replaced by <code lang='und' xml:lang='und'>Parrot_instantiate_object()</code>.</dd><p class="pad"></p>

<dt><a name="STRING_*name()"
><b><code lang='und' xml:lang='und'>STRING *name()</b></code></a></dt><p class="pad"></p>

<dd>Shortcut for .class().name()</dd><p class="pad"></p>

<dd>XXX &#45; this is bad and should go</dd><p class="pad"></p>

<dt><a name="PMC_*find_method(STRING_*name)"
><b><code lang='und' xml:lang='und'>PMC *find_method(STRING *name)</b></code></a></dt><p class="pad"></p>

<dd>Finds the method for <code lang='und' xml:lang='und'>*name</code>.</dd><p class="pad"></p>

<dt><a name="PMC*_get_attr(INTVAL_idx)"
><b><code lang='und' xml:lang='und'>PMC *get_attr(INTVAL idx)</b></code></a></dt><p class="pad"></p>

<dd>Return attribute number <code lang='und' xml:lang='und'>idx</code>.</dd><p class="pad"></p>

<dt><a name="PMC*_get_attr_str(STRING_*name)"
><b><code lang='und' xml:lang='und'>PMC *get_attr_str(STRING *name)</b></code></a></dt><p class="pad"></p>

<dd>Return attribute named <code lang='und' xml:lang='und'>name</code>.</dd><p class="pad"></p>

<dt><a name="void_set_attr(INTVAL_idx,_PMC_*val)"
><b><code lang='und' xml:lang='und'>void set_attr(INTVAL idx, PMC *val)</b></code></a></dt><p class="pad"></p>

<dd>Set attribute number <code lang='und' xml:lang='und'>idx</code>.</dd><p class="pad"></p>

<dt><a name="void_set_attr_str(STRING_*name,_PMC_*val)"
><b><code lang='und' xml:lang='und'>void set_attr_str(STRING *name, PMC *val)</b></code></a></dt><p class="pad"></p>

<dd>Set attribute named <code lang='und' xml:lang='und'>name</code>.</dd><p class="pad"></p>

<dt><a name="PMC_*get_class()"
><b><code lang='und' xml:lang='und'>PMC *get_class()</b></code></a></dt><p class="pad"></p>

<dd>Return the class of this object.</dd><p class="pad"></p>

<dt><a name="INTVAL_get_integer_keyed_int(INTVAL_key)"
><b><code lang='und' xml:lang='und'>INTVAL get_integer_keyed_int(INTVAL key)</b></code></a></dt><p class="pad"></p>

<dt><a name="FLOATVAL_get_number_keyed_int(INTVAL_key)"
><b><code lang='und' xml:lang='und'>FLOATVAL get_number_keyed_int(INTVAL key)</b></code></a></dt><p class="pad"></p>

<dt><a name="STRING_*get_string_keyed_int(INTVAL_key)"
><b><code lang='und' xml:lang='und'>STRING *get_string_keyed_int(INTVAL key)</b></code></a></dt><p class="pad"></p>

<dt><a name="PMC_*get_pmc_keyed_int(INTVAL_key)"
><b><code lang='und' xml:lang='und'>PMC *get_pmc_keyed_int(INTVAL key)</b></code></a></dt><p class="pad"></p>

<dt><a name="void_set_integer_keyed_int_(INTVAL_key,_INTVAL_value)"
><b><code lang='und' xml:lang='und'>void set_integer_keyed_int (INTVAL key, INTVAL value)</b></code></a></dt><p class="pad"></p>

<dt><a name="void_set_number_keyed_int_(INTVAL_key,_FLOATVAL_value)"
><b><code lang='und' xml:lang='und'>void set_number_keyed_int (INTVAL key, FLOATVAL value)</b></code></a></dt><p class="pad"></p>

<dt><a name="void_set_string_keyed_int_(INTVAL_key,_STRING*_value)"
><b><code lang='und' xml:lang='und'>void set_string_keyed_int (INTVAL key, STRING *value)</b></code></a></dt><p class="pad"></p>

<dt><a name="void_set_pmc_keyed_int_(INTVAL_key,_PMC*_value)"
><b><code lang='und' xml:lang='und'>void set_pmc_keyed_int (INTVAL key, PMC *value)</b></code></a></dt><p class="pad"></p>

<dt><a name="void_delete_keyed_int(INTVAL_key)"
><b><code lang='und' xml:lang='und'>void delete_keyed_int(INTVAL key)</b></code></a></dt><p class="pad"></p>

<dt><a name="INTVAL_defined_keyed_int(INTVAL_key)"
><b><code lang='und' xml:lang='und'>INTVAL defined_keyed_int(INTVAL key)</b></code></a></dt><p class="pad"></p>

<dt><a name="INTVAL_exists_keyed_int(INTVAL_key)"
><b><code lang='und' xml:lang='und'>INTVAL exists_keyed_int(INTVAL key)</b></code></a></dt><p class="pad"></p>

<dd>These methods have default implementations in <em lang='und' xml:lang='und'><a href="default.pmc.html">src/pmc/default.pmc</a></em> which redirect to PMC keys.
Test if a specialized method exists,
else use fallback.</dd><p class="pad"></p>

<dt><a name="void_visit(visit_info_*info)"
><b><code lang='und' xml:lang='und'>void visit(visit_info *info)</b></code></a></dt><p class="pad"></p>

<dd>This is used by freeze/thaw to visit the contents of the object.</dd><p class="pad"></p>

<dd><code lang='und' xml:lang='und'>*info</code> is the visit info,
(see <em lang='und' xml:lang='und'>include/parrot/pmc_freeze.h</em>).</dd><p class="pad"></p>

<dt><a name="void_freeze(visit_info_*info)"
><b><code lang='und' xml:lang='und'>void freeze(visit_info *info)</b></code></a></dt><p class="pad"></p>

<dd>Used to archive the object.</dd><p class="pad"></p>

<dt><a name="void_thaw(visit_info_*info)"
><b><code lang='und' xml:lang='und'>void thaw(visit_info *info)</b></code></a></dt><p class="pad"></p>

<dd>Used to unarchive the object.</dd><p class="pad"></p>

<dt><a name="void_thawfinish(visit_info_*info)"
><b><code lang='und' xml:lang='und'>void thawfinish(visit_info *info)</b></code></a></dt><p class="pad"></p>
</dl>
        </DIV>
        <P>
        <TABLE BORDER="0" WIDTH="730" CELLSPACING="0" CELLPADDING="0">
            <TR ALIGN="RIGHT">
                <TD WIDTH="590" VALIGN="MIDDLE">
                    <BR>
                    <DIV CLASS="FOOTER">
                        <DIV ALIGN="LEFT">
                        </DIV>
                    </DIV>
                </TD>
                <TD VALIGN="middle" ALIGN="center">
                    <IMG BORDER=0
                        SRC="../../../resources/parrot.small.png" 
                        ALT="parrot">
                </TD>
            </TR>
        </TABLE>
    </BODY>
</HTML>
